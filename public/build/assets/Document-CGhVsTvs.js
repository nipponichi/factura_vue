import{s as Vn}from"./dialog.esm-Cd7IUNvF.js";import{B as Jt,d as Bt,e as Un,R as jn,O as Kn,f as Bn,c as Wt,g as qn,s as Hn,h as Gn,b as Xn,a as zn}from"./column.esm-BoZgGRTr.js";import{s as Jn}from"./toolbar.esm-DWLXbUPk.js";import{O as Ve,D as Me,A as ve,l as ht,B as Wn,o as R,c as et,w as H,e as B,F as bt,h as Kt,a as o,k as ke,C as Nt,n as _e,f as he,t as d,E as Yn,G as Yt,U as Zt,H as jt,I as Zn,b as _,r as mt,J as Xt,d as Qn,g as ge,i as eo,x as to,v as Re,m as zt,K as no,L as oo}from"./app-D0CrsufA.js";import{_ as so}from"./AppLayout-Ca39Qc1U.js";import Qt from"./TableDocumentSelector-nQr7GSXp.js";import{_ as io}from"./_plugin-vue_export-helper-DlAUqK2U.js";var ao={submenu:function(n){var e=n.instance,s=n.processedItem;return{display:e.isItemActive(s)?"block":"none"}}},ro={root:function(n){var e=n.instance,s=n.props;return["p-tieredmenu p-component",{"p-tieredmenu-overlay":s.popup,"p-ripple-disabled":e.$primevue.config.ripple===!1}]},start:"p-tieredmenu-start",menu:"p-tieredmenu-root-list",menuitem:function(n){var e=n.instance,s=n.processedItem;return["p-menuitem",{"p-menuitem-active p-highlight":e.isItemActive(s),"p-focus":e.isItemFocused(s),"p-disabled":e.isItemDisabled(s)}]},content:"p-menuitem-content",action:"p-menuitem-link",icon:"p-menuitem-icon",text:"p-menuitem-text",submenuIcon:"p-submenu-icon",submenu:"p-submenu-list",separator:"p-menuitem-separator",end:"p-tieredmenu-end"},lo=Jt.extend({name:"tieredmenu",classes:ro,inlineStyles:ao}),uo={name:"BaseTieredMenu",extends:Bt,props:{popup:{type:Boolean,default:!1},model:{type:Array,default:null},appendTo:{type:[String,Object],default:"body"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},disabled:{type:Boolean,default:!1},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:lo,provide:function(){return{$parentInstance:this}}},en={name:"TieredMenuSub",hostName:"TieredMenu",extends:Bt,emits:["item-click","item-mouseenter","item-mousemove"],container:null,props:{menuId:{type:String,default:null},focusedItemId:{type:String,default:null},items:{type:Array,default:null},visible:{type:Boolean,default:!1},level:{type:Number,default:0},templates:{type:Object,default:null},activeItemPath:{type:Object,default:null},tabindex:{type:Number,default:0}},methods:{getItemId:function(n){return"".concat(this.menuId,"_").concat(n.key)},getItemKey:function(n){return this.getItemId(n)},getItemProp:function(n,e,s){return n&&n.item?Ve.getItemValue(n.item[e],s):void 0},getItemLabel:function(n){return this.getItemProp(n,"label")},getItemLabelId:function(n){return"".concat(this.menuId,"_").concat(n.key,"_label")},getPTOptions:function(n,e,s){return this.ptm(s,{context:{item:n,index:e,active:this.isItemActive(n),focused:this.isItemFocused(n),disabled:this.isItemDisabled(n)}})},isItemActive:function(n){return this.activeItemPath.some(function(e){return e.key===n.key})},isItemVisible:function(n){return this.getItemProp(n,"visible")!==!1},isItemDisabled:function(n){return this.getItemProp(n,"disabled")},isItemFocused:function(n){return this.focusedItemId===this.getItemId(n)},isItemGroup:function(n){return Ve.isNotEmpty(n.items)},onEnter:function(){Me.nestedPosition(this.container,this.level)},onItemClick:function(n,e){this.getItemProp(e,"command",{originalEvent:n,item:e.item}),this.$emit("item-click",{originalEvent:n,processedItem:e,isFocus:!0})},onItemMouseEnter:function(n,e){this.$emit("item-mouseenter",{originalEvent:n,processedItem:e})},onItemMouseMove:function(n,e){this.$emit("item-mousemove",{originalEvent:n,processedItem:e})},getAriaSetSize:function(){var n=this;return this.items.filter(function(e){return n.isItemVisible(e)&&!n.getItemProp(e,"separator")}).length},getAriaPosInset:function(n){var e=this;return n-this.items.slice(0,n).filter(function(s){return e.isItemVisible(s)&&e.getItemProp(s,"separator")}).length+1},getMenuItemProps:function(n,e){return{action:ve({class:this.cx("action"),tabindex:-1,"aria-hidden":!0},this.getPTOptions(n,e,"action")),icon:ve({class:[this.cx("icon"),this.getItemProp(n,"icon")]},this.getPTOptions(n,e,"icon")),label:ve({class:this.cx("label")},this.getPTOptions(n,e,"label")),submenuicon:ve({class:this.cx("submenuIcon")},this.getPTOptions(n,e,"submenuIcon"))}},containerRef:function(n){this.container=n}},components:{AngleRightIcon:Un},directives:{ripple:jn}},co=["tabindex"],fo=["id","aria-label","aria-disabled","aria-expanded","aria-haspopup","aria-level","aria-setsize","aria-posinset","data-p-highlight","data-p-focused","data-p-disabled"],mo=["onClick","onMouseenter","onMousemove"],ho=["href","target"],po=["id"],go=["id"];function vo(t,n,e,s,x,h){var w=ht("AngleRightIcon"),Y=ht("TieredMenuSub",!0),F=Wn("ripple");return R(),et(Yt,ve({name:"p-tieredmenu",onEnter:h.onEnter},t.ptm("menu.transition")),{default:H(function(){return[e.level===0||e.visible?(R(),B("ul",ve({key:0,ref:h.containerRef,class:e.level===0?t.cx("menu"):t.cx("submenu"),tabindex:e.tabindex},e.level===0?t.ptm("menu"):t.ptm("submenu")),[(R(!0),B(bt,null,Kt(e.items,function(C,K){return R(),B(bt,{key:h.getItemKey(C)},[h.isItemVisible(C)&&!h.getItemProp(C,"separator")?(R(),B("li",ve({key:0,id:h.getItemId(C),style:h.getItemProp(C,"style"),class:[t.cx("menuitem",{processedItem:C}),h.getItemProp(C,"class")],role:"menuitem","aria-label":h.getItemLabel(C),"aria-disabled":h.isItemDisabled(C)||void 0,"aria-expanded":h.isItemGroup(C)?h.isItemActive(C):void 0,"aria-haspopup":h.isItemGroup(C)&&!h.getItemProp(C,"to")?"menu":void 0,"aria-level":e.level+1,"aria-setsize":h.getAriaSetSize(),"aria-posinset":h.getAriaPosInset(K)},h.getPTOptions(C,K,"menuitem"),{"data-p-highlight":h.isItemActive(C),"data-p-focused":h.isItemFocused(C),"data-p-disabled":h.isItemDisabled(C)}),[o("div",ve({class:t.cx("content"),onClick:function(le){return h.onItemClick(le,C)},onMouseenter:function(le){return h.onItemMouseEnter(le,C)},onMousemove:function(le){return h.onItemMouseMove(le,C)}},h.getPTOptions(C,K,"content")),[e.templates.item?(R(),et(Nt(e.templates.item),{key:1,item:C.item,hasSubmenu:h.getItemProp(C,"items"),label:h.getItemLabel(C),props:h.getMenuItemProps(C,K)},null,8,["item","hasSubmenu","label","props"])):ke((R(),B("a",ve({key:0,href:h.getItemProp(C,"url"),class:t.cx("action"),target:h.getItemProp(C,"target"),tabindex:"-1","aria-hidden":"true"},h.getPTOptions(C,K,"action")),[e.templates.itemicon?(R(),et(Nt(e.templates.itemicon),{key:0,item:C.item,class:_e(t.cx("icon"))},null,8,["item","class"])):h.getItemProp(C,"icon")?(R(),B("span",ve({key:1,class:[t.cx("icon"),h.getItemProp(C,"icon")]},h.getPTOptions(C,K,"icon")),null,16)):he("",!0),o("span",ve({id:h.getItemLabelId(C),class:t.cx("label")},h.getPTOptions(C,K,"label")),d(h.getItemLabel(C)),17,po),h.getItemProp(C,"items")?(R(),B(bt,{key:2},[e.templates.submenuicon?(R(),et(Nt(e.templates.submenuicon),ve({key:0,class:t.cx("submenuIcon"),active:h.isItemActive(C)},h.getPTOptions(C,K,"submenuIcon")),null,16,["class","active"])):(R(),et(w,ve({key:1,class:t.cx("submenuIcon")},h.getPTOptions(C,K,"submenuIcon")),null,16,["class"]))],64)):he("",!0)],16,ho)),[[F]])],16,mo),h.isItemVisible(C)&&h.isItemGroup(C)?(R(),et(Y,{key:0,id:h.getItemId(C)+"_list",style:Yn(t.sx("submenu",!0,{processedItem:C})),"aria-labelledby":h.getItemLabelId(C),role:"menu",menuId:e.menuId,focusedItemId:e.focusedItemId,items:C.items,templates:e.templates,activeItemPath:e.activeItemPath,level:e.level+1,visible:h.isItemActive(C)&&h.isItemGroup(C),pt:t.pt,unstyled:t.unstyled,onItemClick:n[0]||(n[0]=function(L){return t.$emit("item-click",L)}),onItemMouseenter:n[1]||(n[1]=function(L){return t.$emit("item-mouseenter",L)}),onItemMousemove:n[2]||(n[2]=function(L){return t.$emit("item-mousemove",L)})},null,8,["id","style","aria-labelledby","menuId","focusedItemId","items","templates","activeItemPath","level","visible","pt","unstyled"])):he("",!0)],16,fo)):he("",!0),h.isItemVisible(C)&&h.getItemProp(C,"separator")?(R(),B("li",ve({key:1,id:h.getItemId(C),style:h.getItemProp(C,"style"),class:[t.cx("separator"),h.getItemProp(C,"class")],role:"separator"},t.ptm("separator")),null,16,go)):he("",!0)],64)}),128))],16,co)):he("",!0)]}),_:1},16,["onEnter"])}en.render=vo;var tn={name:"TieredMenu",extends:uo,inheritAttrs:!1,emits:["focus","blur","before-show","before-hide","hide","show"],outsideClickListener:null,scrollHandler:null,resizeListener:null,target:null,container:null,menubar:null,searchTimeout:null,searchValue:null,data:function(){return{id:this.$attrs.id,focused:!1,focusedItemInfo:{index:-1,level:0,parentKey:""},activeItemPath:[],visible:!this.popup,submenuVisible:!1,dirty:!1}},watch:{"$attrs.id":{immediate:!0,handler:function(n){this.id=n||Zt()}},activeItemPath:function(n){this.popup||(Ve.isNotEmpty(n)?(this.bindOutsideClickListener(),this.bindResizeListener()):(this.unbindOutsideClickListener(),this.unbindResizeListener()))}},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&jt.clear(this.container),this.target=null,this.container=null},methods:{getItemProp:function(n,e){return n?Ve.getItemValue(n[e]):void 0},getItemLabel:function(n){return this.getItemProp(n,"label")},isItemDisabled:function(n){return this.getItemProp(n,"disabled")},isItemVisible:function(n){return this.getItemProp(n,"visible")!==!1},isItemGroup:function(n){return Ve.isNotEmpty(this.getItemProp(n,"items"))},isItemSeparator:function(n){return this.getItemProp(n,"separator")},getProccessedItemLabel:function(n){return n?this.getItemLabel(n.item):void 0},isProccessedItemGroup:function(n){return n&&Ve.isNotEmpty(n.items)},toggle:function(n){this.visible?this.hide(n,!0):this.show(n)},show:function(n,e){this.popup&&(this.$emit("before-show"),this.visible=!0,this.target=this.target||n.currentTarget,this.relatedTarget=n.relatedTarget||null),e&&Me.focus(this.menubar)},hide:function(n,e){this.popup&&(this.$emit("before-hide"),this.visible=!1),this.activeItemPath=[],this.focusedItemInfo={index:-1,level:0,parentKey:""},e&&Me.focus(this.relatedTarget||this.target||this.menubar),this.dirty=!1},onFocus:function(n){this.focused=!0,this.popup||(this.focusedItemInfo=this.focusedItemInfo.index!==-1?this.focusedItemInfo:{index:this.findFirstFocusedItemIndex(),level:0,parentKey:""}),this.$emit("focus",n)},onBlur:function(n){this.focused=!1,this.focusedItemInfo={index:-1,level:0,parentKey:""},this.searchValue="",this.dirty=!1,this.$emit("blur",n)},onKeyDown:function(n){if(this.disabled){n.preventDefault();return}var e=n.metaKey||n.ctrlKey;switch(n.code){case"ArrowDown":this.onArrowDownKey(n);break;case"ArrowUp":this.onArrowUpKey(n);break;case"ArrowLeft":this.onArrowLeftKey(n);break;case"ArrowRight":this.onArrowRightKey(n);break;case"Home":this.onHomeKey(n);break;case"End":this.onEndKey(n);break;case"Space":this.onSpaceKey(n);break;case"Enter":case"NumpadEnter":this.onEnterKey(n);break;case"Escape":this.onEscapeKey(n);break;case"Tab":this.onTabKey(n);break;case"PageDown":case"PageUp":case"Backspace":case"ShiftLeft":case"ShiftRight":break;default:!e&&Ve.isPrintableCharacter(n.key)&&this.searchItems(n,n.key);break}},onItemChange:function(n){var e=n.processedItem,s=n.isFocus;if(!Ve.isEmpty(e)){var x=e.index,h=e.key,w=e.level,Y=e.parentKey,F=e.items,C=Ve.isNotEmpty(F),K=this.activeItemPath.filter(function(L){return L.parentKey!==Y&&L.parentKey!==h});C&&(K.push(e),this.submenuVisible=!0),this.focusedItemInfo={index:x,level:w,parentKey:Y},this.activeItemPath=K,C&&(this.dirty=!0),s&&Me.focus(this.menubar)}},onOverlayClick:function(n){Kn.emit("overlay-click",{originalEvent:n,target:this.target})},onItemClick:function(n){var e=n.originalEvent,s=n.processedItem,x=this.isProccessedItemGroup(s),h=Ve.isEmpty(s.parent),w=this.isSelected(s);if(w){var Y=s.index,F=s.key,C=s.level,K=s.parentKey;this.activeItemPath=this.activeItemPath.filter(function(le){return F!==le.key&&F.startsWith(le.key)}),this.focusedItemInfo={index:Y,level:C,parentKey:K},this.dirty=!h,Me.focus(this.menubar)}else if(x)this.onItemChange(n);else{var L=h?s:this.activeItemPath.find(function(le){return le.parentKey===""});this.hide(e),this.changeFocusedItemIndex(e,L?L.index:-1),Me.focus(this.menubar)}},onItemMouseEnter:function(n){this.dirty&&this.onItemChange(n)},onItemMouseMove:function(n){this.focused&&this.changeFocusedItemIndex(n,n.processedItem.index)},onArrowDownKey:function(n){var e=this.focusedItemInfo.index!==-1?this.findNextItemIndex(this.focusedItemInfo.index):this.findFirstFocusedItemIndex();this.changeFocusedItemIndex(n,e),n.preventDefault()},onArrowUpKey:function(n){if(n.altKey){if(this.focusedItemInfo.index!==-1){var e=this.visibleItems[this.focusedItemInfo.index],s=this.isProccessedItemGroup(e);!s&&this.onItemChange({originalEvent:n,processedItem:e})}this.popup&&this.hide(n,!0),n.preventDefault()}else{var x=this.focusedItemInfo.index!==-1?this.findPrevItemIndex(this.focusedItemInfo.index):this.findLastFocusedItemIndex();this.changeFocusedItemIndex(n,x),n.preventDefault()}},onArrowLeftKey:function(n){var e=this,s=this.visibleItems[this.focusedItemInfo.index],x=this.activeItemPath.find(function(w){return w.key===s.parentKey}),h=Ve.isEmpty(s.parent);h||(this.focusedItemInfo={index:-1,parentKey:x?x.parentKey:""},this.searchValue="",this.onArrowDownKey(n)),this.activeItemPath=this.activeItemPath.filter(function(w){return w.parentKey!==e.focusedItemInfo.parentKey}),n.preventDefault()},onArrowRightKey:function(n){var e=this.visibleItems[this.focusedItemInfo.index],s=this.isProccessedItemGroup(e);s&&(this.onItemChange({originalEvent:n,processedItem:e}),this.focusedItemInfo={index:-1,parentKey:e.key},this.searchValue="",this.onArrowDownKey(n)),n.preventDefault()},onHomeKey:function(n){this.changeFocusedItemIndex(n,this.findFirstItemIndex()),n.preventDefault()},onEndKey:function(n){this.changeFocusedItemIndex(n,this.findLastItemIndex()),n.preventDefault()},onEnterKey:function(n){if(this.focusedItemInfo.index!==-1){var e=Me.findSingle(this.menubar,'li[id="'.concat("".concat(this.focusedItemId),'"]')),s=e&&Me.findSingle(e,'[data-pc-section="action"]');if(s?s.click():e&&e.click(),!this.popup){var x=this.visibleItems[this.focusedItemInfo.index],h=this.isProccessedItemGroup(x);!h&&(this.focusedItemInfo.index=this.findFirstFocusedItemIndex())}}n.preventDefault()},onSpaceKey:function(n){this.onEnterKey(n)},onEscapeKey:function(n){if(this.focusedItemInfo.level!==0){var e=this.focusedItemInfo;this.hide(n,!1),!this.popup&&(this.focusedItemInfo={index:Number(e.parentKey.split("_")[0]),level:0,parentKey:""})}n.preventDefault()},onTabKey:function(n){if(this.focusedItemInfo.index!==-1){var e=this.visibleItems[this.focusedItemInfo.index],s=this.isProccessedItemGroup(e);!s&&this.onItemChange({originalEvent:n,processedItem:e})}this.hide()},onEnter:function(n){this.autoZIndex&&jt.set("menu",n,this.baseZIndex+this.$primevue.config.zIndex.menu),Me.addStyles(n,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),Me.focus(this.menubar),this.scrollInView()},onAfterEnter:function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.container=null,this.dirty=!1},onAfterLeave:function(n){this.autoZIndex&&jt.clear(n)},alignOverlay:function(){Me.absolutePosition(this.container,this.target);var n=Me.getOuterWidth(this.target);n>Me.getOuterWidth(this.container)&&(this.container.style.minWidth=Me.getOuterWidth(this.target)+"px")},bindOutsideClickListener:function(){var n=this;this.outsideClickListener||(this.outsideClickListener=function(e){var s=n.container&&!n.container.contains(e.target),x=n.popup?!(n.target&&(n.target===e.target||n.target.contains(e.target))):!0;s&&x&&n.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var n=this;this.scrollHandler||(this.scrollHandler=new Zn(this.target,function(e){n.hide(e,!0)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var n=this;this.resizeListener||(this.resizeListener=function(e){Me.isTouchDevice()||n.hide(e,!0)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isItemMatched:function(n){var e;return this.isValidItem(n)&&((e=this.getProccessedItemLabel(n))===null||e===void 0?void 0:e.toLocaleLowerCase().startsWith(this.searchValue.toLocaleLowerCase()))},isValidItem:function(n){return!!n&&!this.isItemDisabled(n.item)&&!this.isItemSeparator(n.item)&&this.isItemVisible(n.item)},isValidSelectedItem:function(n){return this.isValidItem(n)&&this.isSelected(n)},isSelected:function(n){return this.activeItemPath.some(function(e){return e.key===n.key})},findFirstItemIndex:function(){var n=this;return this.visibleItems.findIndex(function(e){return n.isValidItem(e)})},findLastItemIndex:function(){var n=this;return Ve.findLastIndex(this.visibleItems,function(e){return n.isValidItem(e)})},findNextItemIndex:function(n){var e=this,s=n<this.visibleItems.length-1?this.visibleItems.slice(n+1).findIndex(function(x){return e.isValidItem(x)}):-1;return s>-1?s+n+1:n},findPrevItemIndex:function(n){var e=this,s=n>0?Ve.findLastIndex(this.visibleItems.slice(0,n),function(x){return e.isValidItem(x)}):-1;return s>-1?s:n},findSelectedItemIndex:function(){var n=this;return this.visibleItems.findIndex(function(e){return n.isValidSelectedItem(e)})},findFirstFocusedItemIndex:function(){var n=this.findSelectedItemIndex();return n<0?this.findFirstItemIndex():n},findLastFocusedItemIndex:function(){var n=this.findSelectedItemIndex();return n<0?this.findLastItemIndex():n},searchItems:function(n,e){var s=this;this.searchValue=(this.searchValue||"")+e;var x=-1,h=!1;return this.focusedItemInfo.index!==-1?(x=this.visibleItems.slice(this.focusedItemInfo.index).findIndex(function(w){return s.isItemMatched(w)}),x=x===-1?this.visibleItems.slice(0,this.focusedItemInfo.index).findIndex(function(w){return s.isItemMatched(w)}):x+this.focusedItemInfo.index):x=this.visibleItems.findIndex(function(w){return s.isItemMatched(w)}),x!==-1&&(h=!0),x===-1&&this.focusedItemInfo.index===-1&&(x=this.findFirstFocusedItemIndex()),x!==-1&&this.changeFocusedItemIndex(n,x),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){s.searchValue="",s.searchTimeout=null},500),h},changeFocusedItemIndex:function(n,e){this.focusedItemInfo.index!==e&&(this.focusedItemInfo.index=e,this.scrollInView())},scrollInView:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,e=n!==-1?"".concat(this.id,"_").concat(n):this.focusedItemId,s=Me.findSingle(this.menubar,'li[id="'.concat(e,'"]'));s&&s.scrollIntoView&&s.scrollIntoView({block:"nearest",inline:"start"})},createProcessedItems:function(n){var e=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",w=[];return n&&n.forEach(function(Y,F){var C=(h!==""?h+"_":"")+F,K={item:Y,index:F,level:s,key:C,parent:x,parentKey:h};K.items=e.createProcessedItems(Y.items,s+1,K,C),w.push(K)}),w},containerRef:function(n){this.container=n},menubarRef:function(n){this.menubar=n?n.$el:void 0}},computed:{processedItems:function(){return this.createProcessedItems(this.model||[])},visibleItems:function(){var n=this,e=this.activeItemPath.find(function(s){return s.key===n.focusedItemInfo.parentKey});return e?e.items:this.processedItems},focusedItemId:function(){return this.focusedItemInfo.index!==-1?"".concat(this.id).concat(Ve.isNotEmpty(this.focusedItemInfo.parentKey)?"_"+this.focusedItemInfo.parentKey:"","_").concat(this.focusedItemInfo.index):null}},components:{TieredMenuSub:en,Portal:Bn}},yo=["id"];function bo(t,n,e,s,x,h){var w=ht("TieredMenuSub"),Y=ht("Portal");return R(),et(Y,{appendTo:t.appendTo,disabled:!t.popup},{default:H(function(){return[_(Yt,ve({name:"p-connected-overlay",onEnter:h.onEnter,onAfterEnter:h.onAfterEnter,onLeave:h.onLeave,onAfterLeave:h.onAfterLeave},t.ptm("transition")),{default:H(function(){return[x.visible?(R(),B("div",ve({key:0,ref:h.containerRef,id:x.id,class:t.cx("root"),onClick:n[0]||(n[0]=function(){return h.onOverlayClick&&h.onOverlayClick.apply(h,arguments)})},t.ptmi("root")),[t.$slots.start?(R(),B("div",ve({key:0,class:t.cx("start")},t.ptm("start")),[mt(t.$slots,"start")],16)):he("",!0),_(w,{ref:h.menubarRef,id:x.id+"_list",tabindex:t.disabled?-1:t.tabindex,role:"menubar","aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,"aria-disabled":t.disabled||void 0,"aria-orientation":"vertical","aria-activedescendant":x.focused?h.focusedItemId:void 0,menuId:x.id,focusedItemId:x.focused?h.focusedItemId:void 0,items:h.processedItems,templates:t.$slots,activeItemPath:x.activeItemPath,level:0,visible:x.submenuVisible,pt:t.pt,unstyled:t.unstyled,onFocus:h.onFocus,onBlur:h.onBlur,onKeydown:h.onKeyDown,onItemClick:h.onItemClick,onItemMouseenter:h.onItemMouseEnter,onItemMousemove:h.onItemMouseMove},null,8,["id","tabindex","aria-label","aria-labelledby","aria-disabled","aria-activedescendant","menuId","focusedItemId","items","templates","activeItemPath","visible","pt","unstyled","onFocus","onBlur","onKeydown","onItemClick","onItemMouseenter","onItemMousemove"]),t.$slots.end?(R(),B("div",ve({key:1,class:t.cx("end")},t.ptm("end")),[mt(t.$slots,"end")],16)):he("",!0)],16,yo)):he("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo","disabled"])}tn.render=bo;var xo={root:function(n){var e=n.props;return["p-splitbutton p-component",{"p-button-raised":e.raised,"p-button-rounded":e.rounded,"p-button-text":e.text,"p-button-outlined":e.outlined,"p-button-sm":e.size==="small","p-button-lg":e.size==="large"}]},button:"p-splitbutton-defaultbutton",menuButton:"p-splitbutton-menubutton"},Io=Jt.extend({name:"splitbutton",classes:xo}),ko={name:"BaseSplitButton",extends:Bt,props:{label:{type:String,default:null},icon:{type:String,default:null},model:{type:Array,default:null},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},appendTo:{type:[String,Object],default:"body"},disabled:{type:Boolean,default:!1},class:{type:null,default:null},style:{type:null,default:null},buttonProps:{type:null,default:null},menuButtonProps:{type:null,default:null},menuButtonIcon:{type:String,default:void 0},severity:{type:String,default:null},raised:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},size:{type:String,default:null},plain:{type:Boolean,default:!1}},style:Io,provide:function(){return{$parentInstance:this}}},nn={name:"SplitButton",extends:ko,inheritAttrs:!1,emits:["click"],data:function(){return{id:this.$attrs.id,isExpanded:!1}},watch:{"$attrs.id":{immediate:!0,handler:function(n){this.id=n||Zt()}}},mounted:function(){var n=this;this.$watch("$refs.menu.visible",function(e){n.isExpanded=e})},methods:{onDropdownButtonClick:function(n){n&&n.preventDefault(),this.$refs.menu.toggle({currentTarget:this.$el,relatedTarget:this.$refs.button.$el}),this.isExpanded=this.$refs.menu.visible},onDropdownKeydown:function(n){(n.code==="ArrowDown"||n.code==="ArrowUp")&&(this.onDropdownButtonClick(),n.preventDefault())},onDefaultButtonClick:function(n){this.isExpanded&&this.$refs.menu.hide(n),this.$emit("click",n)}},computed:{containerClass:function(){return[this.cx("root"),this.class]}},components:{PVSButton:Wt,PVSMenu:tn,ChevronDownIcon:qn}},Co=["data-p-severity"];function So(t,n,e,s,x,h){var w=ht("PVSButton"),Y=ht("PVSMenu");return R(),B("div",ve({class:h.containerClass,style:t.style},t.ptmi("root"),{"data-p-severity":t.severity}),[_(w,ve({type:"button",class:t.cx("button"),label:t.label,disabled:t.disabled,severity:t.severity,text:t.text,outlined:t.outlined,size:t.size,"aria-label":t.label,onClick:h.onDefaultButtonClick},t.buttonProps,{pt:t.ptm("button"),unstyled:t.unstyled}),Xt({default:H(function(){return[mt(t.$slots,"default")]}),_:2},[t.$slots.icon?{name:"icon",fn:H(function(F){return[mt(t.$slots,"icon",{class:_e(F.class)},function(){return[o("span",ve({class:[t.icon,F.class]},t.ptm("button").icon,{"data-pc-section":"buttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["class","label","disabled","severity","text","outlined","size","aria-label","onClick","pt","unstyled"]),_(w,ve({ref:"button",type:"button",class:t.cx("menuButton"),disabled:t.disabled,"aria-haspopup":"true","aria-expanded":x.isExpanded,"aria-controls":x.id+"_overlay",onClick:h.onDropdownButtonClick,onKeydown:h.onDropdownKeydown,severity:t.severity,text:t.text,outlined:t.outlined,size:t.size},t.menuButtonProps,{pt:t.ptm("menuButton"),unstyled:t.unstyled}),{icon:H(function(F){return[mt(t.$slots,"menubuttonicon",{class:_e(F.class)},function(){return[(R(),et(Nt(t.menuButtonIcon?"span":"ChevronDownIcon"),ve({class:[t.menuButtonIcon,F.class]},t.ptm("menuButton").icon,{"data-pc-section":"menubuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","disabled","aria-expanded","aria-controls","onClick","onKeydown","severity","text","outlined","size","pt","unstyled"]),_(Y,{ref:"menu",id:x.id+"_overlay",model:t.model,popup:!0,autoZIndex:t.autoZIndex,baseZIndex:t.baseZIndex,appendTo:t.appendTo,unstyled:t.unstyled,pt:t.ptm("menu")},Xt({_:2},[t.$slots.menuitemicon?{name:"itemicon",fn:H(function(F){return[mt(t.$slots,"menuitemicon",{item:F.item,class:_e(F.class)})]}),key:"0"}:void 0,t.$slots.item?{name:"item",fn:H(function(F){return[mt(t.$slots,"item",{item:F.item,hasSubmenu:F.hasSubmenu,label:F.label,props:F.props})]}),key:"1"}:void 0]),1032,["id","model","autoZIndex","baseZIndex","appendTo","unstyled","pt"])],16,Co)}nn.render=So;if(document.all&&!window.setTimeout.isPolyfill){var wo=window.setTimeout;window.setTimeout=function(t,n){var e=Array.prototype.slice.call(arguments,2);return wo(t instanceof Function?function(){t.apply(null,e)}:t,n)},window.setTimeout.isPolyfill=!0}var To=window.XMLHttpRequest,Ee=function(t,n){var e="1.8.2.1",s=2,x=null,h=null,w=null,Y=null,F=null,C=!1,K=!1,L=!1,le=new Array;le.es_ES={checktime_warn:"Se ha detectado un desfase horario entre su sistema y el servidor. Se recomienda que se corrija antes de pulsar Aceptar para continuar.",checktime_err:"Se ha detectado un desfase horario entre su sistema y el servidor. Debe corregir la hora de su sistema y recargar esta página antes de continuar.",checktime_local_time:"Hora de su sistema",checktime_server_time:"Hora del servidor"},le.gl_ES={checktime_warn:"Destectouse un desfase horario entre o seu sistema e o servidor. Recoméndase corrixilo antes de pulsar Aceptar para continuar.",checktime_err:"Destectouse un desfase horario entre o seu sistema e o servidor. Debe corrixir a hora do seu sistema antes de continuar.",checktime_local_time:"Hora do seu sistema",checktime_server_time:"Hora do servidor"};var u=le.es_ES,ce=u,pe=null,Ke="WINDOWS",Be="APPLE",J="PKCS12",qe="PKCS11",Ce="MOZ_UNI",ee="SHARED_NSS",O="JAVA",We="JCEKS",se="JAVACE",oe="DNIEJAVA",Ue="CT_NO",xt="CT_RECOMMENDED",It="CT_OBLIGATORY",Mt=2e3,kt=15,pt=!1,je,ot,Fe,tt=null,_t=!1;function on(){return"WebSocket"in t||"MozWebSocket"in t}function gt(I){return I!=null&&I.length>8&&(I.substr(0,5)=="http:"||I.substr(0,6)=="https:")}var $t=null,Vt=null,vt=null;function sn(I,D,y){$t=D,Vt=y;var $=Qe();$.open("GET",I,!0),"responseType"in $&&Uint8Array?($.responseType="arraybuffer",vt="arraybuffer"):"overrideMimeType"in $?($.overrideMimeType("text/plain; charset=x-user-defined"),vt="string"):($.setRequestHeader("Accept-Charset","x-user-defined"),vt="bytearray"),"onload"in $||($.onreadystatechange=function(){this.readyState===4&&this.onload()}),$.onload=function(X){if($.readyState==4&&$.status==200&&$t){"response"in this||(this.response=new VBArray(this.responseBody).toArray());var G;vt=="arraybuffer"?G=N.encodeArrayBuffer(this.response):vt=="bytearray"?G=N.encodeByteArray(this.response):vt=="string"?G=N.encode(this.response):this.onerror(new Error("No se conoce el modo usado para la descarga de los datos")),$t(G)}};try{$.onerror=function(X){Vt&&Vt(X)}}catch{}$.send()}function Qe(){var I=null;if(typeof XMLHttpRequest<"u")typeof Sarissa<"u"&&Sarissa.originalXMLHttpRequest?I=new Sarissa.originalXMLHttpRequest:I=new To;else if(typeof t.ActiveXObject<"u")try{I=new ActiveXObject("Msxml2.XMLHTTP.4.0")}catch{try{I=new ActiveXObject("MSXML2.XMLHTTP")}catch{try{I=new ActiveXObject("Microsoft.XMLHTTP")}catch{I=null}}}return I}var an=function(I){pt=I},rn=function(I){Fe=I};function ln(){return!0}function dn(){return!1}var un=function(I){},cn=function(I){},qt=function(I,D,y){if(!(!I||I==Ue||D&&D<=0)){D||(D=3e5);try{var $;y?$=y:$=document.URL+"/"+Math.random();var X=Qe();X.open("GET",$,!1),X.send();var G=new Date,ie=new Date(X.getResponseHeader("Date"));if(ie==null||ie.getTime()==0)return;console.log("Hora cliente: "+G),console.log("Hora servidor: "+ie);var Le=Math.abs(G.getTime()-ie.getTime());Le>D&&(I==xt?alert(ce.checktime_warn+`
`+ce.checktime_local_time+": "+G.toLocaleString()+`
`+ce.checktime_server_time+": "+ie.toLocaleString()):I==It&&(C=!0,alert(ce.checktime_err+`
`+ce.checktime_local_time+": "+G.toLocaleString()+`
`+ce.checktime_server_time+": "+ie.toLocaleString())))}catch(be){console.log("Error en la obtencion de la hora del servidor: "+be);return}}};function fn(){return ae.isFirefox()?Ce:null}var mn=function(I){w.setKeyStore(I??pe),L=!0},hn=function(I,D,y){w.selectCertificate(I,D,y),L=!1},pn=function(I,D,y,$,X,G){w.sign(I,D,y,$,X,G),L=!1},gn=function(I,D,y,$,X,G,ie){w.coSign(I,y,$,X,G,ie),L=!1},vn=function(I,D,y,$,X,G){w.coSign(I,D,y,$,X,G),L=!1},yn=function(I,D,y,$,X,G){w.counterSign(I,D,y,$,X,G),L=!1},bn=function(I,D,y,$,X,G,ie,Le){w.signAndSaveToFile(I,D,y,$,X,G,ie,Le),L=!1},xn=function(I,D,y,$,X,G){w.signBatchXML(I,D,y,$,X,G),L=!1},In=function(I,D,y,$){var X=new Object;X.algorithm=I,X.format=D,X.suboperation=y,$&&(X.extraparams=N.encode($)),X.singlesigns=new Array,tt=X},kn=function(I,D,y,$,X){if(!I||D==null)throw new Error("No se ha indicado el id o datareference de la firma");if(!tt)throw new Error("No hay ningun lote creado. Es necesario crear uno antes de agregar firmas");Se.checkExistingId(tt.singlesigns,I);var G=new Object;G.id=I,G.datareference=D,y&&(G.format=y),$&&(G.suboperation=$),X&&(G.extraparams=N.encode(X)),tt.singlesigns.push(G)},Cn=function(I){_t=I},Sn=function(I,D,y,$,X,G){if(!tt)throw new Error("No hay ningun lote creado. Es necesario crear uno antes de firmar.");tt.stoponerror=I;var ie=N.encode(JSON.stringify(tt),!0);w.signBatchJSON(ie,D,y,$,X,G),tt=null,L=!1},wn=function(I){return I!=null?N.encode(I):null},Tn=function(I){return I!=null?N.decode(I):null},An=function(I,D,y,$,X,G,ie){w.saveDataToFile(I,D,y,$,X,G,ie)},En=function(I,D,y,$,X,G){w.getFileNameContentBase64(I,D,y,$,X,G)},On=function(I,D,y,$,X,G){w.getMultiFileNameContentBase64(I,D,y,$,X,G)},Dn=function(I,D){w.getCurrentLog(I,D)},Pn=function(){return w.echo()},Lt=function(I){K&&!I&&(L=!0),K=I},Ft=function(I){ce=I==null||le[I]==null?u:le[I]},Rn=function(){return w.getErrorMessage()},Mn=function(){return w.getErrorType()},_n=function(I,D){Y=I,F=D,w&&w.setServlets&&w.setServlets(I,D)},Ln=function(I,D){var y=1024,$=65535;je=I&&I>=y&&I<=$?I:y,ot=D?D<=$&&D>=je?D:$:I&&I==je?je:$,w&&w.setPortRange&&w.setPortRange(je,ot)};function Ut(I){if(ae.isChrome()||ae.isIOS()||ae.isAndroid()&&ae.isFirefox())document.location=I;else{if(document.getElementById("iframeAfirma")!=null)try{var D=document.getElementById("iframeAfirma");D.outerHTML="",D=null}catch{}navigator.msLaunchUri?navigator.msLaunchUri(I,null,function(){wrongInstallation=!0}):Fn(I)}}function Fn(I){var D=document.createElement("iframe"),y=document.createAttribute("id");y.value="iframeAfirma",D.setAttributeNode(y);var $=document.createAttribute("src");$.value=I,D.setAttributeNode($);var X=document.createAttribute("height");X.value=1,D.setAttributeNode(X);var G=document.createAttribute("width");if(G.value=1,D.setAttributeNode(G),!ae.isInternetExplorer7orLower()){var ie=document.createAttribute("style");ie.value="display: none;",D.setAttributeNode(ie)}document.body.appendChild(D)}function Ht(I,D,y){if(C){console&&console.log&&console.log("Se ha detectado un desfase grave entre la hora del sistema y la del servidor. Se cancela la carga del cliente de firma");return}pt||ae.isIOS()||ae.isAndroid()?(w=new Gt(I,t,n),(Y||F)&&w.setServlets(Y,F)):on()&&!ae.isInternetExplorer()&&!ae.isFirefox60orLower()?(w=new Nn(t,n),je&&w.setPortRange(je,ot)):!ae.isInternetExplorer10orLower()&&!ae.isSafari10()?(w=new $n(I,t,n),je&&w.setPortRange(je,ot)):(w=new Gt(I,t,n),(Y||F)&&w.setServlets(Y,F)),D||(D=fn()),w.setKeyStore(D)}var ae=function(I,D){function y(){return navigator.userAgent.toUpperCase().indexOf("ANDROID")!=-1||navigator.appVersion.toUpperCase().indexOf("ANDROID")!=-1||navigator.userAgent.toUpperCase().indexOf("SILK/")!=-1||navigator.userAgent.toUpperCase().indexOf("KFJWI")!=-1||navigator.userAgent.toUpperCase().indexOf("KFJWA")!=-1||navigator.userAgent.toUpperCase().indexOf("KFTT")!=-1||navigator.userAgent.toUpperCase().indexOf("KFOT")!=-1||navigator.userAgent.toUpperCase().indexOf("KINDLE FIRE")!=-1}function $(){return navigator.userAgent.toUpperCase().indexOf("IPAD")!=-1||navigator.userAgent.toUpperCase().indexOf("IPOD")!=-1||navigator.userAgent.toUpperCase().indexOf("IPHONE")!=-1||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}function X(){return!!navigator.userAgent.match(/MSIE/)||!!(navigator.userAgent.match(/Trident/)&&navigator.userAgent.match(/rv:11/))||!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)}function G(){return!!navigator.userAgent.match(/MSIE/)}function ie(){var fe=navigator.userAgent.toLowerCase();return 7>=(fe.indexOf("msie")!=-1)?parseInt(fe.split("msie")[1]):!1}function Le(){return navigator.sayswho=function(){var fe=navigator.userAgent,te,de=fe.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(de[1])?(te=/\brv[ :]+(\d+)/g.exec(fe)||[],"IE "+(te[1]||"")):de[1]==="Chrome"&&(te=fe.match(/\b(OPR|Edge)\/(\d+)/),te!=null)?te.slice(1).join(" ").replace("OPR","Opera"):(de=de[2]?[de[1],de[2]]:[navigator.appName,navigator.appVersion,"-?"],(te=fe.match(/version\/(\d+)/i))!=null&&de.splice(1,1,te[1]),de.join(" "))}(),navigator.sayswho=="Safari 10"}function be(){return navigator.userAgent.toUpperCase().indexOf("FIREFOX")!=-1}function Oe(){navigator.sayswho=function(){var te=navigator.userAgent,de,re=te.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(re[1])?(de=/\brv[ :]+(\d+)/g.exec(te)||[],"IE "+(de[1]||"")):re[1]==="Chrome"&&(de=te.match(/\b(OPR|Edge)\/(\d+)/),de!=null)?de.slice(1).join(" ").replace("OPR","Opera"):(re=re[2]?[re[1],re[2]]:[navigator.appName,navigator.appVersion,"-?"],(de=te.match(/version\/(\d+)/i))!=null&&re.splice(1,1,de[1]),re.join(" "))}();var fe=navigator.sayswho;return fe.indexOf("Firefox")!=-1?60>=parseInt(fe.split("Firefox")[1]):!1}function xe(){return navigator.userAgent.toUpperCase().indexOf("CHROME/")!=-1||navigator.userAgent.toUpperCase().indexOf("CHROMIUM")!=-1}return{isAndroid:y,isIOS:$,isInternetExplorer:X,isInternetExplorer10orLower:G,isInternetExplorer7orLower:ie,isSafari10:Le,isFirefox:be,isFirefox60orLower:Oe,isChrome:xe}}(),Se=function(I,D){var y=2147483648,$="1234567890abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",X=1024,G=49152,ie=65535;function Le(){var ne=20,P="",Z;if(typeof I.crypto<"u"&&typeof I.crypto.getRandomValues<"u")Z=new Uint32Array(ne),I.crypto.getRandomValues(Z);else{Z=new Array(ne);for(var W=0;W<ne;W++)Z[W]=be()}for(var W=0;W<ne;W++)P+=$.charAt(Math.floor(Z[W]%$.length));return P}function be(){return xe()*y}var Oe;function xe(){return Oe==D&&(Oe=new Date().getMilliseconds()*1e3*Math.random()),Oe=(Oe*9301+49297)%233280,Oe/233280}function fe(ne,P){var Z=ne?Math.max(ne,X):G,W=P?Math.min(P,ie):ie,j=new Array;switch(W-Z){case 0:j[0]=Z;break;case 1:j[0]=te(Z,W,j),j[1]=te(Z,W,j);break;default:j[0]=te(Z,W,j),j[1]=te(Z,W,j),j[2]=te(Z,W,j)}return j}function te(ne,P,Z){if(Z.length>P-ne)return 0;var W;do{var j=Math.floor(Math.random()*(P+1-ne))+ne;W=de(j,Z)}while(W);return j}function de(ne,P){for(var Z=0;Z<P.length;Z++)if(P[Z]===ne)return!0;return!1}function re(ne){var P=N.decode(ne);return JSON.parse(P)}function Q(ne,P){for(var Z=0;Z<ne.length;Z++)if(ne[Z].id==P)throw new Error('El id de la firma a agregar = "'+ne[Z].id+'" ya existe en el lote')}return{generateNewIdSession:Le,getRandomPorts:fe,parseJSONData:re,checkExistingId:Q,getRandom:be}}(t,n),Nn=function(I,D){var y=4,$="127.0.0.1",X="wss://"+$+":",G="load",ie="multiload",Le="save",be="batch",Oe="log",xe="certificate",fe="sign",te="",de="",re="",Q="",ne="",P=!1,Z=Se.generateNewIdSession(),W=null,j=null,Ne=null,st=null,it=null,at=function(f,g){st=f,it=g},Ct=function(f){W=f},St=function(f,g,a){ue(g,a),Q=xe;var r=Ye(f);Ie(Te(r))},wt=function(f,g,a,r,m,c){rt("sign",f,g,a,r,m,c)},Tt=function(f,g,a,r,m,c){rt("cosign",f,g,a,r,m,c)},At=function(f,g,a,r,m,c){rt("countersign",f,g,a,r,m,c)};function rt(f,g,a,r,m,c,k){ue(c,k),Q=fe;var U=Ge(f,a,r,m,De(g));Ie(Te(U))}var lt=function(f,g,a,r,m,c,k,U){ue(k,U),Q=fe;var z=Xe(f,De(g),a,r,m,c);Ie(Te(z))},Et=function(f,g,a,r,m,c){ue(m,c),Q=be;var k=dt(g,a,r,De(f),!1);Ie(Te(k))},Ot=function(f,g,a,r,m,c){ue(m,c),Q=be;var k=dt(g,a,r,f,!0);Ie(Te(k))},Dt=function(f,g,a,r,m,c){ue(m,c),Q=G;var k=ut("load",f,g,a,r,!1);Ie(Te(k))},Pt=function(f,g,a,r,m,c){ue(m,c),Q=ie;var k=ut("load",f,g,a,r,!0);Ie(Te(k))},we=function(f,g){ue(f,g),Q=Oe;var a=ut("getLog");Ie(Te(a))},He=function(f,g,a,r,m,c,k){ue(c,k),Q=Le;var U=ct(De(f),g,a,r,m);Ie(Te(U))};function ue(f,g){j=f,Ne=g}function De(f){return f?f.replace(/\+/g,"-").replace(/\//g,"_"):null}function Ye(f){var g=new Object;return g.op=b("op","selectcert"),g.idsession=b("idsession",Z),g.properties=b("properties",f!=null?N.encode(f,!0):null,!0),g.ksb64=b("ksb64",W!=null?N.encode(W,!0):null,!0),g.sticky=b("sticky",K),L&&(g.resetSticky=b("resetsticky",L)),g}function Ge(f,g,a,r,m){var c=new Object;return c.op=b("op",f),c.idsession=b("idsession",Z),c.algorithm=b("algorithm",g),c.format=b("format",a),c.properties=b("properties",r!=null?N.encode(r,!0):null,!0),c.ksb64=b("ksb64",W!=null?N.encode(W,!0):null,!0),c.sticky=b("sticky",K),L&&(c.resetSticky=b("resetsticky",L)),c.dat=b("dat",m==""?null:m,!0),c}function Xe(f,g,a,r,m,c){var k=new Object;return k.op=b("op","signandsave"),k.idsession=b("idsession",Z),k.cryptoOp=b("cop",f),k.algorithm=b("algorithm",a),k.format=b("format",r),k.properties=b("properties",m?N.encode(m,!0):null,!0),k.filename=b("filename",c),k.ksb64=b("ksb64",W?N.encode(W,!0):null,!0),k.sticky=b("sticky",K),L&&(k.resetSticky=b("resetsticky",L)),k.dat=b("dat",g==""?null:g,!0),k}function dt(f,g,a,r,m){var c=new Object;return c.op=b("op","batch"),c.idsession=b("idsession",Z),c.batchpresignerurl=b("batchpresignerurl",f),c.batchpostsignerurl=b("batchpostsignerurl",g),c.properties=b("properties",a!=null?N.encode(a,!0):null,!0),c.ksb64=b("ksb64",W!=null?N.encode(W,!0):null,!0),c.sticky=b("sticky",K),L&&(c.resetSticky=b("resetsticky",L)),c.needcert=b("needcert",!0),c.dat=b("dat",r==""?null:r,!0),m&&(c.jsonbatch=b("jsonbatch",!0),_t&&(c.localBatchProcess=b("localBatchProcess",!0))),c}function ut(f,g,a,r,m,c){var k=new Object;return k.op=b("op",f),k.idsession=b("idsession",Z),k.title=b("title",g),k.extensions=b("exts",a),k.description=b("desc",r),k.filePath=b("filePath",m),k.multiload=b("multiload",c),k}function ct(f,g,a,r,m){var c=new Object;return c.op=b("op","save"),c.idsession=b("idsession",Z),c.title=b("title",g),c.filename=b("filename",a),c.extension=b("exts",r),c.description=b("desc",m),c.dat=b("dat",f==""?null:f,!0),c}function Te(f){var g=[];Fe&&g.push(b("mcv",Fe));for(var a in f)g.push(f[a]);for(var r="afirma://"+encodeURIComponent(f.op.value)+"?",m=0;m<g.length;m++)g[m].value!=null&&g[m].value!="null"&&(r+=(m!=0?"&":"")+g[m].key+"="+(g[m].avoidEncoding===!0?g[m].value:encodeURIComponent(g[m].value)));return r}function Ie(f){if(ne=f,ft())console.log("Enviamos el mensaje al socket abierto"),ze(Ee.AUTOFIRMA_CONNECTION_RETRIES);else{var g=Se.getRandomPorts(st,it);yt(g),console.log("Tratamos de conectar con el cliente a traves de WebSockets en los puertos "+g),setTimeout($e,3e3,g,Ee.AUTOFIRMA_CONNECTION_RETRIES)}}function ft(){return!!re&&P}function yt(f){for(var g="",a=0;a<f.length;a++)g+=f[a],a<f.length-1&&(g+=",");var r="afirma://websocket?ports="+g+"&v="+y+"&jvc="+s+"&idsession="+Z;Ut(r)}function $e(f,g){if(P)console.log("Enviamos el mensaje al socket"),ze(Ee.AUTOFIRMA_CONNECTION_RETRIES);else if(g>0){for(var a=0;!P&&a<f.length;a++)Rt(f[a]);setTimeout($e,Ee.AUTOFIRMA_LAUNCHING_TIME,f,g-1)}else l("es.gob.afirma.standalone.ApplicationNotFoundException","No se ha podido conectar con AutoFirma.")}function Rt(f){var g;try{g=new WebSocket(X+f)}catch(a){console.log("Error estableciendo el WebSocket: "+a)}return g.onopen=function(a,r){P=!0,re=this,console.log("Se abre el socket")},g.onclose=function(a){re!=null&&re===this&&(P=!1,re=null,console.log("Se cierra el socket. Codigo WebSocket de cierre: "+(a?a.code:null)),l("java.lang.InterruptedException","AutoFirma se ha cerrado o ha cerrado el websocket de comunicacion"))},g.onmessage=function(a){console.log("Procesado por defecto del mensaje")},g.onerror=function(a){console.log("Procesado por defecto del error")},g}function ze(f){re.onmessage=me,re.onerror=function(g){console.log("Error en la comunicacion por websocket: "+g),nt(re,Z,f-1)},nt(re,Z,f)}var me=function(f){console.log("Respuesta de la peticion de eco"),re.onmessage=function(g){console.log("Respuesta obtenida de la operacion enviada"),Pe(g.data)},re.send(ne)};function nt(f,g,a){if(a<=0){l("java.util.concurrent.TimeoutException","AutoFirma no respondio al saludo.");return}if(f.readyState===1)try{f.send("echo=-idsession="+g+"@EOF")}catch(r){console.log("Error en echo: "+r),setTimeout(nt,Ee.AUTOFIRMA_LAUNCHING_TIME,f,g,a-1)}else console.log("El socket aun no esta preparado"),setTimeout(nt,Ee.AUTOFIRMA_LAUNCHING_TIME,f,g,a-1)}function Pe(f){if(f==D||f==null||f=="CANCEL"){l("es.gob.afirma.core.AOCancelledOperationException","Operacion cancelada por el usuario");return}if(f=="MEMORY_ERROR"){l("es.gob.afirma.core.OutOfMemoryError","El fichero que se pretende firmar o guardar excede de la memoria disponible para aplicacion");return}if(f.length>4&&f.substr(0,4)=="SAF_"){l("java.lang.Exception",f);return}if(f=="NULL"){l("java.lang.Exception","Error desconocido");return}if(Q==Le)p(f);else if(Q==G)v(f,!1);else if(Q==ie)v(f,!0);else if(Q==xe)S(f);else if(Q==be)A(f);else if(Q==Oe)V(f);else if(Q==fe)M(f);else if(console.log("Operacion desconocida. Se devuelve directamente su resultado."),j){var g=j;ue(null,null),g(f)}else console.log("No se ha proporcionado funcion callback para procesar el resultado de la operacion")}function l(f,g){if(de=f,te=g,Ne){var a=Ne;ue(null,null),a(f,g)}}function v(f,g){if(f.indexOf(":")<=0){l("java.lang.Exception","Respuesta no valida");return}if(!j){console.log("No se ha proporcionado funcion callback para procesar el resultado del lote de firma");return}var a,r,m=f.split("|");if(g)for(a=new Array,r=new Array,i=0;i<m.length;i++){var c=m[i].indexOf(":");a.push(m[i].substring(0,c)),r.push(m[i].substring(c+1).replace(/\-/g,"+").replace(/\_/g,"/"))}else{var c=m[0].indexOf(":");a=m[0].substring(0,c),r=m[0].substring(c+1).replace(/\-/g,"+").replace(/\_/g,"/")}if(j){var k=j;ue(null,null),k(a,r)}else console.log("No se ha proporcionado funcion callback a la que notificar el resultado de la carga de datos")}function p(f){if(f=="OK"||f=="SAVE_OK")if(j){var g=j;ue(null,null),g(f)}else console.log("No se ha proporcionado funcion callback a la notificar el resultado");else l("java.lang.Exception","Error desconocido al procesar los datos")}function S(f){if(j){var g=j;ue(null,null),g(f.replace(/\-/g,"+").replace(/\_/g,"/"))}else console.log("No se ha proporcionado funcion callback para devolver el certificado seleccionado")}function A(f){if(j){var g,a=null,r=f.indexOf("|");r==-1?g=f:(g=f.substring(0,r).replace(/\-/g,"+").replace(/\_/g,"/"),a=f.substring(r+1).replace(/\-/g,"+").replace(/\_/g,"/"));try{g=Se.parseJSONData(g)}catch{}if(j){var m=j;ue(null,null),m(g,a)}else console.log("No se ha proporcionado funcion callback a la que devolver el resultado del lote")}else console.log("No se ha proporcionado funcion callback para procesar el resultado del lote de firma")}function V(f){if(!j){console.log("No se ha proporcionado funcion callback para procesar el log");return}var g=` === JAVASCRIPT INFORMATION === 
navigator.appCodeName: `+navigator.appCodeName+`
navigator.appName: `+navigator.appName+`
navigator.appVersion: `+navigator.appVersion+`
navigator.platform: `+navigator.platform+`
navigator.userAgent: `+navigator.userAgent+`
navigator.javaEnabled(): `+navigator.javaEnabled()+`
screen.width: `+(I.screen?screen.width:0)+`
screen.height: `+(I.screen?screen.height:0)+`

   === CLIENTE LOG === 
`+f;if(j){var a=j;ue(null,null),a(g)}else console.log("No se ha proporcionado funcion callback a la que devolver el log")}function M(f){if(!j){console.log("No se ha proporcionado funcion callback para procesar el resultado de la firma");return}var g,a=null,r=null,m=f.indexOf("|");if(m==-1)g=N.decode(f,!0).replace(/\-/g,"+").replace(/\_/g,"/");else{a=f.substring(0,m).replace(/\-/g,"+").replace(/\_/g,"/");var c=f.indexOf("|",m+1);c==-1?g=f.substring(m+1).replace(/\-/g,"+").replace(/\_/g,"/"):(g=f.substring(m+1,c).replace(/\-/g,"+").replace(/\_/g,"/"),r=N.decode(f.substring(c),!0))}if(j){var k=j;ue(null,null),k(g,a,r)}else console.log("No se ha proporcionado funcion callback a la que devolver la firma generada")}function b(f,g,a){var r=new Object;return r.key=f,r.value=g,r.avoidEncoding=!!a,r}function q(){return"Cliente JavaScript"}function T(){return te}function E(){return de}return{echo:q,setKeyStore:Ct,setPortRange:at,sign:wt,coSign:Tt,counterSign:At,signBatchJSON:Ot,signBatchXML:Et,selectCertificate:St,saveDataToFile:He,signAndSaveToFile:lt,getFileNameContentBase64:Dt,getMultiFileNameContentBase64:Pt,setStickySignatory:Lt,setLocale:Ft,getErrorMessage:T,getErrorType:E,getCurrentLog:we}},$n=function(I,D,y){var $="",X="",G="",ie,Le=1,be=500,Oe="https://127.0.0.1:",xe="",fe=0,te=!1,de=!1,re=!1,Q="",ne=ae.isInternetExplorer()?12e3:ae.isFirefox()?458752:1048576,P=!1,Z=null,W=null,j=null,Ne=null,st=null,it=null,at=function(a,r){st=a,it=r};function Ct(a){Z=a}function St(a,r,m){W=r,j=m,wt(a)}function wt(a){var r=new Object;r.op=p("op","selectcert"),r.properties=p("properties",a!=null?N.encode(a):null),r.keystore=p("keystore",Z??null),r.ksb64=p("ksb64",Z!=null?N.encode(Z):null),r.sticky=p("sticky",K),L&&(r.resetSticky=p("resetsticky",L)),De(ue(r))}function Tt(a,r,m,c,k,U){W=k,j=U,lt("sign",a,r,m,c)}function At(a,r,m,c,k,U){W=k,j=U,lt("cosign",a,r,m,c)}function rt(a,r,m,c,k,U){W=k,j=U,lt("countersign",a,r,m,c)}function lt(a,r,m,c,k){(r==y||r=="")&&(r=null),r!=null&&!gt(r)&&(r=r.replace(/\+/g,"-").replace(/\//g,"_"));var U=Ge(a,m,c,k,r,Z);De(ue(U))}function Et(a,r,m,c,k,U,z,Ae){W=z,j=Ae,Ot(a,r,m,c,k,U)}function Ot(a,r,m,c,k,U){(r==y||r=="")&&(r=null),r!=null&&!gt(r)&&(r=r.replace(/\+/g,"-").replace(/\//g,"_"));var z=Xe(a,m,c,k,U,r,Z);De(ue(z))}function Dt(a,r,m,c,k,U){W=k,j=U,we(a,r,m,c,!1)}function Pt(a,r,m,c,k,U){W=k,j=U,we(a,r,m,c,!0)}function we(a,r,m,c,k){(a==y||a=="")&&(a=null),a!=null&&(a=a.replace(/\+/g,"-").replace(/\//g,"_"));var U=He(Z,r,m,c,a,k);De(ue(U))}function He(a,r,m,c,k,U){var z=new Object;return z.op=p("op","batch"),z.keystore=p("keystore",a??null),z.ksb64=p("ksb64",a!=null?N.encode(a):null),z.batchpresignerurl=p("batchpresignerurl",r),z.batchpostsignerurl=p("batchpostsignerurl",m),z.properties=p("properties",c!=null?N.encode(c):null),z.dat=p("dat",k==""?null:k),z.needcert=p("needcert",!0),z.sticky=p("sticky",K),L&&(z.resetSticky=p("resetsticky",L)),U&&(z.jsonbatch=p("jsonbatch",!0)),_t&&(z.localBatchProcess=p("localBatchProcess",!0)),z}function ue(a){var r=[];Fe&&r.push(p("mcv",Fe));for(var m in a)r.push(a[m]);for(var c="afirma://"+encodeURIComponent(a.op.value)+"?",k=0;k<r.length;k++)r[k].value!=null&&r[k].value!="null"&&(c+=(k!=0?"&":"")+r[k].key+"="+encodeURIComponent(r[k].value));return c}function De(a){if(G==""){var r=Se.getRandomPorts(st,it);Ye(r),setTimeout(ut,Ee.AUTOFIRMA_LAUNCHING_TIME,r,a)}else P=!1,ct(G,a,Ee.AUTOFIRMA_CONNECTION_RETRIES)}function Ye(a){for(var r="",m=0;m<a.length;m++)r+=a[m],m<a.length-1&&(r+=",");ie=Se.generateNewIdSession();var c="afirma://service?ports="+r+"&v="+Le+"&jvc="+s+"&idsession="+ie;Ut(c)}function Ge(a,r,m,c,k,U){var z=new Object;return z.op=p("op",a),z.keystore=p("keystore",U??null),z.ksb64=p("ksb64",U!=null?N.encode(U):null),z.algorithm=p("algorithm",r),z.format=p("format",m),z.properties=p("properties",c!=null?N.encode(c):null),z.dat=p("dat",k==""?null:k),z.sticky=p("sticky",K),L&&(z.resetSticky=p("resetsticky",L)),z}function Xe(a,r,m,c,k,U,z){var Ae=new Object;return Ae.op=p("op","signandsave"),Ae.cryptoOp=p("cop",a),Ae.keystore=p("keystore",z??null),Ae.ksb64=p("ksb64",z!=null?N.encode(z):null),Ae.algorithm=p("algorithm",r),Ae.format=p("format",m),Ae.properties=p("properties",c!=null?N.encode(c):null),Ae.filename=p("filename",k),Ae.dat=p("dat",U==""?null:U),Ae.sticky=p("sticky",K),L&&(Ae.resetSticky=p("resetsticky",L)),Ae}function dt(a,r,m,c,k,U){var z=new Object;return z.op=p("op",a),z.title=p("title",r),z.extensions=p("exts",m),z.description=p("desc",c),z.filePath=p("filePath",k),z.multiload=p("multiload",U),z}function ut(a,r){P=!1;var m=new Object;m.locked=!1;for(var c=0;!P&&c<a.length;c++)ct(a[c],r,Ee.AUTOFIRMA_CONNECTION_RETRIES,m)}function ct(a,r,m,c){Ne=r;var k=Qe();k.open("POST",Oe+a+"/afirma",!0),k.setRequestHeader("Content-type","application/x-www-form-urlencoded"),k.onreadystatechange=function(){if(k.readyState==4&&k.status==200&&N.decode(k.responseText,!0)=="OK"&&!P)G=a,Q=Oe+G+"/afirma",P=!0,c&&(c.locked=!0),te=Ne.indexOf("afirma://selectcert")>-1,de=Ne.indexOf("afirma://save")>-1,re=Ne.indexOf("afirma://batch")>-1,Ne.indexOf("afirma://signandsave")>-1,Ie();else if((!c||!c.locked)&&!P&&k.readyState!=2&&k.readyState!=3)if(m--,G!=""&&m<Ee.AUTOFIRMA_CONNECTION_RETRIES/2)G="",c&&(c.locked=!0),m=Ee.AUTOFIRMA_CONNECTION_RETRIES,De(Ne);else if(m==0){(!c||!c.locked)&&(c&&(c.locked=!0),j("es.gob.afirma.standalone.ApplicationNotFoundException","No se ha podido conectar con AutoFirma."));return}else setTimeout(Te,Ee.AUTOFIRMA_LAUNCHING_TIME,a,m,c)},P||k.send("echo=-idsession="+ie+"@EOF")}function Te(a,r,m){ct(a,Ne,r,m)}function Ie(){var a=Ne;if(a.length>ne){ft(a,1,Math.ceil(a.length/ne));return}var r=Qe();r.open("POST",Q,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){if(r.status==404&&me("java.lang.IOException",r.responseText),de){r.readyState==4&&N.decode(r.responseText)!=""&&ze(N.decode(r.responseText));return}else if(r.readyState==4&&r.status==200&&r.responseText!=""){if(N.decode(r.responseText)=="MEMORY_ERROR"){me("java.lang.OutOfMemoryError","Problema de memoria en servidor");return}xe="",$e(1,N.decode(r.responseText,!0))}else r.responseText==""&&r.status==0&&r.readyState==0&&setTimeout(Ie,be)};try{r.onerror=function(m){m.target.status==0?me("java.lang.IOException","Se ha perdido la conexion con la aplicacion @firma "+m.target.statusText):me("java.lang.IOException","Ocurrio un error de red en la llamada al servicio de firma "+m.target.statusText)}}catch{}r.send("cmd="+N.encode(a,!0)+"idsession="+ie+"@EOF")}function ft(a,r,m){var c=Qe();c.open("POST",Q,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded");var k=a.substring((r-1)*ne,Math.min(ne*r,a.length));c.onreadystatechange=function(U){if(c.status==404){me("java.lang.Exception",c.responseText);return}c.readyState==4&&c.status==200&&c.responseText!=""?(fe++,N.decode(c.responseText,!0)=="MORE_DATA_NEED"?fe<m&&ft(a,r+1,m):N.decode(c.responseText,!0)=="OK"?fe==m&&(fe=0,yt()):N.decode(c.responseText)=="MEMORY_ERROR"&&ze(N.decode(c.responseText))):c.responseText==""&&c.status==0&&c.readyState==0&&setTimeout(ft,be,a,r,m)};try{c.onerror=function(U){U.target.status==0?me("java.lang.IOException","Se ha perdido la conexion con la aplicacion @firma "+U.target.statusText):me("java.lang.IOException","Ocurrio un error de red en la llamada al servicio de firma "+U.target.statusText)}}catch{}c.send("fragment=@"+r+"@"+m+"@"+N.encode(k,!0)+"idsession="+ie+"@EOF")}function yt(){httpRequest=Qe(),httpRequest.open("POST",Q,!0),httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded"),httpRequest.onreadystatechange=function(){if(httpRequest.status==404&&me("java.lang.Exception",httpRequest.responseText),de){httpRequest.readyState==4&&N.decode(httpRequest.responseText)!=""&&ze(N.decode(httpRequest.responseText));return}else httpRequest.readyState==4&&httpRequest.status==200&&httpRequest.responseText!=""?(N.decode(httpRequest.responseText)=="MEMORY_ERROR"&&ze(N.decode(httpRequest.responseText)),xe="",$e(1,N.decode(httpRequest.responseText,!0))):httpRequest.status==0&&httpRequest.readyState==0&&setTimeout(yt,be)};try{httpRequest.onerror=function(a){a.target.status==0?me("java.lang.IOException","Se ha perdido la conexion con la aplicacion @firma "+a.target.statusText):me("java.lang.IOException","Ocurrio un error de red en la llamada al servicio de firma "+a.target.statusText)}}catch{}httpRequest.send("firm=idsession="+ie+"@EOF")}function $e(a,r){httpRequest=Qe(),httpRequest.open("POST",Q,!0),httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded"),httpRequest.onreadystatechange=function(){if(httpRequest.readyState==4&&httpRequest.status==200&&httpRequest.responseText!=""){if(N.decode(httpRequest.responseText)=="MEMORY_ERROR"){me("java.lang.OutOfMemoryError","Problema de memoria en servidor");return}xe+=N.decode(httpRequest.responseText,!0),a==r?(re?(nt(xe),re=!1):te?(Rt(xe),te=!1):ze(xe),xe=""):$e(a+1,r)}else httpRequest.responseText==""&&httpRequest.status==0&&httpRequest.readyState==0&&setTimeout($e,be,a,r)};try{httpRequest.onerror=function(m){m.target.status==0?me("java.lang.IOException","Se ha perdido la conexion con la aplicacion @firma "+m.target.statusText):me("java.lang.IOException","Ocurrio un error de red en la llamada al servicio de firma "+m.target.statusText)}}catch{}a<=r&&httpRequest.send("send=@"+a+"@"+r+"idsession="+ie+"@EOF")}function Rt(a){if(a==y||a==null||a=="CANCEL"){j("es.gob.afirma.core.AOCancelledOperationException","Operacion cancelada por el usuario");return}if(a.length>4&&a.substr(0,4)=="SAF_"){j("java.lang.Exception",a);return}if(a=="NULL"){j("java.lang.Exception","Error desconocido");return}W(a.replace(/\-/g,"+").replace(/\_/g,"/"))}function ze(a){if(a==y||a==null||a=="CANCEL"){j("es.gob.afirma.core.AOCancelledOperationException","Operacion cancelada por el usuario");return}if(a=="OK"){try{a=Se.parseJSONData(a)}catch{}W(a,null);return}if(a=="MEMORY_ERROR"){j("es.gob.afirma.core.OutOfMemoryError","El fichero que se pretende firmar o guardar excede de la memoria disponible para aplicacion");return}if(a.length>4&&a.substr(0,4)=="SAF_"){j("java.lang.Exception",a);return}if(a=="NULL"){j("java.lang.Exception","Error desconocido");return}if(a=="SAVE_OK"){W&&W(a);return}if(a.length>150&&a.substr(0,150).indexOf("<log>")!=-1){var r=` === JAVASCRIPT INFORMATION === 
navigator.appCodeName: `+navigator.appCodeName+`
navigator.appName: `+navigator.appName+`
navigator.appVersion: `+navigator.appVersion+`
navigator.platform: `+navigator.platform+`
navigator.userAgent: `+navigator.userAgent+`
navigator.javaEnabled(): `+navigator.javaEnabled()+`
screen.width: `+(D.screen?screen.width:0)+`
screen.height: `+(D.screen?screen.height:0)+`

   === CLIENTE LOG === 
`+a;W(r);return}if(a.indexOf(":")>0){var m=a.split("|");if(m.length==1){var Je=m[0].indexOf(":"),c=m[0];Je==-1?fileName=N.decode(c,!0):(fileName=c.substring(0,Je),dataB64=c.substring(Je+1).replace(/\-/g,"+").replace(/\_/g,"/")),W(fileName,dataB64);return}else if(m.length>1){var k=new Array,U=new Array;for(i=0;i<m.length;i++){var Je=m[i].indexOf(":");Je==-1?(k.push(m[i]),U.push("")):(k.push(m[i].substring(0,Je)),U.push(m[i].substring(Je+1).replace(/\-/g,"+").replace(/\_/g,"/")))}}W(k,U);return}var z,Ae=null,Je=a.indexOf("|");Je==-1?z=N.decode(a,!0).replace(/\-/g,"+").replace(/\_/g,"/"):(Ae=a.substring(0,Je).replace(/\-/g,"+").replace(/\_/g,"/"),z=a.substring(Je+1).replace(/\-/g,"+").replace(/\_/g,"/")),W(z,Ae)}function me(a,r){j&&j(a,r)}function nt(a){if(a==y||a==null||a=="CANCEL"){j("es.gob.afirma.core.AOCancelledOperationException","Operacion cancelada por el usuario");return}if(a.length>4&&a.substr(0,4)=="SAF_"){j("java.lang.Exception",a);return}if(a=="NULL"){j("java.lang.Exception","Error desconocido");return}var r,m=null,c=a.indexOf("|");c==-1?r=a:(r=a.substring(0,c).replace(/\-/g,"+").replace(/\_/g,"/"),m=a.substring(c+1).replace(/\-/g,"+").replace(/\_/g,"/"));try{r=Se.parseJSONData(r)}catch{}W(r,m)}function Pe(a,r,m,c,k,U,z){W=U,j=z,l(a,r,m,c,k)}function l(a,r,m,c,k){(a==y||a=="")&&(a=null),a!=null&&!gt(a)&&(a=a.replace(/\+/g,"-").replace(/\//g,"_"));var U=v(a,r,m,c,k);De(ue(U))}function v(a,r,m,c,k){var U=new Object;return U.op=p("op","save"),U.title=p("title",r),U.filename=p("filename",m),U.extension=p("exts",c),U.description=p("desc",k),U.dat=p("dat",a==""?null:a),U}function p(a,r){var m=new Object;return m.key=a,m.value=r,m}function S(a,r){return a!=null?N.encode(a):null}function A(a,r){return a!=null?N.decode(a):null}function V(a,r,m,c,k,U){W=k,j=U,q("load",a,r,m,c,!1)}function M(a,r,m,c,k,U){W=k,j=U,q("load",a,r,m,c,!0)}function b(a,r){W=a,j=r,T()}function q(a,r,m,c,k,U){var z=dt(a,r,m,c,k,U);De(ue(z))}function T(){var a=dt("getLog");De(ue(a))}function E(){return"Cliente JavaScript"}function f(){return $}function g(){return X}return{echo:E,checkTime:qt,setKeyStore:Ct,setPortRange:at,sign:Tt,coSign:At,counterSign:rt,signBatchJSON:Pt,signBatchXML:Dt,selectCertificate:St,saveDataToFile:Pe,signAndSaveToFile:Et,getFileNameContentBase64:V,getMultiFileNameContentBase64:M,getBase64FromText:S,getTextFromBase64:A,setStickySignatory:Lt,setLocale:Ft,getErrorMessage:f,getErrorType:g,getCurrentLog:b}},Gt=function(I,D,y){var $=2e3,X=3,G=ae.isAndroid()||ae.isIOS()?4e3:3e3,ie=ae.isAndroid()||ae.isIOS()?15:10,Le=!0,be="batch",Oe="certificate",xe="sign",fe=xe,te,de="",re="",Q=null,ne=null,P=null;if(I!=y&&I!=null)if(I.indexOf("://")!=-1&&I.indexOf("/",I.indexOf("://")+3)!=-1){var Z=I.substring(0,I.indexOf("/",I.indexOf("://")+3));ne=Z+"/afirma-signature-retriever/RetrieveService",P=Z+"/afirma-signature-storage/StorageService"}else ne=I+"/afirma-signature-retriever/RetrieveService",P=I+"/afirma-signature-storage/StorageService";function W(l){Q=l}function j(l,v,p){fe=Oe;var S=Se.generateNewIdSession(),A=ue(),V="selectcert";K&&!L&&te&&(l=Ie(te,l));var M=0,b=new Array;b[M++]={key:"ver",value:X},b[M++]={key:"op",value:V},S!=null&&S!=y&&(b[M++]={key:"id",value:S}),A!=null&&A!=y&&(b[M++]={key:"key",value:A}),Q!=null&&Q!=y&&(b[M++]={key:"keystore",value:Q},b[M++]={key:"ksb64",value:N.encode(Q)}),P!=null&&P!=y&&(b[M++]={key:"stservlet",value:P}),l!=null&&l!=y&&(b[M++]={key:"properties",value:N.encode(l)}),!ae.isAndroid()&&!ae.isIOS()&&(b[M++]={key:"aw",value:"true"});var q=Xe(V,b);if(He(q)){if(P==null||P==y){we("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}else if(ne==null||ne==y){we("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para la recuperacion de datos");return}Ye(S,A,P,ne,V,b,v,p)}else Ge(q,S,A,v,p)}function Ne(l,v,p,S,A,V){at("sign",l,v,p,S,A,V)}function st(l,v,p,S,A,V){at("cosign",l,v,p,S,A,V)}function it(l,v,p,S,A,V){at("countersign",l,v,p,S,A,V)}function at(l,v,p,S,A,V,M){fe=xe,(v==y||v=="")&&(v=null),v!=null&&!gt(v)&&(v=v.replace(/\+/g,"-").replace(/\//g,"_"),v=v.replace(/\n/g,"").replace(/\r/g,"")),K&&!L&&te&&(A=Ie(te,A));var b=Se.generateNewIdSession(),q=ue(),T=0,E=new Array;E[T++]={key:"ver",value:X},l!=null&&l!=y&&(E[T++]={key:"op",value:l}),b!=null&&b!=y&&(E[T++]={key:"id",value:b}),q!=null&&q!=y&&(E[T++]={key:"key",value:q}),Q!=null&&Q!=y&&(E[T++]={key:"keystore",value:Q},E[T++]={key:"ksb64",value:N.encode(Q)}),P!=null&&P!=y&&(E[T++]={key:"stservlet",value:P}),S!=null&&S!=y&&(E[T++]={key:"format",value:S}),p!=null&&p!=y&&(E[T++]={key:"algorithm",value:p}),A!=null&&A!=y&&(E[T++]={key:"properties",value:N.encode(A)}),!ae.isAndroid()&&!ae.isIOS()&&(E[T++]={key:"aw",value:"true"}),v!=null&&(E[T++]={key:"dat",value:v});var f=Xe(l,E);if(He(f)){if(P==null||P==y){we("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}Ye(b,q,P,ne,l,E,V,M)}else Ge(f,b,q,V,M)}function Ct(l,v,p,S,A,V,M,b){fe=xe,(v==y||v=="")&&(v=null),v!=null&&!gt(v)&&(v=v.replace(/\+/g,"-").replace(/\//g,"_"),v=v.replace(/\n/g,"").replace(/\r/g,"")),K&&!L&&te&&(A=Ie(te,A));var q=Se.generateNewIdSession(),T=ue(),E=0,f="signandsave",g=new Array;g[E++]={key:"ver",value:X},g[E++]={key:"op",value:f},l!=null&&l!=y&&(g[E++]={key:"cop",value:l}),q!=null&&q!=y&&(g[E++]={key:"id",value:q}),T!=null&&T!=y&&(g[E++]={key:"key",value:T}),Q!=null&&Q!=y&&(g[E++]={key:"keystore",value:Q},g[E++]={key:"ksb64",value:N.encode(Q)}),P!=null&&P!=y&&(g[E++]={key:"stservlet",value:P}),S!=null&&S!=y&&(g[E++]={key:"format",value:S}),p!=null&&p!=y&&(g[E++]={key:"algorithm",value:p}),A!=null&&A!=y&&(g[E++]={key:"properties",value:N.encode(A)}),V!=null&&V!=y&&(g[E++]={key:"filename",value:V}),!ae.isAndroid()&&!ae.isIOS()&&(g[E++]={key:"aw",value:"true"}),v!=null&&(g[E++]={key:"dat",value:v});var a=Xe(f,g);if(He(a)){if(P==null||P==y){we("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}Ye(q,T,P,ne,f,g,M,b)}else Ge(a,q,T,M,b)}function St(l,v,p,S,A,V){fe=be,(l==y||l=="")&&(l=null),l!=null&&!gt(l)&&(l=l.replace(/\+/g,"-").replace(/\//g,"_"),l=l.replace(/\n/g,"").replace(/\r/g,"")),K&&!L&&te&&(S=Ie(te,S));var M=Se.generateNewIdSession(),b=ue(),q="batch",T=0,E=new Array;E[T++]={key:"ver",value:X},E[T++]={key:"op",value:q},M!=null&&M!=y&&(E[T++]={key:"id",value:M}),b!=null&&b!=y&&(E[T++]={key:"key",value:b}),Q!=null&&Q!=y&&(E[T++]={key:"keystore",value:Q},E[T++]={key:"ksb64",value:N.encode(Q)}),P!=null&&P!=y&&(E[T++]={key:"stservlet",value:P}),v!=null&&v!=y&&(E[T++]={key:"batchpresignerurl",value:v}),p!=null&&p!=y&&(E[T++]={key:"batchpostsignerurl",value:p}),S!=null&&S!=y&&(E[T++]={key:"properties",value:N.encode(S)}),!ae.isAndroid()&&!ae.isIOS()&&(E[T++]={key:"aw",value:"true"}),E[T++]={key:"needcert",value:"true"},l!=null&&(E[T++]={key:"dat",value:l});var f=Xe(q,E);if(He(f)){if(P==null||P==y){we("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}Ye(M,b,P,ne,q,E,A,V)}else Ge(f,M,b,A,V)}function wt(l,v,p,S,A,V){fe=be,K&&!L&&te&&(S=Ie(te,S));var M=Se.generateNewIdSession(),b=ue(),q="batch",T=0,E=new Array;E[T++]={key:"ver",value:X},E[T++]={key:"op",value:q},M!=null&&M!=y&&(E[T++]={key:"id",value:M}),b!=null&&b!=y&&(E[T++]={key:"key",value:b}),Q!=null&&Q!=y&&(E[T++]={key:"keystore",value:Q},E[T++]={key:"ksb64",value:N.encode(Q)}),P!=null&&P!=y&&(E[T++]={key:"stservlet",value:P}),v!=null&&v!=y&&(E[T++]={key:"batchpresignerurl",value:v}),p!=null&&p!=y&&(E[T++]={key:"batchpostsignerurl",value:p}),S!=null&&S!=y&&(E[T++]={key:"properties",value:N.encode(S)}),!ae.isAndroid()&&!ae.isIOS()&&(E[T++]={key:"aw",value:!0}),_t&&(E[T++]={key:"localBatchProcess",value:!0}),E[T++]={key:"needcert",value:!0},E[T++]={key:"jsonbatch",value:!0},E[T++]={key:"dat",value:l};var f=Xe(q,E);if(He(f)){if(P==null||P==y){we("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}Ye(M,b,P,ne,q,E,A,V)}else Ge(f,M,b,A,V)}function Tt(l,v,p,S,A,V,M){l!=y&&l!=null&&l!=""&&(l=l.replace(/\+/g,"-").replace(/\//g,"_"));var b=Se.generateNewIdSession(),q=ue(),T=0,E="save",f=new Array;f[T++]={key:"ver",value:X},f[T++]={key:"op",value:E},b!=null&&b!=y&&(f[T++]={key:"id",value:b}),q!=null&&q!=y&&(f[T++]={key:"key",value:q}),P!=null&&P!=y&&(f[T++]={key:"stservlet",value:P}),v!=null&&v!=y&&(f[T++]={key:"title",value:v}),p!=null&&p!=y&&(f[T++]={key:"filename",value:p}),S!=null&&S!=y&&(f[T++]={key:"extension",value:S}),A!=null&&A!=y&&(f[T++]={key:"description",value:A}),!ae.isAndroid()&&!ae.isIOS()&&(f[T++]={key:"aw",value:"true"}),l!=null&&l!=y&&l!=""&&(f[T++]={key:"dat",value:l});var g=Xe(E,f);if(He(g)){if(P==null||P==y){we("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}Ye(b,q,P,ne,E,f,V,M)}else Ge(g,b,q,V,M)}function At(l,v,p,S,A,V){var M="java.lang.UnsupportedOperationException",b="La operacion de carga de fichero no esta disponible por servidor intermedio";V?V(M,b):we(M,b)}function rt(l,v,p,S,A,V){var M="java.lang.UnsupportedOperationException",b="La operacion de carga de multiples ficheros no esta disponible por servidor intermedio";V?V(M,b):we(M,b)}function lt(){return"Cliente JavaScript"}function Et(){return de}function Ot(){return re}function Dt(l,v){var p="java.lang.UnsupportedOperationException",S="La operacion de obtencion del log no esta disponible por servidor intermedio";v?v(p,S):we(p,S)}function Pt(l,v){P=l,ne=v}function we(l,v){throw re=l,de=v,new Error}function He(l){return l.length>$}function ue(){var l;if(typeof D.crypto<"u"&&typeof D.crypto.getRandomValues<"u"){var v=new Uint32Array(1);D.crypto.getRandomValues(v),l=De(v[0]%1e8,8)}else l=De(Math.floor((Se.getRandom()+1)%1e8),8);return l}function De(l,v){return v-=l.toString().length,v>0?new Array(v+(/\./.test(l)?2:1)).join("0")+l:l+""}function Ye(l,v,p,S,A,V,M,b){var q=Se.generateNewIdSession(),T=Qe();T||we("java.lang.Exception","Su navegador no permite preprocesar los datos que desea tratar"),T.open("POST",p,!0),T.setRequestHeader("Content-type","application/x-www-form-urlencoded"),T.onreadystatechange=function(){if(T.readyState==4)if(T.status==200){var f=ut(A,q,S,v);if(He(f)){b("java.lang.IllegalArgumentException","La URL de invocacion al servicio de firma es demasiado larga.");return}Ge(f,l,v,M,b)}else console.log("Error al enviar los datos al servidor intermedio. HTTP Status: "+T.status),b("java.lang.IOException","Ocurrio un error al enviar los datos a la aplicacion nativa")};try{T.onerror=function(f){console.log("Error al enviar los datos al servidor intermedio (HTTP Status: "+T.status+"): "+f.message),b("java.lang.IOException","Ocurrio un error al enviar los datos al servicio intermedio para la comunicacion con la aplicacion nativa")}}catch{}Fe&&(V[V.length]={key:"mcv",value:Fe});var E="op=put&v=1_0&id="+q+"&dat="+nt(dt(A,V),v);try{T.send(E)}catch{b("java.lang.IOException","No se pudo conectar con el servidor remoto")}}function Ge(l,v,p,S,A){Le=!1,Ut(l),v&&(S||A)&&Rt(v,ne,p,l,S,A)}function Xe(l,v){var p="jvc="+s;if(Fe&&(p+="&mcv="+encodeURIComponent(Fe)),v!=null&&v!=y)for(var S=0;S<v.length;S++)v[S].value!=null&&v[S].value!="null"&&(p+="&"+v[S].key+"="+encodeURIComponent(v[S].value));var A;return ae.isChrome()&&ae.isAndroid()?A="intent://"+l+"?"+p+"#Intent;scheme=afirma;package=es.gob.afirma;end":A="afirma://"+l+"?"+p,A}function dt(l,v){l=l??"op";var p="<"+l+">";if(v!=null)for(var S=0;S<v.length;S++)p+='<e k="'+v[S].key+'" v="'+v[S].value+'"/>';return N.encode(p+"</"+l+">")}function ut(l,v,p,S){var A=0,V=new Array;return V[A++]={key:"fileid",value:v},(p!=null||p!=y)&&(V[A++]={key:"rtservlet",value:p}),(S!=null||S!=y)&&(V[A++]={key:"key",value:S}),Xe(l,V)}function ct(l,v,p,S){if(l.substr(0,6).toLowerCase()=="err-06")return!0;if(l.substr(0,5).toLowerCase()=="#wait")return"reset";if(l.substr(0,4).toLowerCase()=="err-"&&l.indexOf(":=")!=-1)return de=l.substring(l.indexOf(":=")+2),l.substr(0,7).toLowerCase()=="err-11:"?re="es.gob.afirma.core.AOCancelledOperationException":re="java.lang.Exception",S(re,de),!1;if(l=="CANCEL"||l==`CANCEL\r
`)return S("es.gob.afirma.core.AOCancelledOperationException","Operacion cancelada por el usuario"),!1;if(l=="OK"||l==`OK\r
`)return p(),!1;if(l.length>4&&l.substr(0,4)=="SAF_")return S("java.lang.Exception",l),!1;if(fe==be){var A,M=null,q=l.indexOf("|");q==-1?v!=y&&v!=null?A=me(l,v):A=Pe(l):(v!=y&&v!=null?(A=me(l.substring(0,q),v,!0),M=me(l.substring(q+1),v)):(A=Pe(l.substring(0,q)),M=Pe(l.substring(q+1))),K?M&&(te=M):te=null);try{A=Se.parseJSONData(A)}catch{}return p(A,M),!1}else if(fe==Oe){var M;return v!=y&&v!=null?M=me(l,v):M=Pe(l),te=K?M:null,p(M),!1}var V,M=null,b=null,q=l.indexOf("|");if(q==-1)v!=y&&v!=null?V=me(l,v):V=Pe(l);else{var T=l.indexOf("|",q+1);T==-1?v!=y&&v!=null?(M=me(l.substring(0,q),v,!0),V=me(l.substring(q+1),v)):(M=Pe(l.substring(0,q)),V=Pe(l.substring(q+1))):v!=y&&v!=null?(M=me(l.substring(0,q),v,!0),V=me(l.substring(q+1,T),v,!0),b=N.decode(me(l.substring(T+1),v))):(M=Pe(l.substring(0,q)),V=Pe(l.substring(q+1)),b=N.decode(Pe(l.substring(T+1))))}return K?M&&(te=M):te=null,p(V,M,b),!1}function Te(l,v,p){re=l!=null&&l.length>0?l:"java.lang.Exception",de=v!=null&&v.length>0?v:"No se ha podido extablecer la comunicación entre la aplicación de firma y la página web",p!=y&&p!=null&&p(re,de)}function Ie(l,v){for(var p=yt(v,`
`),S=[],A=0;A<p.length;A++)p[A]&&!ft(p[A])&&S.push(p[A]);S.push("filters=encodedcert:"+l),S.push("headless=true");var V="";if(S.length>0){V=S[0];for(var A=1;A<S.length;A++)V+=`
`+S[A]}return V}function ft(l){return l.indexOf("filters=")==0||l.indexOf("filter=")==0||l.indexOf("filters.")==0||l.indexOf("headless=")==0}function yt(l,v){var p=[];if(l){for(var S=0,A;(A=l.indexOf(v,S))!=-1;)p.push(l.substring(S,A)),S=A+1;p.push(l.substring(S))}return p}var $e=0;function Rt(l,v,p,S,A,V){var M=Qe();M||we("java.lang.Exception","Su navegador no permite obtener el resulado de la operación"),$e=0,setTimeout(ze,G,M,v,"op=get&v=1_0&id="+l+"&it=0",p,S,l,A,V)}function ze(l,v,p,S,A,V,M,b){if(Le){Te("es.gob.afirma.standalone.ApplicationNotFoundException","AutoFirma no se encuentra instalado en el sistema.",b);return}if($e>ie){Te("java.util.concurrent.TimeoutException","El tiempo para la recepcion de la firma por la pagina web ha expirado",b);return}$e++,l.onreadystatechange=function(){if(l.readyState==4)if(l.status==200){var q=ct(l.responseText,S,M,b);if(q){var T=$e-1;q=="reset"&&($e=0),setTimeout(ze,G,l,v,p.replace("&it="+T,"&it="+$e),S,A,V,M,b)}}else Te("java.lang.Exception","No se pudo conectar con el servidor intermedio para la recuperacion del resultado de la operacion (Status: "+l.status+")",b)};try{l.onerror=function(){Te("java.lang.Exception","No se pudo conectar con el servidor intermedio para la recuperacion del resultado de la operacion (Status: "+l.status+")",b)}}catch{}l.open("POST",v,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded");try{l.send(p)}catch{Te("java.lang.IOException","Ocurrio un error de red en la llamada al servicio de firma",b);return}}function me(l,v,p){var S=l.indexOf("."),A=l.substr(0,S),V=Ze.des(v,Ze.base64ToString(Pe(l.substr(S+1))),0,0,null);return Ze.stringToBase64(V.substr(0,V.length-parseInt(A)-(p?0:8)))}function nt(l,v){var p=Ze.base64ToString(Pe(l)),S=(8-p.length%8)%8;return S+"."+Ze.stringToBase64(Ze.des(v,p,1,0,null)).replace(/\+/g,"-").replace(/\//g,"_")}function Pe(l){return l&&l.replace(/\-/g,"+").replace(/\_/g,"/")}return{echo:lt,setKeyStore:W,sign:Ne,coSign:st,counterSign:it,signBatchJSON:wt,signBatchXML:St,selectCertificate:j,saveDataToFile:Tt,signAndSaveToFile:Ct,getFileNameContentBase64:At,getMultiFileNameContentBase64:rt,setServlets:Pt,setStickySignatory:Lt,setLocale:Ft,getErrorMessage:Et,getErrorType:Ot,getCurrentLog:Dt}};return{VERSION:e,CHECKTIME_NO:Ue,CHECKTIME_RECOMMENDED:xt,CHECKTIME_OBLIGATORY:It,JAVA_ARGUMENTS:x,SYSTEM_PROPERTIES:h,setForceAFirma:un,cargarMiniApplet:Ht,echo:Pn,setJnlpService:cn,isJNLP:dn,needNativeAppInstalled:ln,KEYSTORE_WINDOWS:Ke,KEYSTORE_APPLE:Be,KEYSTORE_PKCS12:J,KEYSTORE_PKCS11:qe,KEYSTORE_MOZILLA:Ce,KEYSTORE_SHARED_NSS:ee,KEYSTORE_JAVA:O,KEYSTORE_JCEKS:We,KEYSTORE_JAVACE:se,KEYSTORE_DNIE:oe,AUTOFIRMA_LAUNCHING_TIME:Mt,AUTOFIRMA_CONNECTION_RETRIES:kt,cargarAppAfirma:Ht,sign:pn,coSign:gn,cosign:vn,counterSign:yn,createBatch:In,addDocumentToBatch:kn,setLocalBatchProcess:Cn,signBatchProcess:Sn,signBatch:xn,selectCertificate:hn,signAndSaveToFile:bn,getCurrentLog:Dn,saveDataToFile:An,getFileNameContentBase64:En,getMultiFileNameContentBase64:On,checkTime:qt,setKeyStore:mn,setForceWSMode:an,setServlets:_n,setPortRange:Ln,setStickySignatory:Lt,setLocale:Ft,setMinimumClientVersion:rn,getErrorMessage:Rn,getErrorType:Mn,getBase64FromText:wn,getTextFromBase64:Tn,downloadRemoteData:sn,isAndroid:ae.isAndroid,isIOS:ae.isIOS}}(window,void 0),N={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_keyStr_URL_SAFE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",encode:function(t,n){var e=n==!0?this._keyStr_URL_SAFE:this._keyStr,s="",x,h,w,Y,F,C,K,L=0;for(t=N._utf8_encode(t);L<t.length;)x=t.charCodeAt(L++),h=t.charCodeAt(L++),w=t.charCodeAt(L++),Y=x>>2,F=(x&3)<<4|h>>4,C=(h&15)<<2|w>>6,K=w&63,isNaN(h)?C=K=64:isNaN(w)&&(K=64),s=s+e.charAt(Y)+e.charAt(F)+e.charAt(C)+e.charAt(K);return s},encodeArrayBuffer:function(t,n){for(var e=new Uint8Array(t),s=e.length,x=new Array(s);s--;)x[s]=String.fromCharCode(e[s]);return n?window.btoa(x.join("")).replace("+","-").replace("/","_"):window.btoa(x.join(""))},encodeByteArray:function(t,n){for(var e=n==!0?this._keyStr_URL_SAFE:this._keyStr,s=[],x=0;x<t.length;x+=3){var h=t[x],w=x+1<t.length,Y=w?t[x+1]:0,F=x+2<t.length,C=F?t[x+2]:0,K=h>>2,L=(h&3)<<4|Y>>4,le=(Y&15)<<2|C>>6,u=C&63;F||(u=64,w||(le=64)),s.push(e.charAt(K),e.charAt(L),e.charAt(le),e.charAt(u))}return s.join("")},decode:function(t,n){var e=n==!0?this._keyStr_URL_SAFE:this._keyStr,s="",x,h,w,Y,F,C,K,L=0;for(t=n==!0?t.replace(/[^A-Za-z0-9\-\_\=]/g,""):t.replace(/[^A-Za-z0-9\+\/\=]/g,"");L<t.length;)Y=e.indexOf(t.charAt(L++)),F=e.indexOf(t.charAt(L++)),C=e.indexOf(t.charAt(L++)),K=e.indexOf(t.charAt(L++)),x=Y<<2|F>>4,h=(F&15)<<4|C>>2,w=(C&3)<<6|K,s=s+String.fromCharCode(x),C!=64&&(s=s+String.fromCharCode(h)),K!=64&&(s=s+String.fromCharCode(w));return s=N._utf8_decode(s),s},_utf8_encode:function(t){t=t.replace(/\r\n/g,`
`);for(var n="",e=0;e<t.length;e++){var s=t.charCodeAt(e);s<128?n+=String.fromCharCode(s):s>127&&s<2048?(n+=String.fromCharCode(s>>6|192),n+=String.fromCharCode(s&63|128)):(n+=String.fromCharCode(s>>12|224),n+=String.fromCharCode(s>>6&63|128),n+=String.fromCharCode(s&63|128))}return n},_utf8_decode:function(t){for(var n="",e=0,s=0,x=0;e<t.length;)if(s=t.charCodeAt(e),s<128)n+=String.fromCharCode(s),e++;else if(s>191&&s<224)x=t.charCodeAt(e+1),n+=String.fromCharCode((s&31)<<6|x&63),e+=2;else{x=t.charCodeAt(e+1);var h=t.charCodeAt(e+2);n+=String.fromCharCode((s&15)<<12|(x&63)<<6|h&63),e+=3}return n}},Ze={tableStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tableStr_URL_SAFE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",des:function(t,n,e,s,x,h){var w=new Array(16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756),Y=new Array(-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344),F=new Array(520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584),C=new Array(8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928),K=new Array(256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080),L=new Array(536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312),le=new Array(2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154),u=new Array(268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696),ce=Ze.des_createKeys(t),pe=0,Ke,Be,J,qe,Ce,ee,O,We,se,oe,Ue,xt,It,Mt,kt=n.length,pt=0,je=ce.length==32?3:9;je==3?We=e?new Array(0,32,2):new Array(30,-2,-2):We=e?new Array(0,32,2,62,30,-2,64,96,2):new Array(94,62,-2,32,64,2,30,-2,-2),h==2?n+="        ":h==1?(J=8-kt%8,n+=String.fromCharCode(J,J,J,J,J,J,J,J),J==8&&(kt+=8)):h||(n+="\0\0\0\0\0\0\0\0");var ot="",Fe="";for(s==1&&(se=x.charCodeAt(pe++)<<24|x.charCodeAt(pe++)<<16|x.charCodeAt(pe++)<<8|x.charCodeAt(pe++),Ue=x.charCodeAt(pe++)<<24|x.charCodeAt(pe++)<<16|x.charCodeAt(pe++)<<8|x.charCodeAt(pe++),pe=0);pe<kt;){for(ee=n.charCodeAt(pe++)<<24|n.charCodeAt(pe++)<<16|n.charCodeAt(pe++)<<8|n.charCodeAt(pe++),O=n.charCodeAt(pe++)<<24|n.charCodeAt(pe++)<<16|n.charCodeAt(pe++)<<8|n.charCodeAt(pe++),s==1&&(e?(ee^=se,O^=Ue):(oe=se,xt=Ue,se=ee,Ue=O)),J=(ee>>>4^O)&252645135,O^=J,ee^=J<<4,J=(ee>>>16^O)&65535,O^=J,ee^=J<<16,J=(O>>>2^ee)&858993459,ee^=J,O^=J<<2,J=(O>>>8^ee)&16711935,ee^=J,O^=J<<8,J=(ee>>>1^O)&1431655765,O^=J,ee^=J<<1,ee=ee<<1|ee>>>31,O=O<<1|O>>>31,Be=0;Be<je;Be+=3){for(It=We[Be+1],Mt=We[Be+2],Ke=We[Be];Ke!=It;Ke+=Mt)qe=O^ce[Ke],Ce=(O>>>4|O<<28)^ce[Ke+1],J=ee,ee=O,O=J^(Y[qe>>>24&63]|C[qe>>>16&63]|L[qe>>>8&63]|u[qe&63]|w[Ce>>>24&63]|F[Ce>>>16&63]|K[Ce>>>8&63]|le[Ce&63]);J=ee,ee=O,O=J}ee=ee>>>1|ee<<31,O=O>>>1|O<<31,J=(ee>>>1^O)&1431655765,O^=J,ee^=J<<1,J=(O>>>8^ee)&16711935,ee^=J,O^=J<<8,J=(O>>>2^ee)&858993459,ee^=J,O^=J<<2,J=(ee>>>16^O)&65535,O^=J,ee^=J<<16,J=(ee>>>4^O)&252645135,O^=J,ee^=J<<4,s==1&&(e?(se=ee,Ue=O):(ee^=oe,O^=xt)),Fe+=String.fromCharCode(ee>>>24,ee>>>16&255,ee>>>8&255,ee&255,O>>>24,O>>>16&255,O>>>8&255,O&255),pt+=8,pt==512&&(ot+=Fe,Fe="",pt=0)}return ot+Fe},des_createKeys:function(t){for(var n=new Array(0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964),e=new Array(0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697),s=new Array(0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272),x=new Array(0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144),h=new Array(0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256),w=new Array(0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488),Y=new Array(0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746),F=new Array(0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568),C=new Array(0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578),K=new Array(0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488),L=new Array(0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800),le=new Array(0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744),u=new Array(0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128),ce=new Array(0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261),pe=t.length>8?3:1,Ke=new Array(32*pe),Be=new Array(0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0),J,qe,Ce=0,ee=0,O,We=0;We<pe;We++){var se=t.charCodeAt(Ce++)<<24|t.charCodeAt(Ce++)<<16|t.charCodeAt(Ce++)<<8|t.charCodeAt(Ce++),oe=t.charCodeAt(Ce++)<<24|t.charCodeAt(Ce++)<<16|t.charCodeAt(Ce++)<<8|t.charCodeAt(Ce++);O=(se>>>4^oe)&252645135,oe^=O,se^=O<<4,O=(oe>>>-16^se)&65535,se^=O,oe^=O<<-16,O=(se>>>2^oe)&858993459,oe^=O,se^=O<<2,O=(oe>>>-16^se)&65535,se^=O,oe^=O<<-16,O=(se>>>1^oe)&1431655765,oe^=O,se^=O<<1,O=(oe>>>8^se)&16711935,se^=O,oe^=O<<8,O=(se>>>1^oe)&1431655765,oe^=O,se^=O<<1,O=se<<8|oe>>>20&240,se=oe<<24|oe<<8&16711680|oe>>>8&65280|oe>>>24&240,oe=O;for(var Ue=0;Ue<Be.length;Ue++)Be[Ue]?(se=se<<2|se>>>26,oe=oe<<2|oe>>>26):(se=se<<1|se>>>27,oe=oe<<1|oe>>>27),se&=-15,oe&=-15,J=n[se>>>28]|e[se>>>24&15]|s[se>>>20&15]|x[se>>>16&15]|h[se>>>12&15]|w[se>>>8&15]|Y[se>>>4&15],qe=F[oe>>>28]|C[oe>>>24&15]|K[oe>>>20&15]|L[oe>>>16&15]|le[oe>>>12&15]|u[oe>>>8&15]|ce[oe>>>4&15],O=(qe>>>16^J)&65535,Ke[ee++]=J^O,Ke[ee++]=qe^O<<16}return Ke},stringToBase64:function(t){for(var n="",e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),s=0;s<t.length;s++)n+=e[t.charCodeAt(s)>>4]+e[t.charCodeAt(s)&15];var x,h=n.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ");n="";try{x=String.fromCharCode.apply(null,h)}catch{for(var x="",s=0,w=h.length;s<w;s++)x+=String.fromCharCode(h[s])}return Ze.btoa(x,null)},base64ToString:function(t){for(var n=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"),e=new Object,s=0;s<n.length;s++)e[n[s]]=s;e["="]=0;var x="",h,w,Y,F,C=t.length;t+="====";for(var s=0;s<C;s+=4)h=t.charAt(s),w=t.charAt(s+1),Y=t.charAt(s+2),F=t.charAt(s+3),x+=String.fromCharCode(e[h]<<2&255|e[w]>>4),Y!="="&&(x+=String.fromCharCode(e[w]<<4&255|e[Y]>>2)),F!="="&&(x+=String.fromCharCode(e[Y]<<6&255|e[F]));return x},btoa:function(t,n){for(var e=(n==!0?Ze.tableStr_URL_SAFE:Ze.tableStr).split(""),s=0,x=0,h=t.length/3,w=[];s<h;++s){var Y=t.charCodeAt(x++),F=t.charCodeAt(x++),C=t.charCodeAt(x++);if((Y|F|C)>255)throw new Error("String contains an invalid character");w[w.length]=e[Y>>2]+e[Y<<4&63|F>>4]+(isNaN(F)?"=":e[F<<2&63|C>>6])+(isNaN(F+C)?"=":e[C&63])}return w.join("")}};const ye=t=>(no("data-v-e9bbe549"),t=t(),oo(),t),Ao={class:"no-imprimir"},Eo={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},Oo={class:"py-12"},Do={class:"max-w-10xl mx-auto sm:px-6 lg:px-24"},Po={class:"card"},Ro={class:"-me-2 flex items-center sm:hidden"},Mo={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},_o={class:"text-center pt-2 pb-3 space-y-1"},Lo={class:"text-center pt-2 pb-3 space-y-1"},Fo={class:"text-center pt-2 pb-3 space-y-1"},No={class:"text-center pt-2 pb-3 space-y-1"},$o=ye(()=>o("hr",null,null,-1)),Vo=ye(()=>o("hr",null,null,-1)),Uo={class:"flex flex-col items-center space-y-2"},jo={class:"text-center pt-2 pb-3 space-y-1"},Ko=ye(()=>o("hr",null,null,-1)),Bo=ye(()=>o("hr",null,null,-1)),qo={class:"flex flex-col items-center space-y-2"},Ho={class:"md:flex justify-between items-center hidden sm:block"},Go={class:"flex flex-col md:flex-row justify-start items-center"},Xo={class:"flex flex-wrap justify-start items-center"},zo={class:"relative inline-block w-50 flex justify-between"},Jo=["disabled"],Wo={class:"font-bold text-lg"},Yo={key:0,class:"pi pi-plus mr-2"},Zo=["disabled"],Qo=ye(()=>o("i",{class:"pi pi-eye mr-2"},null,-1)),es={class:"flex items-center"},ts={id:"app",class:"relative inline-block w-50 ml-2"},ns={class:"flex"},os=ye(()=>o("i",{class:"pi pi-plus mr-2"},null,-1)),ss={key:0,class:"split-button-container ml-2"},is={class:"split-button-container ml-2"},as=ye(()=>o("hr",{class:"linea-grosor mt-5"},null,-1)),rs={class:"selector flex flex-col md:flex-row justify-between mt-5 ml-12"},ls={class:"showCustomer mt-12"},ds={class:"grid md:grid-cols-1 text-m gap-y-1"},us={class:"flex items-center justify-between w-full"},cs={key:0,class:"font-semibold whitespace-nowrap mr-3"},fs={key:1,class:"font-semibold mr-3 flex-shrink-0 w-32"},ms={class:"text-gray-700 w-full font-bold text-lg"},hs={class:"relative w-full mr-20"},ps={class:"flex items-center justify-between w-full"},gs={class:"font-semibold mr-3 flex-shrink-0 w-32"},vs={class:"text-gray-700 w-full uppercase"},ys={class:"flex items-center justify-between w-full"},bs={class:"font-semibold mr-3 flex-shrink-0 w-32"},xs={class:"text-gray-700 w-full"},Is={class:"flex items-center justify-between w-full"},ks={class:"font-semibold mr-3 flex-shrink-0 w-32"},Cs={class:"text-gray-700 w-full"},Ss={class:"flex items-center justify-between w-full"},ws={class:"font-semibold mr-3 flex-shrink-0 w-32"},Ts={key:0,class:"text-gray-700 w-full"},As={class:"grid md:grid-cols-1 text-sm gap-y-1 mr-28"},Es={class:"flex items-center cursor-pointer justify-end max-w-xs ml-auto"},Os={class:"text-m font-medium text-gray-900 dark:text-gray-300 flex-shrink-0"},Ds=ye(()=>o("div",{class:"relative w-11 h-6 ml-3 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1)),Ps={class:"flex items-center justify-end w-full mt-4"},Rs={class:"font-semibold mr-4 flex-shrink-0"},Ms={class:"input-wrapper"},_s=["min"],Ls={class:"flex items-center"},Fs={class:"font-semibold mr-8 min-w-20 flex-shrink-0"},Ns={class:"relative w-full"},$s={key:0,class:"input-wrapper"},Vs={class:"font-bold flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"},Us={class:"flex items-center justify-between w-full"},js={class:"font-semibold mr-3 flex-shrink-0"},Ks={class:"input-wrapper"},Bs={class:"flex items-center justify-between w-full"},qs={class:"font-semibold mr-3 flex-shrink-0"},Hs={class:"input-wrapper"},Gs=["min"],Xs={class:"flex items-center justify-between"},zs={class:"flex items-center"},Js=ye(()=>o("div",{class:"flex-grow"},null,-1)),Ws={class:"relative rounded-md shadow-sm"},Ys=["placeholder"],Zs=ye(()=>o("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),Qs={class:"relative text-gray-600"},ei={key:0,class:"flex justify-end mt-4 pr-4"},ti={class:"hidden md:flex justify-between mt-4 pr-4 mb-4"},ni={class:"totals-container w-1/3"},oi={class:"ml-4 totals p-4 rounded-md"},si={class:"w-full"},ii={class:"text-gray-600 pr-4"},ai={class:"text-gray-600 pr-4"},ri={class:"relative w-full ml-4"},li={class:"flex items-center pointer-events-none"},di={class:"absolute inset-y-0 right-0 flex items-center pr-3"},ui=ye(()=>o("tr",null,[o("td",{colspan:"2"},[o("hr",{class:"my-2 border-gray-300"})])],-1)),ci={class:"text-gray-600 pr-4"},fi={key:0},mi={key:1},hi={key:2},pi={key:3},gi={class:"pl-4"},vi={key:0},yi={key:1},bi={key:2},xi={key:3},Ii=ye(()=>o("div",{class:"w-1/12"},null,-1)),ki={class:"totals-container w-1/3"},Ci={class:"totals p-4 rounded-md"},Si={class:"w-full"},wi={class:"text-gray-600 pr-4"},Ti={class:"pl-4"},Ai=ye(()=>o("hr",{class:"my-2 border-gray-300"},null,-1)),Ei={class:"text-gray-600 pr-4"},Oi={class:"pl-4"},Di=ye(()=>o("hr",{class:"my-2 border-gray-300"},null,-1)),Pi={class:"text-gray-600 pr-4"},Ri={class:"pl-4"},Mi={class:"flex flex-wrap justify-between mt-4 pr-4 mb-4 md:hidden"},_i={class:"totals-container w-full md:w-1/3 flex flex-col mb-4 md:mb-0"},Li=ye(()=>o("i",{class:"pi pi-plus"},null,-1)),Fi={class:"ml-4 totals p-4 rounded-md flex-grow"},Ni={class:"w-full"},$i={class:"text-gray-600 pr-4"},Vi={class:"pl-4"},Ui=ye(()=>o("tr",null,[o("td",{colspan:"2"},[o("hr",{class:"my-2 border-gray-300"})])],-1)),ji={class:"text-gray-600 pr-4"},Ki={key:0},Bi={key:1},qi={key:2},Hi={key:3},Gi={class:"pl-4"},Xi={key:0},zi={key:1},Ji={key:2},Wi={key:3},Yi=ye(()=>o("div",{class:"hidden md:block w-1/12"},null,-1)),Zi={class:"totals-container w-full md:w-1/3 flex flex-col"},Qi={class:"ml-4 totals bg-gray-100 p-4 rounded-md flex-grow"},ea={class:"w-full"},ta={class:"text-gray-600 pr-4"},na={class:"pl-4"},oa={class:"text-gray-600 pr-4"},sa={class:"pl-4"},ia={class:"text-gray-600 pr-4"},aa={class:"pl-4"},ra={style:{display:"flex","flex-direction":"column"}},la=["placeholder"],da={style:{display:"flex","justify-content":"flex-end","margin-top":"8px"}},ua={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},ca={key:0,class:"flex align-items-center"},fa={class:"flex align-items-center"},ma={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},ha={key:0,class:"flex align-items-center"},pa={class:"flex align-items-center"},ga={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},va={key:0,class:"flex align-items-center"},ya={class:"flex align-items-center"},ba={class:"confirmation-content"},xa=ye(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ia={key:0},ka={class:"confirmation-content"},Ca=ye(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Sa={key:0},wa={key:0,class:"flex align-items-center"},Ta={class:"flex align-items-center"},Aa={class:"grid gap-3 md:grid-cols-1 justify-items"},Ea={class:"flex justify-between"},Oa=ye(()=>o("i",{class:"pi pi-plus"},null,-1)),Da={for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Pa={key:0,class:"flex items-center"},Ra={class:"flex items-center"},Ma={key:0,for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},_a={key:0,class:"flex items-center"},La={class:"flex items-center"},Fa={class:"flex justify-end"},Na={class:"grid gap-3 mb-6 md:grid-cols-2"},$a={for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Va=["placeholder"],Ua={for:"tax_number",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},ja=["placeholder"],Ka={class:"mb-6"},Ba={for:"address",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},qa=["placeholder"],Ha={class:"grid gap-3 mb-6 md:grid-cols-2"},Ga={for:"town",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Xa=["placeholder"],za={for:"province",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Ja=["placeholder"],Wa={for:"post_code",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Ya=["placeholder"],Za={for:"country",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Qa=["placeholder"],er={for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},tr=["placeholder"],nr={for:"phone",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},or=["placeholder"],sr={class:"grid gap-3 md:grid-cols-1 justify-items-end"},ir={type:"submit",class:"text-white bg-blue-600 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},ar={class:"imprimir"},rr={class:"invoice"},lr={class:"invoice-header"},dr=ye(()=>o("div",{class:"logo"},[o("img",{src:"https://d1csarkz8obe9u.cloudfront.net/posterpreviews/company-logo-design-template-e089327a5c476ce5c70c74f7359c5898_screen.jpg?ts=1672291305",alt:"Logo de la empresa"})],-1)),ur={class:"invoice_details"},cr={class:"invoice-info"},fr={class:"company-details"},mr={class:"name"},hr=ye(()=>o("br",null,null,-1)),pr={class:"customer-details"},gr={class:"name"},vr=ye(()=>o("br",null,null,-1)),yr={class:"invoice-table"},br={class:"header"},xr={class:"table-break"},Ir={class:"table-container"},kr={class:"totals"},Cr={class:"title"},Sr={class:"title"},wr={class:"title"},Tr={class:"bank"},Ar={class:"text-gray-600 pr-4"},Er={key:0},Or={key:1},Dr={key:2},Pr={key:3},Rr={class:"pl-4"},Mr={key:0},_r={key:1},Lr={key:2},Fr={key:3},Nr={components:{TableDocumentSelector:Qt},data(){return{itemsSave:[{label:this.$t("Guardar y crear nueva"),icon:"pi pi-refresh",command:()=>this.saveAndReset()},{label:this.$t("Firmar factura"),icon:"pi pi-file-check",command:()=>this.saveAndSign()},{label:this.$t("Cancelar"),command:()=>this.cancelInvoice()}],itemsExport:[{label:this.$t("PDF"),icon:"pi pi-file-pdf",command:()=>this.exportToPDF()},{label:this.$t("XML"),icon:"pi pi-file",command:()=>this.exportToXML()},{label:this.$t("XML Firmado"),icon:"pi pi-file-check",command:()=>this.downloadSignedXml()}],taxMap:new Map,today:new Date,fecha:"",fechaPaid:"",expiration:"",fechaFormateada:"",loading:!0,isSaving:!1,isChecked:!1,isMobileMenuOpen:!1,showTable:!1,isDropdownOpen:!1,selectedOption:null,saveRestart:!1,taxTypes:[],taxValues:[],taxOptions:[{label:"0",value:0},{label:"4",value:4},{label:"5",value:5},{label:"7",value:7},{label:"8",value:8},{label:"10",value:10},{label:"16",value:16},{label:"18",value:18},{label:"21",value:21}],paymentMethods:[{id:1},{id:2},{id:3},{id:4}],imageUrl:"https://placehold.co/300x300/e2e8f0/e2e8f0",companies:null,customers:null,types:[],series:[],serie:"",counter:"",updateDate:!1,showButton:!1,productDialog:!1,documentDialog:!1,customerDialog:!1,deleteProductDialog:!1,deleteProductsDialog:!1,selectACustomerDialog:!1,selectAPaymentMethodDialog:!1,documentListDialog:!1,descriptionDialog:!1,selectedDescription:"",productDescription:"",options:[],concepts:[],selectedBankAccount:[],selectedEmail:[],selectedPhone:[],products:[],selectedCompany:[],selectedCustomer:[],selectedType:[],selectedSerie:[],emails:[],phones:[],selectedProducts:[],selectedPaymentMethod:[],selectedPaymentSystemId:"",payment_methods:null,filters:{},submitted:!1,myDocument:{document_counter:"",number:"",company_id_company:"",company_id_customer:"",documents_type_id:"",documents_series_id:"",payment_system_id:"",expiration:"",date:"",date_paid:"",amount:"",payment_methods_id:"",totalTax:"",subTotal:"",paid:!1,invoiced:!1,isReceived:!1,concept:[]},customer:{id:"",name:"",tax_number:"",email:"",phone:"",address:"",post_code:"",town:"",province:"",country:""},company:{id:"",name:"",tax_number:"",email:"",phone:"",address:"",post_code:"",town:"",province:"",country:"",documentId:""}}},computed:{charCount(){return this.selectedDescription===null?"":this.selectedDescription.length},dynamicOptionLabel(){switch(this.selectedPaymentMethod.id){case 1:case 7:return"complete_bank_account";case 3:return"phone";case 4:return"email";default:return""}},isDropdownHidden(){return this.dynamicOptionLabel===""},subtotal(){return this.products.reduce((t,n)=>t+n.subTotal,0)},totalIVA(){return this.products.reduce((t,n)=>t+n.priceTax,0)},totalConIVA(){return this.subtotal+this.totalIVA}},async created(){this.filters={global:{value:null,matchMode:eo.CONTAINS}},this.isChecked=this.$page.props.isChecked,this.fecha=await this.getDate(),this.fechaPaid=await this.getDate(),this.expiration=await this.getExpirationDate()},async mounted(){await this.fetchCompanies(),await this.fetchCustomers(),await this.fetchPayments(),this.isChecked?(this.selectedType.id=1,this.selectedType.name="Factura",this.selectedSerie=[]):await this.fetchDocuments()},watch:{fecha(t){this.validateDate()},selectedPaymentMethod(t){console.log("PaymentId "+t.id),this.handlePaymentMethodChange(t)},selectedOption(t){if(console.log("NewValue"),console.log(t),t)switch(this.selectedPaymentMethod.id){case 1:case 7:this.selectedBankAccount=t,this.selectedPaymentSystemId=t.id;break;case 3:this.selectedPhone=t,this.selectedPaymentSystemId=t.id;break;case 4:this.selectedEmail=t,this.selectedPaymentSystemId=t.id;break;default:this.selectedPaymentSystemId="";break}}},methods:{saveAndSign(){this.myDocumentSave(),this.calculateTaxes().then(()=>{this.myDocument.document_counter=1,console.log("contador: "+this.myDocument.document_counter);const t=this.convertToFacturaeXML();this.addsign(t)})},addsign(t){if(this.myDocument.id==null)alert("Guarda el documento");else{Ee.setForceWSMode(!0),Ee.cargarAppAfirma(),Ee.setServlets(window.location.origin+"/afirma-signature-storage/StorageService",window.location.origin+"/afirma-signature-retriever/RetrieveService");const n={company_id:this.selectedCompany.id,document_id:this.myDocument.id,document_data:t},e=(h,w)=>{axios.post("/documents-sign",{datasing:n}).then(Y=>{this.$toast(this.$t("Document signed successfully."),"success")}).catch(Y=>{this.$toast(this.$t("Error signing document: ")+Y.message,"error")})},s=(h,w)=>{this.$toast(w,"error")};let x=Ee.getBase64FromText(t);Ee.signAndSaveToFile("sign",x!=null&&x!=null&&x!=""?x:null,"SHA512withRSA","XAdES","",null,e,s)}},validateDate(){new Date(this.fecha)>new Date(this.expiration)&&(alert("La fecha seleccionada no puede ser mayor que la fecha de vencimiento."),this.fecha=this.getDate(),this.expiration=this.getExpirationDate(),this.fechaPaid=this.fecha)},openDescriptionDialog(t){this.productDescription=t,this.selectedDescription=t.description,this.descriptionDialog=!0},saveDescription(){this.selectedDescription===null||this.selectedDescription.length<=255?(this.products.forEach(t=>{this.productDescription.id===t.id&&(t.description=this.selectedDescription)}),this.descriptionDialog=!1,this.selectedDescription=""):this.$toast(this.$t("Too many characters, need to be 255 at maximum"),"error")},async handlePaymentMethodChange(t){switch(t.id){case 1:console.log("handlePaymentMethodChange 1"),this.selectedPaymentMethod.name="Transferencia",await this.fetchBanks(),console.log("handlePayment "+this.selectedBankAccount.id);break;case 2:console.log("handlePaymentMethodChange 2"),this.selectedPaymentMethod.name="Efectivo";break;case 3:console.log("handlePaymentMethodChange 3"),this.selectedPaymentMethod.name="Bizum",await this.fetchPhones();break;case 4:console.log("handlePaymentMethodChange 4"),this.selectedPaymentMethod.name="Paypal",await this.fetchEmails();break;case 5:console.log("handlePaymentMethodChange 5"),this.selectedPaymentMethod.name="Tarjeta";break;case 6:console.log("handlePaymentMethodChange 6"),this.selectedPaymentMethod.name="Cheque";break;case 7:console.log("handlePaymentMethodChange 7"),this.selectedPaymentMethod.name="Domiciliación",await this.fetchBanks();break}},async handleDocumentSelected(t){t&&(this.documentListDialog=!1),this.company=this.selectedCompany,this.company.documentId=t;const n=await axios.get("/documents-show/"+this.company.id+"/"+this.company.documentId);if(n){this.myDocument=n.data.documents,this.fecha=this.myDocument.date,this.expiration=this.myDocument.expiration,this.selectedType.name=this.myDocument.document_type_name,this.selectedType.id=this.myDocument.documents_type_id,this.selectedSerie.id=this.myDocument.documents_series_id,this.selectedSerie.serie=this.myDocument.document_series_serie,this.selectedPaymentSystemId=this.myDocument.payment_system_id,this.selectedPaymentMethod.id=this.myDocument.payment_methods_id;let s=this.myDocument.number.replace(this.selectedSerie.serie,"");this.selectedSerie.number=s,this.myDocument.paid===0?(this.fechaPaid=await this.getDate(),this.myDocument.paid=!1):(this.fechaPaid=this.myDocument.date_paid,this.myDocument.paid=!0),this.selectedCompany=n.data.company,this.selectedCustomer=n.data.customer,this.concepts=n.data.concepts,this.products=n.data.concepts;for(let x=0;x<this.concepts.length;x++)this.products[x].taxes=parseFloat(this.concepts[x].tax);this.selectedPaymentMethod=[],this.selectedPaymentMethod.id=this.myDocument.payment_methods_id}else this.$toast(this.$t("Error connecting to the server"),"error")},async fetchBanks(){try{const t=await axios.get("/banks/"+this.selectedCompany.id);this.banks=t.data.accounts,console.log("this.banks"),console.log(this.banks),this.selectedBankAccount=await this.changePaymentMethodSystemId(this.banks),this.selectedPaymentSystemId=this.selectedBankAccount.id,console.log("selectedBankaccount"),console.log(this.selectedBankAccount),this.options=this.banks}catch(t){this.$toast(this.$t("Error connecting to the server"),"error"),console.log("banks error"),console.log(t)}},async fetchEmails(){try{const t=this.isChecked?`/emails/${this.selectedCustomer.id}`:`/emails/${this.selectedCompany.id}`,n=await axios.get(t);this.emails=n.data.emails,this.selectedEmail=await this.changePaymentMethodSystemId(this.emails),this.options=this.emails}catch{this.$toast(this.$t("Error connecting to the server"),"error")}},async fetchPhones(){try{const t=this.isChecked?`/phones/${this.selectedCustomer.id}`:`/phones/${this.selectedCompany.id}`,n=await axios.get(t);this.phones=n.data.phones,this.selectedPhone=await this.changePaymentMethodSystemId(this.phones),this.options=this.phones}catch{this.$toast(this.$t("Error connecting to the server"),"error")}},async changePaymentMethodSystemId(t){let n;if(console.log("Entra al methodSystem1"),this.selectedPaymentSystemId!=null){console.log("Entra al methodSystem2");let e=t.find(s=>s.id===this.selectedPaymentSystemId);console.log(this.selectedPaymentSystemId),console.log(t),console.log("Value "),console.log(e),e?(console.log("if value"),n=e,console.log(n)):(n=t.length>0?t[0]:null,console.log(n))}else n=t.length>0?t[0]:null,console.log(n);return n},async fetchPayments(){const t=this.isChecked?`/payment/${this.selectedCustomer.id}`:`/payment/${this.selectedCompany.id}`,n=await axios.get(t);this.payment_methods=n.data.methods,this.selectedPaymentMethod=this.payment_methods[0],console.log(this.selectedPaymentMethod)},async fetchCompanies(){try{const t=await axios.get("/companies-invoice");this.companies=t.data.companies,this.companies.length===1?(this.selectedCompany=this.companies[0],this.companyId=this.selectedCompany.id):this.selectedCompany=this.companies[0],this.loading=!1}catch(t){console.error("Error fetching data:",t),this.loading=!1}},async fetchCustomers(){try{const t=this.isChecked?`/providers/${this.selectedCompany.id}`:`/customers/${this.selectedCompany.id}`,n=await axios.get(t);this.isChecked?this.customers=n.data.providers:this.customers=n.data.customers,this.customers.length===1&&(this.selectedCustomer=this.customers[0]),this.loading=!1}catch(t){console.error("Error fetching data:",t),this.loading=!1}},hideDialog(){this.selectACustomerDialog=!1,this.selectAPaymentMethodDialog=!1,this.customerDialog=!1,this.submitted=!1},openNew(){this.selectACustomerDialog=!1,this.customer={companyID:this.selectedCompany.id},this.submitted=!1,this.customerDialog=!0},selectACustomer(){this.selectACustomerDialog=!0},selectAProvider(){this.selectACustomerDialog=!0},selectAPaymentMethod(){this.selectAPaymentMethodDialog=!0},saveCustomer(){let t;this.isChecked?t=axios.post("/provider",this.customer):t=axios.post("/customer",this.customer),t.then(n=>{this.customer.id=n.data.companyId,this.selectedCustomer=this.customer}).catch(n=>{console.error("Error:",n),this.customerDialog=!1}),this.customerDialog=!1},async downloadSignedXml(){if(!this.isChecked){const n=`/documents-signed/${this.myDocument.id}`;fetch(n).then(e=>e.ok?e.blob():e.json().then(s=>{throw new Error(s.message||"Error al cargar la factura")})).then(e=>{const s=URL.createObjectURL(e);window.open(s)}).catch(e=>{this.$toast(this.$t("To download you must save and sign it"),"error")})}},async handleCompanySelection(){this.selectedCustomer=[];try{const t=await axios.get("/customers/"+this.selectedCompany.id);await this.fetchDocuments(),await this.fetchPayments(),this.customers=t.data.customers,this.customers.length===1&&(this.selectedCustomer=this.customers[0])}catch(t){console.error("Error fetching phone data:",t)}},async fetchDocuments(){await axios.get("/documents-type").then(t=>(this.types=t.data.types,this.selectedType=this.types[0],axios.get("/documents-serie/"+this.selectedType.id+"/"+this.selectedCompany.id))).catch(t=>{console.error("Error fetching phone data:",t)}).then(t=>{t&&(this.series=t.data.series,this.selectedSerie=this.series[0])}).catch(t=>{console.error("Error fetching data:",t),this.loading=!1})},handleListDocument(){this.documentListDialog=!0},handleTypeSelection(){this.selectedSerie=[],axios.get("/documents-serie/"+this.selectedType.id+"/"+this.selectedCompany.id).then(t=>{this.series=t.data.series}).catch(t=>{console.error("Error fetching phone data:",t)})},selectCompany(){this.productDialog=!0},selectDocument(){this.documentDialog=!0},openFileInput(){this.$refs.fileInput.click()},handleFileChange(t){const n=t.target.files[0],e=new FileReader;e.onload=()=>{this.imageUrl=e.result},e.readAsDataURL(n)},addRow(){let t={reference:"",description:"",price:0,quantity:0,discount:0,discount_reason:"Descuento profesional",subtotal:0,taxes:21,priceTax:0,total:0,id:this.products.length+1};this.products.push(t)},saveAndReset(){this.saveRestart=!0,this.checkDocument()},handleClick(){this.$nextTick(()=>{const n=this.$refs.splitButton.$el.querySelector(".p-splitbutton-menubutton");n&&(n.classList.add("no-print"),n.click())})},checkDocument(){this.isChecked?this.saveDocument():axios.get("/documents-serie/"+this.selectedType.id+"/"+this.selectedCompany.id+"/"+this.selectedSerie.serie).then(t=>{if(this.date=t.data.date.date,this.serie=t.data.serie.number,this.selectedSerie.number<=this.serie)switch(prompt(`El número de documento ya existe. ¿Qué deseas hacer?
1. Conservar el número ingresado: ${this.selectedSerie.serie}${this.selectedSerie.number} 
2. Asignar el siguiente valor disponible: ${this.selectedSerie.serie}${++this.serie}`)){case null:this.$toast(this.$t("Operation cancelled."),"error");break;case"1":this.$toast(this.$t("The number entered will be retained: ")+this.selectedSerie.serie+this.selectedSerie.number,"success"),this.serie="",this.saveDocument();break;case"2":this.updateDate=!0,this.selectedSerie.number=this.serie,this.$toast(this.$t("The following available number has been assigned: ")+this.selectedSerie.serie+this.selectedSerie.number,"success"),this.serie="",this.saveDocument();break;default:this.$toast(this.$t("Invalid input."),"error")}else if(this.date>this.fecha){let n=this.dateFormat(this.date),e=this.dateFormat(this.fecha);switch(prompt(`La fecha seleccionada es anterior a la de la última factura, ¿deseas asignarle la fecha actual?
1. Conservar la fecha seleccionada: ${e} 
2. Asignar la fecha actual: ${n}`)){case null:this.$toast(this.$t("Operation cancelled."),"error");break;case"1":this.$toast(this.$t("The date will be retained: ")+this.fecha,"success"),this.saveDocument();break;case"2":this.fecha=getDate(),this.$toast(this.$t("The current date has been assigned."),"success"),this.saveDocument();break;default:this.$toast(this.$t("Invalid input."),"error")}}else this.saveDocument()}).catch(t=>{this.$toast(this.$t("Error saving document data."),"error"),console.log(t)})},myDocumentSave(){this.isChecked?(this.myDocument.number=this.selectedSerie.number,this.myDocument.company_id_company=this.selectedCustomer.id,this.myDocument.company_id_customer=this.selectedCompany.id,this.myDocument.documents_series_id=""):(this.myDocument.number=this.selectedSerie.serie+this.selectedSerie.number,this.myDocument.document_counter=this.selectedSerie.number,this.myDocument.company_id_company=this.selectedCompany.id,this.myDocument.company_id_customer=this.selectedCustomer.id,this.myDocument.documents_series_id=this.selectedSerie.id),this.myDocument.paid?this.myDocument.date_paid=this.fechaPaid:this.myDocument.date_paid="",this.myDocument.isReceived=this.isChecked,this.myDocument.documents_type_id=this.selectedType.id,this.updateDate&&(this.fecha=this.getDate(),this.expiration=this.getExpirationDate()),this.myDocument.expiration=this.expiration,this.myDocument.date=this.fecha,this.updateDate=!1,this.myDocument.payment_methods_id=this.selectedPaymentMethod.id,console.log("selectedPaymentSystemId"),console.log(this.selectedPaymentSystemId),this.myDocument.payment_system_id=this.selectedPaymentSystemId,this.myDocument.document_counter=1,this.myDocument.subTotal=this.subtotal.toFixed(2),this.myDocument.totalTax=this.totalIVA.toFixed(2),this.myDocument.amount=this.totalConIVA.toFixed(2)},saveDocument(){this.myDocumentSave(),this.selectedType.id==1&&(this.myDocument.invoiced=!0),console.log(this.fecha),console.log(this.expiration),this.myDocument.concept=[],this.products.forEach(t=>{try{let n={reference:t.reference,description:t.description,quantity:t.quantity,price:t.price,taxes:t.taxes,discount:t.discount,discount_reason:t.discount_reason,total:this.calculateTotal(t)};this.myDocument.concept.push(n)}catch(n){console.error("Error al crear el objeto newProduct:",n)}}),axios.post("/documents",{documentData:this.myDocument}).then(t=>{this.$toast(this.$t("Invoice saved correctly."),"success"),this.myDocument.concept=[],this.saveRestart&&this.resetData()}).catch(t=>{this.$toast(this.$t("Error saving invoice."),"error"),console.log(t),this.myDocument.concept=[]})},getDate(){const t=this.today.getFullYear(),n=(this.today.getMonth()+1).toString().padStart(2,"0"),e=this.today.getDate().toString().padStart(2,"0");return`${t}-${n}-${e}`},getExpirationDate(){const t=new Date;t.setDate(this.today.getDate()+15);const n=t.getFullYear(),e=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getDate().toString().padStart(2,"0");return`${n}-${e}-${s}`},resetData(){this.isSaving=!0,setTimeout(function(){window.location.reload()},1e3)},calculateGross(t){return t.quantity*t.price},calculateTax(t){return t.priceTax=parseFloat(t.taxes/100*parseFloat(t.subTotal)),t.priceTax},calculateTotal(t){let n=this.calculateTax(t);return t.total=n+parseFloat(t.subTotal),t.total.toFixed(2)},calculateSubtotal(t){let n=parseFloat(t.quantity)*parseFloat(t.price);return t.subTotal=n-t.discount/100*n,t.subTotal},confirmDeleteProduct(t){this.product=t,this.deleteProductDialog=!0},deleteProduct(){this.products=this.products.filter(t=>t.id!==this.product.id),this.product=null,this.deleteProductDialog=!1},confirmDeleteSelected(){this.deleteProductsDialog=!0},deleteSelectedProducts(){this.selectedProducts.forEach(t=>{this.products=this.products.filter(n=>n.id!==t.id)}),this.selectedProducts=[],this.deleteProductsDialog=!1},dateFormat(t){let n=new Date(t),e=n.getDate(),s=n.getMonth()+1,x=n.getFullYear();return e<10&&(e="0"+e),s<10&&(s="0"+s),`${e}/${s}/${x}`},manejarFecha(){let t=this.dateFormat(this.fecha),n=prompt(`La fecha seleccionada (${t}) es anterior a la de la última factura, ¿deseas asignarle la fecha actual?
1. Conservar la fecha seleccionada. 
2. Asignar la fecha actual.`);if(n!=="1"){if(n==="2"){let e=new Date().toISOString().split("T")[0];this.dateFormat(e)}}},calcularImporteBase(t,n){return t<=0?0:n/(t/100)},exportToPDF(){this.myDocumentSave(),this.calculateTaxes().then(()=>{this.showTable=!this.showTable,window.print()}).catch(t=>{this.$toast(this.$t("Could not generate the PDF."),"error")})},exportToXML(){this.myDocumentSave(),this.calculateTaxes().then(()=>{this.myDocument.document_counter=1;const t=this.convertToFacturaeXML();console.log("contador: "+this.myDocument.document_counter),this.$toast(this.$t("XML document generated correctly."),"success"),this.downloadXML(t,"factura.xml")}).catch(t=>{this.$toast(this.$t("Could not generate the XML."),"error")})},convertToFacturaeXML(){let t=`<?xml version="1.0" encoding="UTF-8"?>
            <fe:Facturae xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:fe="http://www.facturae.es/Facturae/2014/v3.2.1/Facturae">
                <FileHeader>
                    <SchemaVersion>3.2.1</SchemaVersion>
                    <Modality>I</Modality>
                    <InvoiceIssuerType>EM</InvoiceIssuerType>
                    <Batch>
                        <BatchIdentifier>${this.selectedCompany.tax_number}${this.selectedSerie.number}${this.selectedSerie.serie}</BatchIdentifier>
                        <InvoicesCount>${this.myDocument.document_counter}</InvoicesCount>
                        <TotalInvoicesAmount>
                            <TotalAmount>${this.myDocument.amount}</TotalAmount>
                        </TotalInvoicesAmount>
                        <TotalOutstandingAmount>
                            <TotalAmount>${this.myDocument.amount}</TotalAmount>
                        </TotalOutstandingAmount>
                        <TotalExecutableAmount>
                            <TotalAmount>${this.myDocument.amount}</TotalAmount>
                        </TotalExecutableAmount>
                        <InvoiceCurrencyCode>EUR</InvoiceCurrencyCode>
                    </Batch>
                </FileHeader> 
                
                <Parties>
                    <SellerParty>
                        <TaxIdentification>
                            <PersonTypeCode>J</PersonTypeCode>
                            <ResidenceTypeCode>R</ResidenceTypeCode>
                            <TaxIdentificationNumber>${this.selectedCompany.tax_number}</TaxIdentificationNumber>
                        </TaxIdentification>
                        <LegalEntity>
                            <CorporateName>${this.selectedCompany.name}</CorporateName>
                            <AddressInSpain>
                                <Address>${this.selectedCompany.address}</Address>
                                <PostCode>${this.selectedCompany.post_code}</PostCode>
                                <Town>${this.selectedCompany.town}</Town>
                                <Province>${this.selectedCompany.province}</Province>
                                <CountryCode>ESP</CountryCode>
                            </AddressInSpain>
                            <ContactDetails>
                                <Telephone>${this.selectedCompany.phone}</Telephone>
                                <ElectronicMail>${this.selectedCompany.email}</ElectronicMail>
                            </ContactDetails>
                        </LegalEntity>
                    </SellerParty>
                    
                    <BuyerParty>
                        <TaxIdentification>
                            <PersonTypeCode>J</PersonTypeCode>
                            <ResidenceTypeCode>R</ResidenceTypeCode>
                            <TaxIdentificationNumber>${this.selectedCustomer.tax_number}</TaxIdentificationNumber>
                        </TaxIdentification>
                        <LegalEntity>
                            <CorporateName>${this.selectedCustomer.name}</CorporateName>
                            <AddressInSpain>
                                <Address>${this.selectedCustomer.address}</Address>
                                <PostCode>${this.selectedCustomer.post_code}</PostCode>
                                <Town>${this.selectedCustomer.town}</Town>
                                <Province>${this.selectedCustomer.province}</Province>
                                <CountryCode>ESP</CountryCode>
                            </AddressInSpain>
                            <ContactDetails>
                                <Telephone>${this.selectedCustomer.phone}</Telephone>
                                <ElectronicMail>${this.selectedCustomer.email}</ElectronicMail>
                            </ContactDetails>
                        </LegalEntity>
                    </BuyerParty> 
                </Parties>
                <Invoices>
                    <Invoice>
                        <InvoiceHeader>
                            <InvoiceNumber>${this.selectedSerie.number}</InvoiceNumber>
                            <InvoiceSeriesCode>${this.selectedSerie.serie}</InvoiceSeriesCode>
                            <InvoiceDocumentType>FC</InvoiceDocumentType>
                            <InvoiceClass>OO</InvoiceClass>
                        </InvoiceHeader>
                        <InvoiceIssueData>
                            <IssueDate>${this.myDocument.date}</IssueDate>
                            <InvoiceCurrencyCode>EUR</InvoiceCurrencyCode>
                            <TaxCurrencyCode>EUR</TaxCurrencyCode>
                            <LanguageName>es</LanguageName>
                        </InvoiceIssueData>
                        <TaxesOutputs>
`;return this.taxMap.forEach((n,e)=>{t+=`  <Tax>
`,t+=`    <TaxTypeCode>01</TaxTypeCode>
`,t+=`    <TaxRate>${parseFloat(e).toFixed(2)}</TaxRate>
`,t+=`    <TaxableBase>
`,t+=`      <TotalAmount>${this.calcularImporteBase(e,n).toFixed(2)}</TotalAmount>
`,t+=`    </TaxableBase>
`,t+=`    <TaxAmount>
`,t+=`      <TotalAmount>${n.toFixed(2)}</TotalAmount>
`,t+=`    </TaxAmount>
`,t+=`  </Tax>
`}),t+=`</TaxesOutputs>
                        <InvoiceTotals>
                            <TotalGrossAmount>${this.subtotal.toFixed(2)}</TotalGrossAmount>
                            <TotalGeneralDiscounts>0.0</TotalGeneralDiscounts>
                            <TotalGeneralSurcharges>0.0</TotalGeneralSurcharges>
                            <TotalGrossAmountBeforeTaxes>${this.subtotal.toFixed(2)}</TotalGrossAmountBeforeTaxes>
                            <TotalTaxOutputs>${this.totalIVA.toFixed(2)}</TotalTaxOutputs>
                            <TotalTaxesWithheld>0.0</TotalTaxesWithheld>
                            <InvoiceTotal>${this.myDocument.amount}</InvoiceTotal>
                            <TotalOutstandingAmount>${this.myDocument.amount}</TotalOutstandingAmount>
                            <TotalExecutableAmount>${this.myDocument.amount}</TotalExecutableAmount>
                        </InvoiceTotals>
                        <Items>`,this.products.forEach(n=>{t+=`
                    <InvoiceLine>
                        <ItemDescription>${n.description}</ItemDescription>
                        <Quantity>${n.quantity}</Quantity>
                        <UnitOfMeasure>01</UnitOfMeasure>
                        <UnitPriceWithoutTax>${n.price}</UnitPriceWithoutTax>
                        <TotalCost>${n.quantity*n.price}</TotalCost>
                        <DiscountsAndRebates>
                            <Discount>
                                <DiscountReason>${n.discount_reason}</DiscountReason>
                                <DiscountRate>${parseFloat(n.discount).toFixed(1)}</DiscountRate>
                                <DiscountAmount>${(n.quantity*n.price*(n.discount/100)).toFixed(1)}</DiscountAmount>
                            </Discount>
                        </DiscountsAndRebates>
                        <GrossAmount>${n.subTotal}</GrossAmount>
                        <TaxesOutputs>
                            <Tax>
                                <TaxTypeCode>01</TaxTypeCode>
                                <TaxRate>${n.taxes}</TaxRate>
                                <TaxableBase>
                                    <TotalAmount>${n.subTotal}</TotalAmount>
                                </TaxableBase>
                                <TaxAmount>
                                    <TotalAmount>${n.priceTax.toFixed(2)}</TotalAmount>
                                </TaxAmount>
                            </Tax>
                        </TaxesOutputs>
                    </InvoiceLine>`}),t+=`
                        </Items>
                    </Invoice>
                </Invoices>
            </fe:Facturae>`,t},downloadXML(t,n){const e=new Blob([t],{type:"application/xml"}),s=document.createElement("a");s.href=URL.createObjectURL(e),s.download=n,s.click(),URL.revokeObjectURL(s.href)},cancelInvoice(){confirm("Los cambios no serán guardados")&&this.resetData()},calculateTaxes(){return new Promise((t,n)=>{try{this.taxMap.clear(),this.products.forEach(e=>{let s=e.taxes,x=parseFloat(e.priceTax);if(this.taxMap.has(s)){let h=this.taxMap.get(s);this.taxMap.set(s,h+x)}else this.taxMap.set(s,x)}),t()}catch(e){n(e)}})}}},$r=Object.assign(Nr,{__name:"Document",setup(t){const n=Qn(!1);return(e,s)=>{const x=ht("ResponsiveNavLink"),h=Wt,w=nn,Y=Jn,F=Hn,C=Gn,K=Xn,L=zn,le=Vn;return R(),B(bt,null,[o("div",Ao,[_(so,{title:"Document"},{header:H(()=>[o("h2",Eo,d(e.$t("New invoice")),1)]),default:H(()=>[o("div",Oo,[o("div",Do,[o("div",{class:_e({"border-blue-500 border-2":e.isChecked,"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg":!0})},[o("div",Po,[o("div",Ro,[o("button",{class:"inline-flex items-center justify-center p-2 bg-gray-100 rounded-md text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-900 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-900 focus:text-gray-500 dark:focus:text-gray-400 transition duration-150 ease-in-out",onClick:s[0]||(s[0]=u=>n.value=!n.value)},[(R(),B("svg",Mo,[o("path",{class:_e({hidden:n.value,"inline-flex":!n.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),o("path",{class:_e({hidden:!n.value,"inline-flex":n.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])]),o("div",{class:_e([{block:n.value,hidden:!n.value},"sm:hidden bg-white"])},[o("div",_o,[_(x,{onClick:s[1]||(s[1]=u=>e.selectCompany())},{default:H(()=>[ge(d(e.selectedCompany.name),1)]),_:1})]),o("div",Lo,[_(x,{onClick:s[2]||(s[2]=u=>e.handleListDocument())},{default:H(()=>[ge(d(e.$t("Document check")),1)]),_:1})]),o("div",Fo,[_(x,{onClick:s[3]||(s[3]=u=>e.resetData())},{default:H(()=>[ge(d(e.$t("New invoice")),1)]),_:1})]),o("div",No,[$o,o("h3",null,d(e.$t("Download")),1),Vo,o("div",Uo,[_(h,{onClick:e.exportToPDF},{default:H(()=>[ge(d(e.$t("PDF")),1)]),_:1},8,["onClick"]),_(h,{onClick:e.exportToXML},{default:H(()=>[ge(d(e.$t("XML")),1)]),_:1},8,["onClick"]),_(h,{onClick:e.exportToXML},{default:H(()=>[ge(d(e.$t("XML Firmado")),1)]),_:1},8,["onClick"])])]),o("div",jo,[Ko,o("h3",null,d(e.$t("Save")),1),Bo,o("div",qo,[_(h,{onClick:e.saveAndReset},{default:H(()=>[ge(d(e.$t("Guardar y crear nueva")),1)]),_:1},8,["onClick"]),_(h,{onClick:e.saveAndSign},{default:H(()=>[ge(d(e.$t("Firmar factura")),1)]),_:1},8,["onClick"]),_(h,{onClick:e.cancelInvoice},{default:H(()=>[ge(d(e.$t("Cancel")),1)]),_:1},8,["onClick"])])])],2),o("div",Ho,[o("div",Go,[o("div",Xo,[o("div",zo,[!e.loading&&e.companies.length>0?(R(),B("button",{key:0,type:"button",class:"px-4 py-2 bg-gray-800 hover:bg-gray-900 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-white flex items-center",onClick:s[4]||(s[4]=u=>e.companies.length>1?e.selectCompany():null),disabled:e.companies.length===1},[o("span",Wo,[e.companies.length>1?(R(),B("i",Yo)):he("",!0),ge(" "+d(e.selectedCompany.name),1)])],8,Jo)):he("",!0),o("button",{type:"button",class:_e(["ml-2 px-4 py-2 bg-yellow-400 hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-300 font-medium rounded-lg text-white rounded flex items-center justify-between",{"opacity-50":!e.selectedCompany.id}]),onClick:s[5]||(s[5]=u=>e.handleListDocument()),disabled:!e.selectedCompany.id},[o("span",null,[Qo,ge(" "+d(e.$t("Document check")),1)])],10,Zo)])])]),o("div",es,[o("div",ts,[o("div",ns,[_(h,{type:"button",class:_e(["px-4 ml-2 py-2 bg-green-500 hover:bg-green-600 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-white text-white rounded flex items-center justify-between",{"opacity-50":!e.selectedCompany.id}]),onClick:s[6]||(s[6]=u=>e.resetData()),disabled:!e.selectedCompany.id},{default:H(()=>[o("span",null,[os,ge(" "+d(e.$t("New invoice")),1)])]),_:1},8,["class","disabled"])])]),e.isChecked?he("",!0):(R(),B("div",ss,[_(w,{ref:"splitButton",class:_e(["bg-purple-400 hover:bg-purple-500 focus:ring-4 focus:ring-pur-300 font-medium rounded-lg text-white text-white p-2",{"opacity-50":e.totalConIVA<=0||e.isSaving||!e.selectedCustomer.id||!e.selectedSerie.number}]),label:e.$t("Download"),onClick:e.handleClick,model:e.itemsExport,disabled:e.totalConIVA<=0||e.isSaving||!e.selectedCustomer.id||!e.selectedSerie.number},{icon:H(()=>[o("i",{class:_e(["pi pi-download mr-2",{"opacity-50":e.totalConIVA<=0}])},null,2)]),_:1},8,["label","onClick","model","disabled","class"])])),o("div",is,[_(w,{class:_e(["blue-button",{"opacity-50":e.totalConIVA<=0||e.isSaving||!e.selectedCustomer.id||!e.selectedSerie.number}]),label:e.$t("Save"),onClick:e.checkDocument,model:e.itemsSave,disabled:e.totalConIVA<=0||e.isSaving||!e.selectedCustomer.id||!e.selectedSerie.number},{icon:H(()=>[o("i",{class:_e(["pi pi-save mr-2",{"opacity-50":e.totalConIVA<=0}])},null,2)]),_:1},8,["label","onClick","model","disabled","class"])])])]),as,o("div",rs,[o("div",ls,[o("div",ds,[o("div",us,[o("div",null,[e.selectedCustomer.name?(R(),B("div",fs,d(e.isChecked?e.$t("Provider"):e.$t("Customer"))+": ",1)):(R(),B("div",cs,d(e.isChecked?e.$t("Select a provider"):e.$t("Select a customer")),1))]),o("div",ms,d(e.selectedCustomer.name),1),o("div",hs,[_(h,{type:"button",icon:"pi pi-search",id:"voice-search",onClick:e.selectACustomer,class:"bg-gray-100 p-2 rounded-md text-gray-900 text-sm hover:bg-gray-300"},null,8,["onClick"])])]),o("div",null,[o("div",ps,[o("div",gs,d(e.$t("Tax number"))+":",1),o("div",vs,d(e.selectedCustomer.tax_number),1)]),o("div",ys,[o("div",bs,d(e.$t("Phone"))+":",1),o("div",xs,d(e.selectedCustomer.phone),1)]),o("div",Is,[o("div",ks,d(e.$t("Email"))+":",1),o("div",Cs,d(e.selectedCustomer.email),1)]),o("div",Ss,[o("div",ws,d(e.$t("Address"))+":",1),e.selectedCustomer.name?(R(),B("div",Ts,d(e.selectedCustomer.address)+", "+d(e.selectedCustomer.post_code)+", "+d(e.selectedCustomer.town)+", "+d(e.selectedCustomer.province)+" ( "+d(e.selectedCustomer.country)+" ) ",1)):he("",!0)])])])]),o("div",As,[o("label",Es,[o("span",Os,d(e.$t("Mark as paid")),1),ke(o("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":s[7]||(s[7]=u=>e.myDocument.paid=u)},null,512),[[to,e.myDocument.paid]]),Ds]),o("div",Ps,[o("div",Rs,d(e.$t("Payment date"))+":",1),o("div",Ms,[ke(o("input",{type:"date",min:e.fecha,"onUpdate:modelValue":s[8]||(s[8]=u=>e.fechaPaid=u),onChange:s[9]||(s[9]=(...u)=>e.cambiarFormatoFecha&&e.cambiarFormatoFecha(...u)),disabled:!1,class:_e([{"bg-gray-100 text-gray-300 cursor-not-allowed":!e.myDocument.paid,"bg-white text-black":e.myDocument.paid,"pointer-events-none":!e.myDocument.paid},"styled-input bg-gray-50 border border-gray-300 rounded-md w-48 px-3 py-2 focus:outline-none focus:border-blue-400"])},null,42,_s),[[Re,e.fechaPaid]])])]),o("form",Ls,[o("div",Fs,"Nº "+d(e.selectedType.name)+":",1),o("div",Ns,[e.isChecked?ke((R(),B("input",{key:1,type:"text",id:"voice-search",class:"border-gray-300 rounded-md text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-[161px] pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500","onUpdate:modelValue":s[12]||(s[12]=u=>e.selectedSerie.number=u),required:""},null,512)),[[Re,e.selectedSerie.number]]):(R(),B("div",$s,[o("div",Vs,d(e.selectedSerie.serie)+" / ",1),ke(o("input",{type:"text",id:"voice-search",class:"border-gray-300 rounded-md text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500","onUpdate:modelValue":s[10]||(s[10]=u=>e.selectedSerie.number=u),required:""},null,512),[[Re,e.selectedSerie.number]]),_(h,{type:"button",icon:"pi pi-search",onClick:s[11]||(s[11]=u=>e.selectDocument()),class:"button-search font-bold flex absolute inset-y-0 right-0 items-center border-gray-300 pr-1"})]))])]),o("div",Us,[o("div",js,d(e.$t("Date"))+":",1),o("div",Ks,[ke(o("input",{type:"date","onUpdate:modelValue":s[13]||(s[13]=u=>e.fecha=u),onChange:s[14]||(s[14]=(...u)=>e.cambiarFormatoFecha&&e.cambiarFormatoFecha(...u)),class:"styled-input bg-gray-50 border border-gray-300 rounded-md w-48 px-3 py-2 focus:outline-none focus:border-blue-400"},null,544),[[Re,e.fecha]])])]),o("div",Bs,[o("div",qs,d(e.$t("Expiration"))+":",1),o("div",Hs,[ke(o("input",{type:"date","onUpdate:modelValue":s[15]||(s[15]=u=>e.expiration=u),min:e.fecha,onChange:s[16]||(s[16]=(...u)=>e.cambiarFormatoFecha&&e.cambiarFormatoFecha(...u)),class:"styled-input bg-gray-50 border border-gray-300 rounded-md w-48 px-3 py-2 focus:outline-none focus:border-blue-400"},null,40,Gs),[[Re,e.expiration]])])])])]),_(Y,{class:"mb-4 mt-8 border border-slate-200 ..."},{start:H(()=>[o("div",Xs,[o("div",zs,[_(h,{label:e.$t("Concept"),icon:"pi pi-plus",severity:"success",class:"mr-2 bg-green-500 hover:bg-green-600 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-white rounded-md p-2",onClick:e.addRow},null,8,["label","onClick"]),_(h,{label:e.$t("Delete"),icon:"pi pi-trash",severity:"danger",class:"bg-red-400 hover:bg-red-500 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-white rounded-md p-2",onClick:e.confirmDeleteSelected,disabled:!e.selectedProducts||!e.selectedProducts.length},null,8,["label","onClick","disabled"])]),Js])]),end:H(()=>[o("div",Ws,[ke(o("input",{type:"search",class:"block w-full h-11 rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm","onUpdate:modelValue":s[17]||(s[17]=u=>e.filters.global.value=u),placeholder:e.$t("Search...")},null,8,Ys),[[Re,e.filters.global.value]]),Zs])]),_:1}),_(L,{ref:"dt",value:e.products,selection:e.selectedProducts,"onUpdate:selection":s[18]||(s[18]=u=>e.selectedProducts=u),dataKey:"id",class:"w-full lg:w-4/4 mx-auto",filters:e.filters},{default:H(()=>[_(F,{selectionMode:"multiple",exportable:!1,class:"datetable checkbox"}),_(F,{field:"reference",header:e.$t("Reference"),sortable:"",class:"dateTable w-1/4"},{body:H(u=>[_(C,{class:"input w-full",placeholder:e.$t("Reference"),modelValue:u.data.reference,"onUpdate:modelValue":ce=>u.data.reference=ce},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),_(F,{field:"description",header:e.$t("Concept"),sortable:"",class:"dateTable w-full"},{body:H(u=>[o("div",Qs,[_(C,{modelValue:u.data.description,"onUpdate:modelValue":ce=>u.data.description=ce,placeholder:e.$t("Concept"),class:"input bg-white mt-3 rounded-md border border-gray-100 text-m"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),_(h,{type:"submit",icon:"pi pi-search-plus",onClick:ce=>e.openDescriptionDialog(u.data),class:"bg-gray-100 hover:bg-gray-200 p-2 absolute right-0 top-0 mt-3 mr-0.5 rounded rounded-r-lg rounded-l-none"},null,8,["onClick"])])]),_:1},8,["header"]),_(F,{field:"quantity",header:e.$t("Quantity"),sortable:"",class:"dateTable w-1/8"},{body:H(u=>[_(C,{class:"input input-short w-full",modelValue:u.data.quantity,"onUpdate:modelValue":ce=>u.data.quantity=ce},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),_(F,{field:"price",header:e.$t("Price"),sortable:"",class:"dateTable w-1/8"},{body:H(u=>[_(C,{class:"input input-short w-full",modelValue:u.data.price,"onUpdate:modelValue":ce=>u.data.price=ce},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),_(F,{field:"discount",header:e.$t("Discount (%)"),sortable:"",class:"dateTable w-1/4"},{body:H(u=>[_(C,{class:"input input-short w-full",modelValue:u.data.discount,"onUpdate:modelValue":ce=>u.data.discount=ce},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),_(F,{field:"subTotal",header:e.$t("Subtotal"),sortable:"",class:"dateTable w-1/12"},{body:H(u=>[_(C,{class:"input input-short w-1/12",value:e.calculateSubtotal(u.data),readonly:""},null,8,["value"])]),_:1},8,["header"]),_(F,{field:"taxes",header:e.$t("Tax (%)"),sortable:"",class:"dateTable w-1/4"},{body:H(u=>[_(K,{class:"input-short w-full",modelValue:u.data.taxes,"onUpdate:modelValue":ce=>u.data.taxes=ce,options:e.taxOptions,optionLabel:"label",optionValue:"value"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1},8,["header"]),_(F,{field:"total",header:e.$t("Total"),sortable:"",class:"dateTable w-1/12"},{body:H(u=>[_(C,{class:"input input-short w-1/12",value:e.calculateTotal(u.data),readonly:""},null,8,["value"])]),_:1},8,["header"]),_(F,{exportable:!1,header:e.$t("Utility"),class:"dateTable w-1/12"},{body:H(u=>[_(h,{icon:"pi pi-trash",outlined:"",rounded:"",class:"simpleDelete-button",severity:"danger",onClick:ce=>e.confirmDeleteProduct(u.data)},null,8,["onClick"])]),_:1},8,["header"])]),_:1},8,["value","selection","filters"]),e.showButton?(R(),B("div",ei,[_(h,{label:e.$t("Concept"),icon:"pi pi-plus",severity:"success",class:"bg-green-500 hover:bg-green-600 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-white",onClick:s[19]||(s[19]=u=>e.addRow())},null,8,["label"])])):he("",!0),o("div",ti,[o("div",ni,[o("div",oi,[o("table",si,[o("tbody",null,[o("tr",null,[o("td",ii,d(e.$t("Payment method"))+":",1),o("td",ai,[o("div",ri,[o("div",li,d(e.selectedPaymentMethod.name),1),o("div",di,[_(h,{type:"button",icon:"pi pi-search",id:"voice-search",onClick:s[20]||(s[20]=u=>e.selectAPaymentMethod()),class:"bg-gray-100 p-2 rounded-md text-gray-900 text-sm hover:bg-gray-300"})])])])]),ui,o("tr",null,[o("td",ci,[e.selectedPaymentMethod.id===1||e.selectedPaymentMethod.id===7?(R(),B("span",fi,d(e.$t("Bank account"))+":",1)):e.selectedPaymentMethod.id===3?(R(),B("span",mi,d(e.$t("Phone"))+":",1)):e.selectedPaymentMethod.id===4?(R(),B("span",hi,d(e.$t("Email"))+":",1)):(R(),B("span",pi,d("")))]),o("td",gi,[e.selectedPaymentMethod.id===1||e.selectedPaymentMethod.id===7?(R(),B("span",vi,d(e.selectedBankAccount.complete_bank_account),1)):e.selectedPaymentMethod.id===3?(R(),B("span",yi,d(e.selectedPhone.phone),1)):e.selectedPaymentMethod.id===4?(R(),B("span",bi,d(e.selectedEmail.email),1)):(R(),B("span",xi,d("")))])])])])])]),Ii,o("div",ki,[o("button",{class:"ml-4 mb-5 rounded-md",onClick:s[21]||(s[21]=u=>e.selectAPaymentMethod())}),o("div",Ci,[o("table",Si,[o("tbody",null,[o("tr",null,[o("td",wi,d(e.$t("Subtotal (excluding Tax)"))+":",1),o("td",Ti,d(e.subtotal.toFixed(2))+"€",1)]),Ai,o("tr",null,[o("td",Ei,d(e.$t("Total Tax"))+":",1),o("td",Oi,d(e.totalIVA.toFixed(2))+"€",1)]),Di,o("tr",null,[o("td",Pi,d(e.$t("Total (with IVA)"))+":",1),o("td",Ri,d(e.totalConIVA.toFixed(2))+"€",1)])])])])])])])],2),o("div",Mi,[o("div",_i,[o("button",{class:"ml-4 mb-2 success-button rounded-md",onClick:s[22]||(s[22]=u=>e.selectAPaymentMethod())},[Li,ge(" "+d(e.$t("Payment method")),1)]),o("div",Fi,[o("table",Ni,[o("tbody",null,[o("tr",null,[o("td",$i,d(e.$t("Payment method"))+": ",1),o("td",Vi,d(e.selectedPaymentMethod.name),1)]),Ui,o("tr",null,[o("td",ji,[e.selectedPaymentMethod.id===1||e.selectedPaymentMethod.id===7?(R(),B("span",Ki,d(e.$t("Bank account"))+":",1)):e.selectedPaymentMethod.id===3?(R(),B("span",Bi,d(e.$t("Phone"))+":",1)):e.selectedPaymentMethod.id===4?(R(),B("span",qi,d(e.$t("Email"))+":",1)):(R(),B("span",Hi,d("")))]),o("td",Gi,[e.selectedPaymentMethod.id===1||e.selectedPaymentMethod.id===7?(R(),B("span",Xi,d(e.selectedBankAccount.complete_bank_account),1)):e.selectedPaymentMethod.id===3?(R(),B("span",zi,d(e.selectedPhone.phone),1)):e.selectedPaymentMethod.id===4?(R(),B("span",Ji,d(e.selectedEmail.email),1)):(R(),B("span",Wi,d("")))])])])])])]),Yi,o("div",Zi,[o("div",Qi,[o("table",ea,[o("tbody",null,[o("tr",null,[o("td",ta,d(e.$t("Subtotal (excluding Tax)"))+":",1),o("td",na,d(e.subtotal.toFixed(2))+"€",1)]),o("tr",null,[o("td",oa,d(e.$t("Total Tax"))+":",1),o("td",sa,d(e.totalIVA.toFixed(2))+"€",1)]),o("tr",null,[o("td",ia,d(e.$t("Total (with IVA)"))+":",1),o("td",aa,d(e.totalConIVA.toFixed(2))+"€",1)])])])])])])])]),_(le,{visible:e.descriptionDialog,"onUpdate:visible":s[24]||(s[24]=u=>e.descriptionDialog=u),style:{width:"450px"},header:e.$t("Concept"),modal:""},{footer:H(()=>[_(h,{label:e.$t("Save"),icon:"pi pi-check",onClick:e.saveDescription},null,8,["label","onClick"])]),default:H(()=>[o("div",ra,[ke(o("textarea",{"onUpdate:modelValue":s[23]||(s[23]=u=>e.selectedDescription=u),rows:"7",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Insert the description here")},null,8,la),[[Re,e.selectedDescription]]),o("div",da,[o("div",{class:_e({"char-counter":!0,"text-red-500":e.charCount>255})},d(e.charCount)+"/255 ",3)])])]),_:1},8,["visible","header"]),_(le,{visible:e.productDialog,"onUpdate:visible":s[26]||(s[26]=u=>e.productDialog=u),header:e.$t("Select companies"),modal:!0,onChange:e.handleCompanySelection,class:"p-fluid w-full sm:w-3/4 md:w-2/3 lg:w-1/2 max-w-4xl"},{default:H(()=>[o("label",ua,d(e.$t("Select your company"))+":",1),_(K,{modelValue:e.selectedCompany,"onUpdate:modelValue":s[25]||(s[25]=u=>e.selectedCompany=u),options:e.companies,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500",onChange:e.handleCompanySelection},{value:H(u=>[u.value?(R(),B("div",ca,[o("div",null,d(u.value.name),1)])):he("",!0)]),option:H(u=>[o("div",fa,[o("div",null,d(u.option.name),1)])]),_:1},8,["modelValue","options","onChange"])]),_:1},8,["visible","header","onChange"]),_(le,{visible:e.documentDialog,"onUpdate:visible":s[29]||(s[29]=u=>e.documentDialog=u),style:{width:"450px"},header:e.$t("Select document"),modal:!0,onChange:e.handleTypeSelection},{default:H(()=>[o("label",ma,d(e.$t("Select document type")),1),_(K,{modelValue:e.selectedType,"onUpdate:modelValue":s[27]||(s[27]=u=>e.selectedType=u),options:e.types,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500",onChange:e.handleTypeSelection},{value:H(u=>[u.value?(R(),B("div",ha,[o("div",null,d(u.value.name),1)])):he("",!0)]),option:H(u=>[o("div",pa,[o("div",null,d(u.option.name),1)])]),_:1},8,["modelValue","options","onChange"]),o("label",ga,d(e.$t("Select document serie")),1),_(K,{modelValue:e.selectedSerie,"onUpdate:modelValue":s[28]||(s[28]=u=>e.selectedSerie=u),options:e.series,filter:"",optionLabel:"serie",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:H(u=>[u.value?(R(),B("div",va,[o("div",null,d(u.value.serie),1)])):he("",!0)]),option:H(u=>[o("div",ya,[o("div",null,d(u.option.serie),1)])]),_:1},8,["modelValue","options"])]),_:1},8,["visible","header","onChange"]),_(le,{visible:e.documentListDialog,"onUpdate:visible":s[30]||(s[30]=u=>e.documentListDialog=u),class:"w-3/4",header:e.isChecked?e.$t("Received invoices"):e.$t("Emitted invoices"),modal:!0},{default:H(()=>[_(Qt,{companyId:e.selectedCompany.id,isChecked:e.isChecked,onDocumentSelected:e.handleDocumentSelected},null,8,["companyId","isChecked","onDocumentSelected"])]),_:1},8,["visible","header"]),_(le,{visible:e.deleteProductDialog,"onUpdate:visible":s[32]||(s[32]=u=>e.deleteProductDialog=u),style:{width:"450px"},header:e.$t("Confirm"),modal:!0},{footer:H(()=>[_(h,{label:e.$t("No"),icon:"pi pi-times",text:"",onClick:s[31]||(s[31]=u=>e.deleteProductDialog=!1)},null,8,["label"]),_(h,{label:e.$t("Yes"),icon:"pi pi-check",text:"",onClick:e.deleteProduct},null,8,["label","onClick"])]),default:H(()=>[o("div",ba,[xa,e.companies?(R(),B("span",Ia,[ge(d(e.$t("Are you sure you want to delete")),1),o("b",null,d(e.companies.name),1),ge("?")])):he("",!0)])]),_:1},8,["visible","header"]),_(le,{visible:e.deleteProductsDialog,"onUpdate:visible":s[34]||(s[34]=u=>e.deleteProductsDialog=u),style:{width:"450px"},header:e.$t("Confirm"),modal:!0},{footer:H(()=>[_(h,{label:e.$t("No"),icon:"pi pi-times",text:"",onClick:s[33]||(s[33]=u=>e.deleteProductsDialog=!1)},null,8,["label"]),_(h,{label:e.$t("Yes"),icon:"pi pi-check",text:"",onClick:e.deleteSelectedProducts},null,8,["label","onClick"])]),default:H(()=>[o("div",ka,[Ca,e.companies?(R(),B("span",Sa,d(e.$t("Are you sure you want to delete the selected concepts?")),1)):he("",!0)])]),_:1},8,["visible","header"]),_(le,{visible:e.selectACustomerDialog,"onUpdate:visible":s[38]||(s[38]=u=>e.selectACustomerDialog=u),header:e.isChecked?e.$t("Select a provider"):e.$t("Select a customer"),id:"titleCompany",modal:!0,class:"p-fluid w-full sm:w-3/4 md:w-2/3 lg:w-1/2 max-w-4xl"},{default:H(()=>[_(K,{modelValue:e.selectedCustomer,"onUpdate:modelValue":s[35]||(s[35]=u=>e.selectedCustomer=u),options:e.customers,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:H(u=>[u.value?(R(),B("div",wa,[o("div",null,d(u.value.name),1)])):he("",!0)]),option:H(u=>[o("div",Ta,[o("div",null,d(u.option.name),1)])]),_:1},8,["modelValue","options"]),o("div",Aa,[o("div",Ea,[o("button",{class:"bg-green-500 hover:bg-green-600 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-white text-white p-2 mr-1 mr-1 rounded-md",onClick:s[36]||(s[36]=(...u)=>e.openNew&&e.openNew(...u))},[Oa,ge(" "+d(e.isChecked?e.$t("Create provider"):e.$t("Create customer")),1)]),o("button",{class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:s[37]||(s[37]=u=>e.hideDialog())},d(e.$t("Close")),1)])])]),_:1},8,["visible","header"]),_(le,{visible:e.selectAPaymentMethodDialog,"onUpdate:visible":s[42]||(s[42]=u=>e.selectAPaymentMethodDialog=u),header:e.$t("Select a payment method"),id:"titleCompany",modal:!0,class:"p-fluid w-full sm:w-3/4 md:w-2/3 lg:w-1/2 max-w-4xl"},{default:H(()=>[o("label",Da,d(e.$t("Payment method")),1),_(K,{modelValue:e.selectedPaymentMethod,"onUpdate:modelValue":s[39]||(s[39]=u=>e.selectedPaymentMethod=u),options:e.payment_methods,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:H(u=>[u.value?(R(),B("div",Pa,[o("div",null,d(u.value.name),1)])):he("",!0)]),option:H(u=>[o("div",Ra,[o("div",null,d(u.option.name),1)])]),_:1},8,["modelValue","options"]),e.isDropdownHidden?he("",!0):(R(),B("label",Ma,d(e.$t("Select an option")),1)),e.isDropdownHidden?he("",!0):(R(),et(K,{key:1,modelValue:e.selectedOption,"onUpdate:modelValue":s[40]||(s[40]=u=>e.selectedOption=u),options:e.options,filter:"",optionLabel:e.dynamicOptionLabel,class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:H(u=>[u.value?(R(),B("div",_a,[o("div",null,d(u.value[e.dynamicOptionLabel]),1)])):he("",!0)]),option:H(u=>[o("div",La,[o("div",null,d(u.option[e.dynamicOptionLabel]),1)])]),_:1},8,["modelValue","options","optionLabel"])),o("div",Fa,[o("button",{class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:s[41]||(s[41]=u=>e.hideDialog())},d(e.$t("Close")),1)])]),_:1},8,["visible","header"]),_(le,{visible:e.customerDialog,"onUpdate:visible":s[54]||(s[54]=u=>e.customerDialog=u),header:e.$t("Create company"),id:"titleCompany",modal:!0,class:"p-fluid"},{default:H(()=>[o("form",{style:{width:"800px"},onSubmit:s[53]||(s[53]=zt((...u)=>e.saveCustomer&&e.saveCustomer(...u),["prevent"]))},[o("div",Na,[o("div",null,[o("label",$a,d(e.$t("Company name")),1),ke(o("input",{type:"text",id:"name","onUpdate:modelValue":s[43]||(s[43]=u=>e.customer.name=u),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Company name"),required:""},null,8,Va),[[Re,e.customer.name]])]),o("div",null,[o("label",Ua,d(e.$t("Tax number")),1),ke(o("input",{type:"text",id:"tax_number","onUpdate:modelValue":s[44]||(s[44]=u=>e.customer.tax_number=u),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Tax number"),required:""},null,8,ja),[[Re,e.customer.tax_number]])])]),o("div",Ka,[o("label",Ba,d(e.$t("Address")),1),ke(o("input",{type:"text",id:"address1","onUpdate:modelValue":s[45]||(s[45]=u=>e.customer.address=u),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Address"),required:""},null,8,qa),[[Re,e.customer.address]])]),o("div",Ha,[o("div",null,[o("label",Ga,d(e.$t("Town")),1),ke(o("input",{type:"text",id:"town","onUpdate:modelValue":s[46]||(s[46]=u=>e.customer.town=u),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Town"),required:""},null,8,Xa),[[Re,e.customer.town]])]),o("div",null,[o("label",za,d(e.$t("Province")),1),ke(o("input",{type:"text",id:"province","onUpdate:modelValue":s[47]||(s[47]=u=>e.customer.province=u),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Province"),required:""},null,8,Ja),[[Re,e.customer.province]])]),o("div",null,[o("label",Wa,d(e.$t("Post code")),1),ke(o("input",{type:"text",id:"post_code","onUpdate:modelValue":s[48]||(s[48]=u=>e.customer.post_code=u),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Post code"),pattern:"^\\d+$",required:""},null,8,Ya),[[Re,e.customer.post_code]])]),o("div",null,[o("label",Za,d(e.$t("Country")),1),ke(o("input",{type:"text",id:"country","onUpdate:modelValue":s[49]||(s[49]=u=>e.customer.country=u),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Country"),required:""},null,8,Qa),[[Re,e.customer.country]])]),o("div",null,[o("label",er,d(e.$t("Email")),1),ke(o("input",{type:"email",id:"email","onUpdate:modelValue":s[50]||(s[50]=u=>e.customer.email=u),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("info@mycompany.com"),required:""},null,8,tr),[[Re,e.customer.email]])]),o("div",null,[o("label",nr,d(e.$t("Phone")),1),ke(o("input",{type:"tel",id:"phone","onUpdate:modelValue":s[51]||(s[51]=u=>e.customer.phone=u),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Phone"),pattern:"(?:\\+?(\\d{1,3}))?\\s?(?:\\(?\\d{1,4}\\)?)?\\s?\\d{6,10}$",required:""},null,8,or),[[Re,e.customer.phone]])])]),o("div",sr,[o("div",null,[o("button",{class:"mr-3 text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:s[52]||(s[52]=zt(u=>e.hideDialog(),["prevent"]))},d(e.$t("Close")),1),o("button",ir,d(e.$t("Save")),1)])])],32)]),_:1},8,["visible","header"])]),_:1})]),o("div",ar,[o("div",rr,[o("div",lr,[dr,o("div",ur,[o("h3",null,d(e.selectedType.name),1),o("p",null,[o("strong",null,d(e.$t("Date"))+": ",1),ge(d(e.fecha),1)]),o("p",null,[o("strong",null,d(e.$t("Expiration"))+": ",1),ge(d(e.expiration),1)]),o("p",null,[o("strong",null,d(e.$t("Number of"))+" "+d(e.selectedType.name)+":",1),ge(" "+d(e.selectedSerie.serie)+" "+d(e.selectedSerie.number),1)])])]),o("div",cr,[o("div",fr,[o("h3",null,[o("strong",null,d(e.$t("Company")),1)]),o("p",mr,d(e.selectedCompany.name),1),o("p",null,d(e.selectedCompany.tax_number),1),o("p",null,[ge(d(e.selectedCompany.address),1),hr,ge(" "+d(e.selectedCompany.post_code)+", "+d(e.selectedCompany.town)+", "+d(e.selectedCompany.province)+", "+d("(")+" "+d(e.selectedCompany.country)+" "+d(")"),1)]),o("p",null,d(e.selectedCompany.email),1),o("p",null,d(e.selectedCompany.phone),1)]),o("div",pr,[o("h3",null,[o("strong",null,d(e.$t("Customer")),1)]),o("p",gr,d(e.selectedCustomer.name),1),o("p",null,d(e.selectedCustomer.tax_number),1),o("p",null,[ge(d(e.selectedCustomer.address),1),vr,ge(" "+d(e.selectedCustomer.post_code)+", "+d(e.selectedCustomer.town)+", "+d(e.selectedCustomer.province)+", "+d("(")+" "+d(e.selectedCustomer.country)+" "+d(")"),1)]),o("p",null,d(e.selectedCustomer.email),1),o("p",null,d(e.selectedCustomer.phone),1)])]),o("table",yr,[o("thead",null,[o("tr",br,[o("th",null,d(e.$t("Reference")),1),o("th",null,d(e.$t("Description")),1),o("th",null,d(e.$t("Quantity")),1),o("th",null,d(e.$t("Price")),1),o("th",null,d(e.$t("Discount (%)")),1),o("th",null,d(e.$t("Subtotal")),1),o("th",null,d(e.$t("Tax (%)")),1),o("th",null,d(e.$t("Total")),1)])]),o("tbody",null,[(R(!0),B(bt,null,Kt(e.products,u=>(R(),B("tr",{key:u.id},[o("td",null,d(u.reference),1),o("td",null,d(u.description),1),o("td",null,d(u.quantity),1),o("td",null,d(u.price),1),o("td",null,d(u.discount),1),o("td",null,d(u.subTotal),1),o("td",null,d(u.taxes),1),o("td",null,d(e.calculateTotal(u)),1)]))),128))])]),o("div",xr,[o("div",Ir,[o("table",kr,[o("tr",null,[o("td",Cr,d(e.$t("Subtotal (excluding Tax)")),1),o("td",null,d(e.subtotal.toFixed(2))+"€",1)]),(R(!0),B(bt,null,Kt(e.taxMap,(u,ce)=>(R(),B("tr",{key:ce},[o("td",Sr,d(e.$t("Total IVA"))+" "+d(Object.values(u)[0])+" %",1),o("td",null,d(Object.values(u)[1].toFixed(2))+"€",1)]))),128)),o("tr",null,[o("td",wr,[o("strong",null,d(e.$t("Total (with IVA)")),1)]),o("td",null,[o("strong",null,d(e.totalConIVA.toFixed(2))+"€",1)])])])]),o("table",Tr,[o("tr",null,[o("td",null,d(e.$t("Payment method"))+":",1),o("td",null,d(e.selectedPaymentMethod.name),1)]),o("tr",null,[o("td",Ar,[e.selectedPaymentMethod.id===2?(R(),B("span",Er,d(""))):e.selectedPaymentMethod.id===3?(R(),B("span",Or,d(e.$t("Phone"))+":",1)):e.selectedPaymentMethod.id===4?(R(),B("span",Dr,d(e.$t("Email"))+":",1)):(R(),B("span",Pr,d(e.$t("Bank account"))+":",1))]),o("td",Rr,[e.selectedPaymentMethod.id===1?(R(),B("span",Mr,d(e.selectedBankAccount.complete_bank_account),1)):e.selectedPaymentMethod.id===3?(R(),B("span",_r,d(e.selectedPhone.phone),1)):e.selectedPaymentMethod.id===4?(R(),B("span",Lr,d(e.selectedEmail.email),1)):(R(),B("span",Fr,d("")))])])])])])])],64)}}}),Xr=io($r,[["__scopeId","data-v-e9bbe549"]]);export{Xr as default};
