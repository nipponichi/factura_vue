import{s as I}from"./dialog.esm-zV3-Whfq.js";import{c as M,a as V,s as F,d as E,b as U}from"./column.esm-DAnS-coG.js";import{s as O}from"./toolbar.esm-Cg1yzdBh.js";import{s as L}from"./document-cwdeOIw-.js";import{i as $,o as c,e as u,a as e,g as h,t as s,f,b as r,k as p,x as B,n as k,z as R,w as d,v as y,F as T,h as D,c as j,m as A}from"./app-DWSMTOA9.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={props:["documents","concepts","company","customer"],data(){return{items:[{label:this.$t("Guardar y crear nueva"),icon:"pi pi-refresh",command:()=>this.saveAndReset()},{label:this.$t("Cancelar"),command:()=>this.cancelInvoice()}],taxMap:new Map,fecha:"",expiration:"",fechaFormateada:"",loading:!0,isSaving:!1,isMobileMenuOpen:!1,showTable:!1,isDropdownOpen:!1,isDropdownOpenExport:!1,saveRestart:!1,taxTypes:[],taxValues:[],taxOptions:[{label:"0",value:0},{label:"4",value:4},{label:"5",value:5},{label:"7",value:7},{label:"8",value:8},{label:"10",value:10},{label:"16",value:16},{label:"18",value:18},{label:"21",value:21}],paymentMethods:[{id:1},{id:2},{id:3},{id:4}],imageUrl:"https://placehold.co/300x300/e2e8f0/e2e8f0",companies:null,customers:null,types:[],series:[],serie:"",counter:"",showButton:!1,productDialog:!1,documentDialog:!1,customerDialog:!1,deleteProductDialog:!1,deleteProductsDialog:!1,selectACustomerDialog:!1,selectAPaymentMethodDialog:!1,selectedOption:[],options:[],selectedBankAccount:[],selectedEmail:[],selectedPhone:[],products:[],selectedCompany:[],selectedCustomer:[],selectedType:[],selectedSerie:[],emails:[],phones:[],selectedProducts:[],selectedPaymentMethod:[],filters:{},submitted:!1,myDocument:{document_counter:"",number:"",company_id_company:"",company_id_customer:"",documents_type_id:"",documents_series_id:"",bank_account_id:"",expiration:"",date:"",amount:"",payment_methods_id:"",totalTax:"",subTotal:"",paid:!1,invoiced:!1,concept:[]}}},computed:{dynamicOptionLabel(){switch(this.selectedPaymentMethod.id){case 1:return"complete_bank_account";case 3:return"phone";case 4:return"email";default:return""}},isDropdownHidden(){return this.dynamicOptionLabel===""},subtotal(){return this.products.reduce((t,o)=>t+o.subTotal,0)},totalIVA(){return this.products.reduce((t,o)=>t+o.priceTax,0)},totalConIVA(){return this.subtotal+this.totalIVA}},created(){this.filters={global:{value:null,matchMode:$.CONTAINS}};const t=new Date,o=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),m=t.getDate().toString().padStart(2,"0");this.fecha=`${o}-${a}-${m}`,this.expiration=`${o}-${a}-${m}`},async mounted(){console.log("payment_methods mounted1"),await this.fetchPayments(),console.log(this.payment_methods),console.log("payment_methods mounted2"),this.selectedCompany=this.company,this.selectedCustomer=this.customer,this.products=this.concepts;for(let a=0;a<this.products.length;a++)this.products[a].taxes=parseFloat(this.concepts[a].tax);this.myDocument=this.documents,this.selectedType.name=this.documents.document_type_name,this.selectedType.id=this.documents.documents_type_id,this.selectedSerie.id=this.documents.documents_series_id,this.selectedSerie.serie=this.documents.document_series_serie;let o=this.documents.number.replace(this.selectedSerie.serie,"");this.selectedSerie.number=o,this.selectedPaymentMethod.id=this.documents.payment_methods_id,console.log("id metodo pago"),console.log(this.selectedPaymentMethod),this.handlePaymentMethodChange(this.selectedPaymentMethod),this.fecha=this.documents.date,this.myDocument.concept=[],this.selectedCompany.bank_account_id=this.myDocument.bank_account_id,this.selectedCompany.bank_name=this.myDocument.bank_name,this.selectedCompany.swift=this.myDocument.swift,this.selectedCompany.complete_bank_account=this.myDocument.complete_bank_account,this.fetchCompanies()},watch:{selectedPaymentMethod(t){this.handlePaymentMethodChange(t)}},methods:{handlePaymentMethodChange(t){switch(console.log("selector"),console.log(t.id),t.id){case 1:console.log("banco"),this.fetchBanks();break;case 2:console.log("contado");break;case 3:console.log("bizum"),this.fetchPhones();break;case 4:console.log("paypal"),this.fetchEmails();break}},fetchBanks(){axios.get("/banks/"+this.selectedCompany.id).then(t=>{this.banks=t.data.accounts,this.selectedBankAccount=this.banks[0],this.options=this.banks}).catch(t=>{this.$toast(this.$t("Error connecting to the server"),"error")})},fetchEmails(){axios.get("/emails/"+this.selectedCompany.id).then(t=>{this.emails=t.data.emails,this.selectedEmail=this.emails[0],this.options=this.emails}).catch(t=>{this.$toast(this.$t("Error connecting to the server"),"error")})},fetchPhones(){axios.get("/phones/"+this.selectedCompany.id).then(t=>{this.phones=t.data.phones,this.selectedPhone=this.phones[0],this.options=this.phones}).catch(t=>{this.$toast(this.$t("Error connecting to the server"),"error")})},async fetchPayments(){axios.get("/payment").then(t=>{this.payment_methods=t.data.methods,console.log(this.payment_methods)})},handleScroll(){window.scrollY>200?this.showButton=!0:this.showButton=!1},toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen},toggleDropdownExport(){this.isDropdownOpenExport=!this.isDropdownOpenExport},toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen},fetchCompanies(){axios.get("/companies-invoice").then(t=>{this.companies=t.data.companies}).catch(t=>{console.error("Error fetching phone data:",t)})},handleCompanySelection(){this.selectedCustomer=[],axios.get("/customers/"+this.selectedCompany.id).then(t=>{this.customers=t.data.customers}).catch(t=>{console.error("Error fetching phone data:",t)})},hideDialog(){this.selectACustomerDialog=!1,this.selectAPaymentMethodDialog=!1,this.customerDialog=!1,this.submitted=!1},openNew(){this.selectACustomerDialog=!1,this.customer={companyID:this.selectedCompany.id},this.submitted=!1,this.customerDialog=!0},selectACustomer(){this.selectACustomerDialog=!0},selectAPaymentMethod(){this.selectAPaymentMethodDialog=!0},saveCustomer(){axios.post("/customer",this.customer).then(t=>{this.customer.id=t.data.companyId,this.selectedCustomer=this.customer,this.customerDialog=!1}).catch(t=>{this.$toast(this.$t("Error connecting to the server"),"error"),this.customerDialog=!1})},handleCompanySelection(){this.selectedCustomer=[],axios.get("/customers/"+this.selectedCompany.id).then(t=>{this.customers=t.data.customers,this.customers.length===1&&(this.selectedCustomer=this.customers[0])}).catch(t=>{console.error("Error fetching phone data:",t)})},handleTypeSelection(){this.selectedSerie=[],axios.get("/documents-serie/"+this.selectedType.id+"/"+this.selectedCompany.id).then(t=>{this.series=t.data.series}).catch(t=>{console.error("Error fetching phone data:",t)})},selectCompany(){this.productDialog=!0},selectDocument(){this.documentDialog=!0},openFileInput(){this.$refs.fileInput.click()},handleFileChange(t){const o=t.target.files[0],a=new FileReader;a.onload=()=>{this.imageUrl=a.result},a.readAsDataURL(o)},addRow(){let t={reference:"5.01.02.003",description:"Collar",price:8,quantity:1,discount:15,discount_reason:"Descuento profesional",subtotal:0,taxes:21,priceTax:0,total:0,id:this.products.length+1};this.products.push(t)},saveAndReset(){this.saveRestart=!0,this.checkDocument()},checkDocument(){axios.get("/documents-serie/"+this.selectedType.id+"/"+this.selectedCompany.id+"/"+this.selectedSerie.serie).then(t=>{if(this.date=t.data.date.date,this.serie=t.data.serie.number,this.selectedSerie.number<=this.serie)switch(prompt(`El número de documento ya existe. ¿Qué deseas hacer?
1. Conservar el número ingresado: ${this.selectedSerie.serie}${this.selectedSerie.number} 
2. Asignar el siguiente valor disponible: ${this.selectedSerie.serie}${++this.serie}`)){case null:this.$toast(this.$t("Operation cancelled."),"error");break;case"1":this.$toast(this.$t("The number entered will be retained: ")+this.selectedSerie.serie+this.selectedSerie.number,"success"),this.serie="",this.saveDocument();break;case"2":this.selectedSerie.number=this.serie,this.$toast(this.$t("The following available number has been assigned: ")+this.selectedSerie.serie+this.selectedSerie.number,"success"),this.serie="",this.saveDocument();break;default:this.$toast(this.$t("Invalid input."),"error")}else if(this.date>this.fecha){let o=this.dateFormat(this.date),a=this.dateFormat(this.fecha);switch(prompt(`La fecha seleccionada es anterior a la de la última factura, ¿deseas asignarle la fecha actual?
1. Conservar la fecha seleccionada: ${a} 
2. Asignar la fecha actual: ${o}`)){case null:this.$toast(this.$t("Operation cancelled."),"error");break;case"1":this.$toast(this.$t("The date will be retained: ")+this.fecha,"success"),this.saveDocument();break;case"2":const n=new Date,i=n.getFullYear(),g=(n.getMonth()+1).toString().padStart(2,"0"),C=n.getDate().toString().padStart(2,"0");this.fecha=`${i}-${g}-${C}`,this.$toast(this.$t("The current date has been assigned."),"success"),this.saveDocument();break;default:this.$toast(this.$t("Invalid input."),"error")}}else this.saveDocument()}).catch(t=>{this.$toast(this.$t("Error saving document data."),"error")})},myDocumentSave(){this.myDocument.number=this.selectedSerie.serie+this.selectedSerie.number,this.myDocument.document_counter=this.selectedSerie.number,this.myDocument.expiration=this.expiration,this.myDocument.payment_methods_id=this.selectedPaymentMethod.id,this.myDocument.company_id_company=this.selectedCompany.id,this.myDocument.company_id_customer=this.selectedCustomer.id,this.myDocument.documents_type_id=this.selectedType.id,this.myDocument.documents_series_id=this.selectedSerie.id,this.myDocument.date=this.fecha,this.myDocument.document_counter=1,this.myDocument.bank_account_id=this.selectedCompany.bank_account_id,this.myDocument.subTotal=this.subtotal.toFixed(2),this.myDocument.totalTax=this.totalIVA.toFixed(2),this.myDocument.amount=this.totalConIVA.toFixed(2)},saveDocument(){this.myDocumentSave(),this.selectedType.id==1&&(this.myDocument.invoiced=!0),this.products.forEach(t=>{try{let o={reference:t.reference,description:t.description,quantity:t.quantity,price:t.price,taxes:t.taxes,discount:t.discount,discount_reason:t.discount_reason,total:this.calculateTotal(t)};this.myDocument.concept.push(o)}catch(o){console.error("Error al crear el objeto newProduct:",o)}}),axios.post("/documents",{documentData:this.myDocument}).then(t=>{this.$toast(this.$t("Invoice saved correctly."),"success"),this.myDocument.concept=[],this.saveRestart&&this.resetData()}).catch(t=>{this.$toast(this.$t("Error saving invoice."),"error"),this.myDocument.concept=[]})},resetData(){this.isSaving=!0,setTimeout(function(){window.location.reload()},3e3)},calculateGross(t){return t.quantity*t.price},calculateTax(t){return t.priceTax=parseFloat(t.taxes/100*t.subTotal),t.priceTax},calculateTotal(t){let o=this.calculateTax(t);return t.total=o+t.subTotal,t.total.toFixed(2)},calculateSubtotal(t){let o=parseFloat(t.quantity)*parseFloat(t.price);return t.subTotal=o-t.discount/100*o,t.subTotal},confirmDeleteProduct(t){this.product=t,this.deleteProductDialog=!0},deleteProduct(){this.products=this.products.filter(t=>t.id!==this.product.id),this.product=null,this.deleteProductDialog=!1},confirmDeleteSelected(){this.deleteProductsDialog=!0},deleteSelectedProducts(){this.selectedProducts.forEach(t=>{this.products=this.products.filter(o=>o.id!==t.id)}),this.selectedProducts=[],this.deleteProductsDialog=!1},dateFormat(t){let o=new Date(t),a=o.getDate(),m=o.getMonth()+1,n=o.getFullYear();return a<10&&(a="0"+a),m<10&&(m="0"+m),`${a}/${m}/${n}`},manejarFecha(){let t=this.dateFormat(this.fecha),o=prompt(`La fecha seleccionada (${t}) es anterior a la de la última factura, ¿deseas asignarle la fecha actual?
1. Conservar la fecha seleccionada. 
2. Asignar la fecha actual.`);if(o==="1")console.log("Se conservará la fecha seleccionada:",t);else if(o==="2"){let a=new Date().toISOString().split("T")[0],m=this.dateFormat(a);console.log("Se asignará la fecha actual:",m)}else console.log("Opción no válida.")},calcularImporteBase(t,o){return t<=0?0:o/(t/100)},exportToPDF(){this.myDocumentSave(),this.calculateTaxes().then(()=>{this.showTable=!this.showTable,window.print()}).catch(t=>{this.$toast(this.$t("Could not generate the PDF."),"error")})},exportToXML(){try{this.myDocumentSave(),this.calculateTaxes().then(()=>{this.myDocument.document_counter=1;const t=this.convertToFacturaeXML();this.$toast(this.$t("XML document generated correctly."),"success"),this.downloadXML(t,"facturae.xml")}).catch(t=>{this.$toast(this.$t("Could not generate the XML."),"error")})}catch{this.$toast(this.$t("An unexpected error occurred."),"error")}},convertToFacturaeXML(){let t=`<?xml version="1.0" encoding="UTF-8"?>
            <fe:Facturae xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:fe="http://www.facturae.es/Facturae/2014/v3.2.1/Facturae">
                <FileHeader>
                    <SchemaVersion>3.2.1</SchemaVersion>
                    <Modality>I</Modality>
                    <InvoiceIssuerType>EM</InvoiceIssuerType>
                    <Batch>
                        <BatchIdentifier>${this.selectedCompany.tax_number}${this.selectedSerie.number}${this.selectedSerie.serie}</BatchIdentifier>
                        <InvoicesCount>${this.myDocument.document_counter}</InvoicesCount>
                        <TotalInvoicesAmount>
                            <TotalAmount>${this.myDocument.amount}</TotalAmount>
                        </TotalInvoicesAmount>
                        <TotalOutstandingAmount>
                            <TotalAmount>${this.myDocument.amount}</TotalAmount>
                        </TotalOutstandingAmount>
                        <TotalExecutableAmount>
                            <TotalAmount>${this.myDocument.amount}</TotalAmount>
                        </TotalExecutableAmount>
                        <InvoiceCurrencyCode>EUR</InvoiceCurrencyCode>
                    </Batch>
                </FileHeader> 
                
                <Parties>
                    <SellerParty>
                        <TaxIdentification>
                            <PersonTypeCode>J</PersonTypeCode>
                            <ResidenceTypeCode>R</ResidenceTypeCode>
                            <TaxIdentificationNumber>${this.selectedCompany.tax_number}</TaxIdentificationNumber>
                        </TaxIdentification>
                        <LegalEntity>
                            <CorporateName>${this.selectedCompany.name}</CorporateName>
                            <AddressInSpain>
                                <Address>${this.selectedCompany.address}</Address>
                                <PostCode>${this.selectedCompany.post_code}</PostCode>
                                <Town>${this.selectedCompany.town}</Town>
                                <Province>${this.selectedCompany.province}</Province>
                                <CountryCode>ESP</CountryCode>
                            </AddressInSpain>
                            <ContactDetails>
                                <Telephone>${this.selectedCompany.phone}</Telephone>
                                <ElectronicMail>${this.selectedCompany.email}</ElectronicMail>
                            </ContactDetails>
                        </LegalEntity>
                    </SellerParty>
                    
                    <BuyerParty>
                        <TaxIdentification>
                            <PersonTypeCode>J</PersonTypeCode>
                            <ResidenceTypeCode>R</ResidenceTypeCode>
                            <TaxIdentificationNumber>${this.selectedCustomer.tax_number}</TaxIdentificationNumber>
                        </TaxIdentification>
                        <LegalEntity>
                            <CorporateName>${this.selectedCustomer.name}</CorporateName>
                            <AddressInSpain>
                                <Address>${this.selectedCustomer.address}</Address>
                                <PostCode>${this.selectedCustomer.post_code}</PostCode>
                                <Town>${this.selectedCustomer.town}</Town>
                                <Province>${this.selectedCustomer.province}</Province>
                                <CountryCode>ESP</CountryCode>
                            </AddressInSpain>
                            <ContactDetails>
                                <Telephone>${this.selectedCustomer.phone}</Telephone>
                                <ElectronicMail>${this.selectedCustomer.email}</ElectronicMail>
                            </ContactDetails>
                        </LegalEntity>
                    </BuyerParty>
                    
                </Parties>
                <Invoices>
                    <Invoice>
                        <InvoiceHeader>
                            <InvoiceNumber>${this.selectedSerie.number}</InvoiceNumber>
                            <InvoiceSeriesCode>${this.selectedSerie.serie}</InvoiceSeriesCode>
                            <InvoiceDocumentType>FC</InvoiceDocumentType>
                            <InvoiceClass>OO</InvoiceClass>
                        </InvoiceHeader>
                        <InvoiceIssueData>
                            <IssueDate>${this.myDocument.date}</IssueDate>
                            <InvoiceCurrencyCode>EUR</InvoiceCurrencyCode>
                            <TaxCurrencyCode>EUR</TaxCurrencyCode>
                            <LanguageName>es</LanguageName>
                        </InvoiceIssueData>
                        <TaxesOutputs>
`;return this.taxMap.forEach((o,a)=>{t+=`  <Tax>
`,t+=`    <TaxTypeCode>01</TaxTypeCode>
`,t+=`    <TaxRate>${parseFloat(a).toFixed(2)}</TaxRate>
`,t+=`    <TaxableBase>
`,t+=`      <TotalAmount>${this.calcularImporteBase(a,o).toFixed(2)}</TotalAmount>
`,t+=`    </TaxableBase>
`,t+=`    <TaxAmount>
`,t+=`      <TotalAmount>${o.toFixed(2)}</TotalAmount>
`,t+=`    </TaxAmount>
`,t+=`  </Tax>
`}),t+=`</TaxesOutputs>
                        <InvoiceTotals>
                            <TotalGrossAmount>${this.subtotal.toFixed(2)}</TotalGrossAmount>
                            <TotalGeneralDiscounts>0.0</TotalGeneralDiscounts>
                            <TotalGeneralSurcharges>0.0</TotalGeneralSurcharges>
                            <TotalGrossAmountBeforeTaxes>${this.subtotal.toFixed(2)}</TotalGrossAmountBeforeTaxes>
                            <TotalTaxOutputs>${this.totalIVA.toFixed(2)}</TotalTaxOutputs>
                            <TotalTaxesWithheld>0.0</TotalTaxesWithheld>
                            <InvoiceTotal>${this.myDocument.amount}</InvoiceTotal>
                            <TotalOutstandingAmount>${this.myDocument.amount}</TotalOutstandingAmount>
                            <TotalExecutableAmount>${this.myDocument.amount}</TotalExecutableAmount>
                        </InvoiceTotals>
                        <Items>`,this.products.forEach(o=>{t+=`
                    <InvoiceLine>
                        <ItemDescription>${o.description}</ItemDescription>
                        <Quantity>${o.quantity}</Quantity>
                        <UnitOfMeasure>01</UnitOfMeasure>
                        <UnitPriceWithoutTax>${o.price}</UnitPriceWithoutTax>
                        <TotalCost>${o.quantity*o.price}</TotalCost>
                        <DiscountsAndRebates>
                            <Discount>
                                <DiscountReason>${o.discount_reason}</DiscountReason>
                                <DiscountRate>${parseFloat(o.discount).toFixed(1)}</DiscountRate>
                                <DiscountAmount>${(o.quantity*o.price*(o.discount/100)).toFixed(1)}</DiscountAmount>
                            </Discount>
                        </DiscountsAndRebates>
                        <GrossAmount>${o.subTotal}</GrossAmount>
                        <TaxesOutputs>
                            <Tax>
                                <TaxTypeCode>01</TaxTypeCode>
                                <TaxRate>${o.taxes}</TaxRate>
                                <TaxableBase>
                                    <TotalAmount>${o.subTotal}</TotalAmount>
                                </TaxableBase>
                                <TaxAmount>
                                    <TotalAmount>${o.priceTax.toFixed(2)}</TotalAmount>
                                </TaxAmount>
                            </Tax>
                        </TaxesOutputs>
                    </InvoiceLine>`}),t+=`
                        </Items>
                    </Invoice>
                </Invoices>
            </fe:Facturae>`,t},downloadXML(t,o){const a=new Blob([t],{type:"application/xml"}),m=document.createElement("a");m.href=URL.createObjectURL(a),m.download=o,m.click(),URL.revokeObjectURL(m.href)},cancelInvoice(){confirm("¿Está seguro? Los datos de esta factura serán descartados")&&this.resetData()},calculateTaxes(){return new Promise((t,o)=>{try{this.taxMap.clear(),this.products.forEach(a=>{let m=a.taxes,n=parseFloat(a.priceTax);if(this.taxMap.has(m)){let i=this.taxMap.get(m);this.taxMap.set(m,i+n)}else this.taxMap.set(m,n)}),t()}catch(a){o(a)}})}}},G={class:"no-imprimir"},X={class:"py-12"},z={class:"max-w-10xl mx-auto sm:px-6 lg:px-24"},H={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},W={class:"card"},Y={class:"relative inline-block flex mb-5"},Q={class:"font-bold text-lg"},J=e("i",{class:"pi pi-plus mr-2"},null,-1),K={class:"md:flex justify-between items-center"},Z={class:"flex flex-col md:flex-row justify-start items-center"},ee={class:"flex flex-wrap justify-start items-center"},te={class:"relative inline-block w-50"},se={class:"flex items-center ml-2"},oe={for:"link-checkbox",class:"ms-2 mr-2 text-sm font-medium text-gray-900 dark:text-gray-300"},le={class:"flex items-center"},ne={id:"app",class:"relative inline-block w-50 ml-2"},ie={class:"flex"},ae=["disabled"],re=e("i",{class:"pi pi-plus mr-2"},null,-1),de=["disabled"],ce=e("i",{class:"pi pi-upload mr-2"},null,-1),ue={class:"absolute right-0 w-48 bg-white border border-gray-300 rounded shadow-lg"},me=e("i",{class:"pi pi-file-pdf mr-2"},null,-1),he=e("i",{class:"pi pi-file-export mr-2"},null,-1),pe={class:"split-button-container ml-2"},be=e("hr",{class:"linea-grosor mt-5"},null,-1),ye={class:"selector flex flex-col md:flex-row justify-between mt-6 ml-12"},fe={class:"showCustomer"},ge={class:"grid md:grid-cols-1 text-m gap-y-1"},ve={class:"flex items-center justify-between w-full"},_e={class:"font-semibold mr-3 flex-shrink-0 w-32"},xe={class:"text-gray-700 w-full font-bold text-lg"},we={class:"flex items-center justify-between w-full"},ke={class:"font-semibold mr-3 flex-shrink-0 w-32"},Ce={class:"text-gray-700 w-full uppercase"},Te={class:"flex items-center justify-between w-full"},De={class:"font-semibold mr-3 flex-shrink-0 w-32"},Ae={class:"text-gray-700 w-full"},Pe={class:"flex items-center justify-between w-full"},Se={class:"font-semibold mr-3 flex-shrink-0 w-32"},Ie={class:"text-gray-700 w-full"},Me={class:"flex items-center justify-between w-full"},Ve={class:"font-semibold mr-3 flex-shrink-0 w-32"},Fe={class:"text-gray-700 w-full"},Ee={class:"grid md:grid-cols-1 text-sm gap-y-1 mr-28"},Ue={class:"flex items-center justify-between w-full"},Oe={class:"font-semibold mr-3 min-w-20 flex-shrink-0"},Le={class:"text-gray-700 ml-3 flex-shrink-0 font-bold text-lg"},$e={class:"flex items-center justify-between w-full"},Be={class:"font-semibold mr-3 flex-shrink-0"},Re={class:"flex items-center justify-between w-full"},je={class:"font-semibold mr-3 flex-shrink-0"},qe={class:"flex items-center justify-between"},Ne={class:"flex items-center"},Ge=e("div",{class:"flex-grow"},null,-1),Xe={class:"relative rounded-md shadow-sm"},ze=["placeholder"],He=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),We={key:0,class:"flex justify-end mt-4 pr-4"},Ye={class:"hidden md:flex justify-between mt-4 pr-4 mb-4"},Qe={class:"totals-container w-1/3"},Je=e("i",{class:"pi pi-plus"},null,-1),Ke={class:"ml-4 totals p-4 rounded-md"},Ze={class:"w-full"},et={class:"text-gray-600 pr-4"},tt={class:"pl-4"},st=e("tr",null,[e("td",{colspan:"2"},[e("hr",{class:"my-2 border-gray-300"})])],-1),ot={class:"text-gray-600 pr-4"},lt={key:0},nt={key:1},it={key:2},at={key:3},rt={class:"pl-4"},dt={key:0},ct={key:1},ut={key:2},mt={key:3},ht=e("div",{class:"w-1/12"},null,-1),pt={class:"totals-container w-1/3"},bt={class:"totals p-4 rounded-md"},yt={class:"w-full"},ft={class:"text-gray-600 pr-4"},gt={class:"pl-4"},vt=e("hr",{class:"my-2 border-gray-300"},null,-1),_t={class:"text-gray-600 pr-4"},xt={class:"pl-4"},wt=e("hr",{class:"my-2 border-gray-300"},null,-1),kt={class:"text-gray-600 pr-4"},Ct={class:"pl-4"},Tt={class:"flex flex-wrap justify-between mt-4 pr-4 mb-4 md:hidden"},Dt={class:"totals-container w-full md:w-1/3 flex flex-col mb-4 md:mb-0"},At=e("i",{class:"pi pi-plus"},null,-1),Pt={class:"ml-4 totals p-4 rounded-md flex-grow"},St={class:"w-full"},It={class:"text-gray-600 pr-4"},Mt={class:"pl-4"},Vt=e("tr",null,[e("td",{colspan:"2"},[e("hr",{class:"my-2 border-gray-300"})])],-1),Ft={class:"text-gray-600 pr-4"},Et={class:"pl-4"},Ut=e("div",{class:"hidden md:block w-1/12"},null,-1),Ot={class:"totals-container w-full md:w-1/3 flex flex-col"},Lt={class:"ml-4 totals bg-gray-100 p-4 rounded-md flex-grow"},$t={class:"w-full"},Bt={class:"text-gray-600 pr-4"},Rt={class:"pl-4"},jt={class:"text-gray-600 pr-4"},qt={class:"pl-4"},Nt={class:"text-gray-600 pr-4"},Gt={class:"pl-4"},Xt={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},zt={key:0,class:"flex align-items-center"},Ht={class:"flex align-items-center"},Wt={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},Yt={key:0,class:"flex align-items-center"},Qt={class:"flex align-items-center"},Jt={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},Kt={key:0,class:"flex align-items-center"},Zt={class:"flex align-items-center"},es={class:"confirmation-content"},ts=e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ss={key:0},os={class:"confirmation-content"},ls=e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ns={key:0},is={key:0,class:"flex align-items-center"},as={class:"flex align-items-center"},rs={class:"grid gap-3 md:grid-cols-1 justify-items"},ds={class:"flex justify-between"},cs=e("i",{class:"pi pi-plus"},null,-1),us={for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},ms={key:0,class:"flex items-center"},hs={class:"flex items-center"},ps={key:0,for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},bs={key:0,class:"flex items-center"},ys={class:"flex items-center"},fs={class:"flex justify-end"},gs={class:"grid gap-3 mb-6 md:grid-cols-2"},vs={for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},_s=["placeholder","required"],xs={for:"tax_number",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},ws=["placeholder","required"],ks={class:"mb-6"},Cs={for:"address",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Ts=["placeholder","required"],Ds={class:"grid gap-3 mb-6 md:grid-cols-2"},As={for:"town",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Ps=["placeholder","required"],Ss={for:"province",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Is=["placeholder","required"],Ms={for:"post_code",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Vs=["placeholder","required"],Fs={for:"country",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Es=["placeholder","required"],Us={for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Os=["placeholder","required"],Ls={for:"phone",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},$s=["placeholder","required"],Bs={class:"grid gap-3 md:grid-cols-1 justify-items-end"},Rs={type:"submit",class:"text-white bg-blue-600 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},js={class:"imprimir"},qs={class:"invoice"},Ns={class:"invoice-header"},Gs=e("div",{class:"logo"},[e("img",{src:"https://d1csarkz8obe9u.cloudfront.net/posterpreviews/company-logo-design-template-e089327a5c476ce5c70c74f7359c5898_screen.jpg?ts=1672291305",alt:"Logo de la empresa"})],-1),Xs={class:"invoice_details"},zs={class:"invoice-info"},Hs={class:"company-details"},Ws={class:"name"},Ys=e("br",null,null,-1),Qs={class:"customer-details"},Js={class:"name"},Ks=e("br",null,null,-1),Zs={class:"invoice-table"},eo={class:"header"},to={class:"table-break"},so={class:"table-container"},oo={class:"totals"},lo={class:"title"},no={class:"title"},io={class:"title"},ao={class:"bank"},ro={class:"text-gray-600 pr-4"},co={key:0},uo={key:1},mo={key:2},ho={key:3},po={class:"pl-4"},bo={key:0},yo={key:1},fo={key:2},go={key:3};function vo(t,o,a,m,n,i){const g=M,C=L,P=O,v=F,_=E,x=U,S=V,w=I;return c(),u(T,null,[e("div",G,[e("div",X,[e("div",z,[e("div",H,[e("div",W,[e("div",Y,[!n.loading&&n.companies.length>0?(c(),u("button",{key:0,type:"button",class:"px-4 py-2 bg-black text-white border border-gray-200 rounded-md flex items-center justify-between",onClick:o[0]||(o[0]=(...l)=>i.selectCompany&&i.selectCompany(...l))},[e("span",Q,[J,h(" "+s(n.selectedCompany.name),1)])])):f("",!0)]),e("div",K,[e("div",Z,[e("div",ee,[e("div",te,[r(g,{label:t.$t("Customer"),icon:"pi pi-plus",class:"success-button text-white p-2",onClick:o[1]||(o[1]=l=>i.selectACustomer())},null,8,["label"])]),e("div",se,[e("label",oe,s(t.$t("Mark as paid")),1),p(e("input",{id:"link-checkbox",type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=l=>n.myDocument.paid=l),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[B,n.myDocument.paid]])])])]),e("div",le,[e("div",ne,[e("div",ie,[e("button",{type:"button",class:k(["px-4 py-2 mr-2 success-button text-white rounded flex items-center justify-between",{"opacity-50":!n.selectedCompany.id}]),onClick:o[3]||(o[3]=l=>i.selectDocument()),disabled:!n.selectedCompany.id},[e("span",null,[re,h(" "+s(t.$t("Document type")),1)])],10,ae),e("button",{type:"button",class:k(["px-4 py-2 bg-purple-600 text-white rounded-md flex items-center justify-between",{"opacity-50":i.totalConIVA<=0||n.isSaving||!n.selectedCustomer.id}]),onClick:o[4]||(o[4]=(...l)=>i.toggleDropdownExport&&i.toggleDropdownExport(...l)),disabled:i.totalConIVA<=0||n.isSaving},[ce,h(" "+s(t.$t("Export")),1)],10,de)]),p(e("div",ue,[e("button",{type:"button",class:"px-4 py-2 rounded-l flex items-center justify-between",onClick:o[5]||(o[5]=l=>i.exportToPDF())},[e("span",null,[me,h(" "+s(t.$t("PDF")),1)])]),e("button",{type:"button",class:"px-4 py-2 rounded-r flex items-center",onClick:o[6]||(o[6]=l=>i.exportToXML())},[e("span",null,[he,h(" "+s(t.$t("XML")),1)])])],512),[[R,n.isDropdownOpenExport]])]),e("div",pe,[r(C,{class:k(["blue-button",{"opacity-50":i.totalConIVA<=0||n.isSaving||!n.selectedCustomer.id}]),label:t.$t("Save"),onClick:i.checkDocument,model:n.items,disabled:i.totalConIVA<=0||n.isSaving},{icon:d(()=>[e("i",{class:k(["pi pi-save mr-2",{"opacity-50":i.totalConIVA<=0}])},null,2)]),_:1},8,["label","onClick","model","disabled","class"])])])]),be,e("div",ye,[e("div",fe,[e("div",ge,[e("div",ve,[e("div",_e,s(t.$t("Customer"))+":",1),e("div",xe,s(n.selectedCustomer.name),1)]),e("div",we,[e("div",ke,s(t.$t("Tax number"))+":",1),e("div",Ce,s(n.selectedCustomer.tax_number),1)]),e("div",Te,[e("div",De,s(t.$t("Phone"))+":",1),e("div",Ae,s(n.selectedCustomer.phone),1)]),e("div",Pe,[e("div",Se,s(t.$t("Email"))+":",1),e("div",Ie,s(n.selectedCustomer.email),1)]),e("div",Me,[e("div",Ve,s(t.$t("Address"))+":",1),e("div",Fe,s(n.selectedCustomer.address)+", "+s(n.selectedCustomer.post_code)+", "+s(n.selectedCustomer.town)+", "+s(n.selectedCustomer.province)+" ( "+s(n.selectedCustomer.country)+" ) ",1)])])]),e("div",Ee,[e("div",Ue,[e("div",Oe,"Nº "+s(n.selectedType.name)+":",1),e("div",Le,s(n.selectedSerie.serie)+"  / ",1),p(e("input",{type:"text",class:"border border-gray-300 rounded-md w-48 px-3 py-2 focus:outline-none focus:border-blue-400","onUpdate:modelValue":o[7]||(o[7]=l=>n.selectedSerie.number=l)},null,512),[[y,n.selectedSerie.number]])]),e("div",$e,[e("div",Be,s(t.$t("Date"))+":",1),p(e("input",{type:"date","onUpdate:modelValue":o[8]||(o[8]=l=>n.fecha=l),onChange:o[9]||(o[9]=(...l)=>t.cambiarFormatoFecha&&t.cambiarFormatoFecha(...l)),class:"border border-gray-300 rounded-md w-48 px-3 py-2 focus:outline-none focus:border-blue-400"},null,544),[[y,n.fecha]])]),e("div",Re,[e("div",je,s(t.$t("Expiration"))+":",1),p(e("input",{type:"date","onUpdate:modelValue":o[10]||(o[10]=l=>n.expiration=l),onChange:o[11]||(o[11]=(...l)=>t.cambiarFormatoFecha&&t.cambiarFormatoFecha(...l)),class:"border border-gray-300 rounded-md w-48 px-3 py-2 focus:outline-none focus:border-blue-400"},null,544),[[y,n.expiration]])])])]),r(P,{class:"mb-4 mt-8 border border-slate-200 ..."},{start:d(()=>[e("div",qe,[e("div",Ne,[r(g,{label:t.$t("Concept"),icon:"pi pi-plus",severity:"success",class:"mr-2 success-button",onClick:i.addRow},null,8,["label","onClick"]),r(g,{label:t.$t("Delete"),icon:"pi pi-trash",severity:"danger",class:"danger-button",onClick:i.confirmDeleteSelected,disabled:!n.selectedProducts||!n.selectedProducts.length},null,8,["label","onClick","disabled"])]),Ge])]),end:d(()=>[e("div",Xe,[p(e("input",{type:"search",class:"block w-full h-11 rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm","onUpdate:modelValue":o[12]||(o[12]=l=>n.filters.global.value=l),placeholder:t.$t("Search...")},null,8,ze),[[y,n.filters.global.value]]),He])]),_:1}),r(S,{ref:"dt",value:n.products,selection:n.selectedProducts,"onUpdate:selection":o[13]||(o[13]=l=>n.selectedProducts=l),dataKey:"id",class:"w-full lg:w-4/4 mx-auto"},{default:d(()=>[r(v,{selectionMode:"multiple",exportable:!1,class:"datetable checkbox"}),r(v,{field:"reference",header:t.$t("Reference"),sortable:"",class:"dateTable w-1/4"},{body:d(l=>[r(_,{class:"input w-full",placeholder:t.$t("Reference"),modelValue:l.data.reference,"onUpdate:modelValue":b=>l.data.reference=b},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),r(v,{field:"product",header:t.$t("Description"),sortable:"",class:"dateTable w-full"},{body:d(l=>[r(_,{class:"input w-full",placeholder:t.$t("Description"),modelValue:l.data.description,"onUpdate:modelValue":b=>l.data.description=b},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),r(v,{field:"quantity",header:t.$t("Quantity"),sortable:"",class:"dateTable w-1/8"},{body:d(l=>[r(_,{class:"input input-short w-full",modelValue:l.data.quantity,"onUpdate:modelValue":b=>l.data.quantity=b},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),r(v,{field:"price",header:t.$t("Price"),sortable:"",class:"dateTable w-1/4"},{body:d(l=>[r(_,{class:"input input-short w-full",modelValue:l.data.price,"onUpdate:modelValue":b=>l.data.price=b},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),r(v,{field:"discount",header:t.$t("Discount (%)"),sortable:"",class:"dateTable w-1/4"},{body:d(l=>[r(_,{class:"input input-short w-full",modelValue:l.data.discount,"onUpdate:modelValue":b=>l.data.discount=b},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),r(v,{field:"subTotal",header:t.$t("Subtotal"),sortable:"",class:"dateTable w-1/12"},{body:d(l=>[r(_,{class:"input input-short w-1/12",value:i.calculateSubtotal(l.data),readonly:""},null,8,["value"])]),_:1},8,["header"]),r(v,{field:"taxes",header:t.$t("Tax (%)"),sortable:"",class:"dateTable w-1/4"},{body:d(l=>[r(x,{class:"input-short w-full",modelValue:l.data.taxes,"onUpdate:modelValue":b=>l.data.taxes=b,options:n.taxOptions,optionLabel:"label",optionValue:"value"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1},8,["header"]),r(v,{field:"total",header:t.$t("Total"),sortable:"",class:"dateTable w-1/12"},{body:d(l=>[r(_,{class:"input input-short w-1/12",value:i.calculateTotal(l.data),readonly:""},null,8,["value"])]),_:1},8,["header"]),r(v,{exportable:!1,header:t.$t("Utility"),class:"dateTable w-1/12"},{body:d(l=>[r(g,{icon:"pi pi-trash",outlined:"",rounded:"",class:"simpleDelete-button",severity:"danger",onClick:b=>i.confirmDeleteProduct(l.data)},null,8,["onClick"])]),_:1},8,["header"])]),_:1},8,["value","selection"]),n.showButton?(c(),u("div",We,[r(g,{label:t.$t("Concept"),icon:"pi pi-plus",severity:"success",class:"success-button",onClick:o[14]||(o[14]=l=>i.addRow())},null,8,["label"])])):f("",!0),e("div",Ye,[e("div",Qe,[e("button",{class:"ml-4 mb-2 success-button text-white rounded-md p-2",onClick:o[15]||(o[15]=l=>i.selectAPaymentMethod())},[Je,h(" "+s(t.$t("Payment method")),1)]),e("div",Ke,[e("table",Ze,[e("tbody",null,[e("tr",null,[e("td",et,s(t.$t("Payment method"))+":",1),e("td",tt,s(n.selectedPaymentMethod.name),1)]),st,e("tr",null,[e("td",ot,[n.selectedPaymentMethod.id===2?(c(),u("span",lt,s(""))):n.selectedPaymentMethod.id===3?(c(),u("span",nt,s(t.$t("Phone"))+":",1)):n.selectedPaymentMethod.id===4?(c(),u("span",it,s(t.$t("Email"))+":",1)):(c(),u("span",at,s(t.$t("Bank account"))+":",1))]),e("td",rt,[n.selectedPaymentMethod.id===2?(c(),u("span",dt,s(""))):n.selectedPaymentMethod.id===3?(c(),u("span",ct,s(n.selectedPhone.phone),1)):n.selectedPaymentMethod.id===4?(c(),u("span",ut,s(n.selectedEmail.email),1)):(c(),u("span",mt,s(n.selectedBankAccount.complete_bank_account),1))])])])])])])]),ht,e("div",pt,[e("button",{class:"ml-4 mb-5 rounded-md",onClick:o[16]||(o[16]=l=>i.selectAPaymentMethod())}),e("div",bt,[e("table",yt,[e("tbody",null,[e("tr",null,[e("td",ft,s(t.$t("Subtotal (excluding Tax)"))+":",1),e("td",gt,s(i.subtotal.toFixed(2))+"€",1)]),vt,e("tr",null,[e("td",_t,s(t.$t("Total Tax"))+":",1),e("td",xt,s(i.totalIVA.toFixed(2))+"€",1)]),wt,e("tr",null,[e("td",kt,s(t.$t("Total (with IVA)"))+":",1),e("td",Ct,s(i.totalConIVA.toFixed(2))+"€",1)])])])])])])]),e("div",Tt,[e("div",Dt,[e("button",{class:"ml-4 mb-2 success-button rounded-md",onClick:o[17]||(o[17]=l=>i.selectAPaymentMethod())},[At,h(" "+s(t.$t("Payment method")),1)]),e("div",Pt,[e("table",St,[e("tbody",null,[e("tr",null,[e("td",It,s(t.$t("Payment method"))+":",1),e("td",Mt,s(n.selectedPaymentMethod.name),1)]),Vt,e("tr",null,[e("td",Ft,s(t.$t("Bank account"))+":",1),e("td",Et,s(n.selectedBankAccount.complete_bank_account),1)])])])])]),Ut,e("div",Ot,[e("div",Lt,[e("table",$t,[e("tbody",null,[e("tr",null,[e("td",Bt,s(t.$t("Subtotal (excluding Tax)"))+":",1),e("td",Rt,s(i.subtotal.toFixed(2))+"€",1)]),e("tr",null,[e("td",jt,s(t.$t("Total Tax"))+":",1),e("td",qt,s(i.totalIVA.toFixed(2))+"€",1)]),e("tr",null,[e("td",Nt,s(t.$t("Total (with IVA)"))+":",1),e("td",Gt,s(i.totalConIVA.toFixed(2))+"€",1)])])])])])])])]),r(w,{visible:n.productDialog,"onUpdate:visible":o[19]||(o[19]=l=>n.productDialog=l),header:t.$t("Select companies"),modal:!0,onChange:i.handleCompanySelection,class:"p-fluid w-full sm:w-3/4 md:w-2/3 lg:w-1/2 max-w-4xl"},{default:d(()=>[e("label",Xt,s(t.$t("Select your company"))+":",1),r(x,{modelValue:n.selectedCompany,"onUpdate:modelValue":o[18]||(o[18]=l=>n.selectedCompany=l),options:n.companies,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500",onChange:i.handleCompanySelection},{value:d(l=>[l.value?(c(),u("div",zt,[e("div",null,s(l.value.name),1)])):f("",!0)]),option:d(l=>[e("div",Ht,[e("div",null,s(l.option.name),1)])]),_:1},8,["modelValue","options","onChange"])]),_:1},8,["visible","header","onChange"]),r(w,{visible:n.documentDialog,"onUpdate:visible":o[22]||(o[22]=l=>n.documentDialog=l),style:{width:"450px"},header:t.$t("Select document"),modal:!0,onChange:i.handleTypeSelection},{default:d(()=>[e("label",Wt,s(t.$t("Select document type")),1),r(x,{modelValue:n.selectedType,"onUpdate:modelValue":o[20]||(o[20]=l=>n.selectedType=l),options:n.types,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500",onChange:i.handleTypeSelection},{value:d(l=>[l.value?(c(),u("div",Yt,[e("div",null,s(l.value.name),1)])):f("",!0)]),option:d(l=>[e("div",Qt,[e("div",null,s(l.option.name),1)])]),_:1},8,["modelValue","options","onChange"]),e("label",Jt,s(t.$t("Select document serie")),1),r(x,{modelValue:n.selectedSerie,"onUpdate:modelValue":o[21]||(o[21]=l=>n.selectedSerie=l),options:n.series,filter:"",optionLabel:"serie",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:d(l=>[l.value?(c(),u("div",Kt,[e("div",null,s(l.value.serie),1)])):f("",!0)]),option:d(l=>[e("div",Zt,[e("div",null,s(l.option.serie),1)])]),_:1},8,["modelValue","options"])]),_:1},8,["visible","header","onChange"]),r(w,{visible:n.deleteProductDialog,"onUpdate:visible":o[24]||(o[24]=l=>n.deleteProductDialog=l),style:{width:"450px"},header:t.$t("Confirm"),modal:!0},{footer:d(()=>[r(g,{label:t.$t("No"),icon:"pi pi-times",text:"",onClick:o[23]||(o[23]=l=>n.deleteProductDialog=!1)},null,8,["label"]),r(g,{label:t.$t("Yes"),icon:"pi pi-check",text:"",onClick:i.deleteProduct},null,8,["label","onClick"])]),default:d(()=>[e("div",es,[ts,n.companies?(c(),u("span",ss,[h(s(t.$t("Are you sure you want to delete")),1),e("b",null,s(n.companies.name),1),h("?")])):f("",!0)])]),_:1},8,["visible","header"]),r(w,{visible:n.deleteProductsDialog,"onUpdate:visible":o[26]||(o[26]=l=>n.deleteProductsDialog=l),style:{width:"450px"},header:t.$t("Confirm"),modal:!0},{footer:d(()=>[r(g,{label:t.$t("No"),icon:"pi pi-times",text:"",onClick:o[25]||(o[25]=l=>n.deleteProductsDialog=!1)},null,8,["label"]),r(g,{label:t.$t("Yes"),icon:"pi pi-check",text:"",onClick:i.deleteSelectedProducts},null,8,["label","onClick"])]),default:d(()=>[e("div",os,[ls,n.companies?(c(),u("span",ns,s(t.$t("Are you sure you want to delete the selected concepts?")),1)):f("",!0)])]),_:1},8,["visible","header"]),r(w,{visible:n.selectACustomerDialog,"onUpdate:visible":o[30]||(o[30]=l=>n.selectACustomerDialog=l),header:t.$t("Select a customer"),id:"titleCompany",modal:!0,class:"p-fluid w-full sm:w-3/4 md:w-2/3 lg:w-1/2 max-w-4xl"},{default:d(()=>[r(x,{modelValue:n.selectedCustomer,"onUpdate:modelValue":o[27]||(o[27]=l=>n.selectedCustomer=l),options:n.customers,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:d(l=>[l.value?(c(),u("div",is,[e("div",null,s(l.value.name),1)])):f("",!0)]),option:d(l=>[e("div",as,[e("div",null,s(l.option.name),1)])]),_:1},8,["modelValue","options"]),e("div",rs,[e("div",ds,[e("button",{class:"success-button mr-1 mr-1 rounded-md",onClick:o[28]||(o[28]=(...l)=>i.openNew&&i.openNew(...l))},[cs,h(" "+s(t.$t("Create customer")),1)]),e("button",{class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:o[29]||(o[29]=l=>i.hideDialog())},s(t.$t("Close")),1)])])]),_:1},8,["visible","header"]),r(w,{visible:n.selectAPaymentMethodDialog,"onUpdate:visible":o[34]||(o[34]=l=>n.selectAPaymentMethodDialog=l),header:t.$t("Select a payment method"),id:"titleCompany",modal:!0,class:"p-fluid w-full sm:w-3/4 md:w-2/3 lg:w-1/2 max-w-4xl"},{default:d(()=>[e("label",us,s(t.$t("Payment method")),1),r(x,{modelValue:this.selectedPaymentMethod,"onUpdate:modelValue":o[31]||(o[31]=l=>this.selectedPaymentMethod=l),options:this.payment_methods,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:d(l=>[l.value?(c(),u("div",ms,[e("div",null,s(l.value.name),1)])):f("",!0)]),option:d(l=>[e("div",hs,[e("div",null,s(l.option.name),1)])]),_:1},8,["modelValue","options"]),i.isDropdownHidden?f("",!0):(c(),u("label",ps,s(t.$t("Select an option")),1)),i.isDropdownHidden?f("",!0):(c(),j(x,{key:1,modelValue:n.selectedOption,"onUpdate:modelValue":o[32]||(o[32]=l=>n.selectedOption=l),options:n.options,filter:"",optionLabel:i.dynamicOptionLabel,class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:d(l=>[l.value?(c(),u("div",bs,[e("div",null,s(l.value[i.dynamicOptionLabel]),1)])):f("",!0)]),option:d(l=>[e("div",ys,[e("div",null,s(l.option[i.dynamicOptionLabel]),1)])]),_:1},8,["modelValue","options","optionLabel"])),e("div",fs,[e("button",{class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:o[33]||(o[33]=l=>i.hideDialog())},s(t.$t("Close")),1)])]),_:1},8,["visible","header"]),r(w,{visible:n.customerDialog,"onUpdate:visible":o[46]||(o[46]=l=>n.customerDialog=l),header:t.$t("Create company"),id:"titleCompany",modal:!0,class:"p-fluid"},{default:d(()=>[e("form",{style:{width:"800px"},onSubmit:o[45]||(o[45]=A((...l)=>i.saveCustomer&&i.saveCustomer(...l),["prevent"]))},[e("div",gs,[e("div",null,[e("label",vs,s(t.$t("Company name")),1),p(e("input",{type:"text",id:"name","onUpdate:modelValue":o[35]||(o[35]=l=>a.customer.name=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t.$t("Company name"),required:!n.selectedCustomer},null,8,_s),[[y,a.customer.name]])]),e("div",null,[e("label",xs,s(t.$t("Tax number")),1),p(e("input",{type:"text",id:"tax_number","onUpdate:modelValue":o[36]||(o[36]=l=>a.customer.tax_number=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t.$t("Tax number"),required:!n.selectedCustomer},null,8,ws),[[y,a.customer.tax_number]])])]),e("div",ks,[e("label",Cs,s(t.$t("Address")),1),p(e("input",{type:"text",id:"address1","onUpdate:modelValue":o[37]||(o[37]=l=>a.customer.address=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t.$t("Address"),required:!n.selectedCustomer},null,8,Ts),[[y,a.customer.address]])]),e("div",Ds,[e("div",null,[e("label",As,s(t.$t("Town")),1),p(e("input",{type:"text",id:"town","onUpdate:modelValue":o[38]||(o[38]=l=>a.customer.town=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t.$t("Town"),required:!n.selectedCustomer},null,8,Ps),[[y,a.customer.town]])]),e("div",null,[e("label",Ss,s(t.$t("Province")),1),p(e("input",{type:"text",id:"province","onUpdate:modelValue":o[39]||(o[39]=l=>a.customer.province=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t.$t("Province"),required:!n.selectedCustomer},null,8,Is),[[y,a.customer.province]])]),e("div",null,[e("label",Ms,s(t.$t("Post code")),1),p(e("input",{type:"text",id:"post_code","onUpdate:modelValue":o[40]||(o[40]=l=>a.customer.post_code=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t.$t("Post code"),pattern:"^\\d+$",required:!n.selectedCustomer},null,8,Vs),[[y,a.customer.post_code]])]),e("div",null,[e("label",Fs,s(t.$t("Country")),1),p(e("input",{type:"text",id:"country","onUpdate:modelValue":o[41]||(o[41]=l=>a.customer.country=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t.$t("Country"),required:!n.selectedCustomer},null,8,Es),[[y,a.customer.country]])]),e("div",null,[e("label",Us,s(t.$t("Email")),1),p(e("input",{type:"email",id:"email","onUpdate:modelValue":o[42]||(o[42]=l=>a.customer.email=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t.$t("info@mycompany.com"),required:!n.selectedCustomer},null,8,Os),[[y,a.customer.email]])]),e("div",null,[e("label",Ls,s(t.$t("Phone")),1),p(e("input",{type:"tel",id:"phone","onUpdate:modelValue":o[43]||(o[43]=l=>a.customer.phone=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:t.$t("Phone"),pattern:"^\\+\\d{1,3}\\s?\\d{1,14}$",required:!n.selectedCustomer},null,8,$s),[[y,a.customer.phone]])])]),e("div",Bs,[e("div",null,[e("button",{class:"mr-3 text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:o[44]||(o[44]=A(l=>i.hideDialog(),["prevent"]))},s(t.$t("Close")),1),e("button",Rs,s(t.$t("Save")),1)])])],32)]),_:1},8,["visible","header"])]),e("div",js,[e("div",qs,[e("div",Ns,[Gs,e("div",Xs,[e("h3",null,s(n.selectedType.name),1),e("p",null,[e("strong",null,s(t.$t("Date"))+": ",1),h(s(n.fecha),1)]),e("p",null,[e("strong",null,s(t.$t("Expiration"))+": ",1),h(s(n.expiration),1)]),e("p",null,[e("strong",null,s(t.$t("Number of"))+" "+s(n.selectedType.name)+":",1),h(" "+s(n.selectedSerie.serie)+" "+s(n.selectedSerie.number),1)])])]),e("div",zs,[e("div",Hs,[e("h3",null,[e("strong",null,s(t.$t("Company")),1)]),e("p",Ws,s(n.selectedCompany.name),1),e("p",null,s(n.selectedCompany.tax_number),1),e("p",null,[h(s(n.selectedCompany.address),1),Ys,h(" "+s(n.selectedCompany.post_code)+", "+s(n.selectedCompany.town)+", "+s(n.selectedCompany.province)+", "+s("(")+" "+s(n.selectedCompany.country)+" "+s(")"),1)]),e("p",null,s(n.selectedCompany.email),1),e("p",null,s(n.selectedCompany.phone),1)]),e("div",Qs,[e("h3",null,[e("strong",null,s(t.$t("Customer")),1)]),e("p",Js,s(n.selectedCustomer.name),1),e("p",null,s(n.selectedCustomer.tax_number),1),e("p",null,[h(s(n.selectedCustomer.address),1),Ks,h(" "+s(n.selectedCustomer.post_code)+", "+s(n.selectedCustomer.town)+", "+s(n.selectedCustomer.province)+", "+s("(")+" "+s(n.selectedCustomer.country)+" "+s(")"),1)]),e("p",null,s(n.selectedCustomer.email),1),e("p",null,s(n.selectedCustomer.phone),1)])]),e("table",Zs,[e("thead",null,[e("tr",eo,[e("th",null,s(t.$t("Reference")),1),e("th",null,s(t.$t("Description")),1),e("th",null,s(t.$t("Quantity")),1),e("th",null,s(t.$t("Price")),1),e("th",null,s(t.$t("Discount (%)")),1),e("th",null,s(t.$t("Subtotal")),1),e("th",null,s(t.$t("Tax (%)")),1),e("th",null,s(t.$t("Total")),1)])]),e("tbody",null,[(c(!0),u(T,null,D(n.products,l=>(c(),u("tr",{key:l.id},[e("td",null,s(l.reference),1),e("td",null,s(l.description),1),e("td",null,s(l.quantity),1),e("td",null,s(l.price),1),e("td",null,s(l.discount),1),e("td",null,s(l.subTotal),1),e("td",null,s(l.taxes),1),e("td",null,s(i.calculateTotal(l)),1)]))),128))])]),e("div",to,[e("div",so,[e("table",oo,[e("tr",null,[e("td",lo,s(t.$t("Subtotal (excluding Tax)")),1),e("td",null,s(i.subtotal.toFixed(2))+"€",1)]),(c(!0),u(T,null,D(n.taxMap,(l,b)=>(c(),u("tr",{key:b},[e("td",no,s(t.$t("Total IVA"))+" "+s(Object.values(l)[0])+" %",1),e("td",null,s(Object.values(l)[1].toFixed(2))+"€",1)]))),128)),e("tr",null,[e("td",io,[e("strong",null,s(t.$t("Total (with IVA)")),1)]),e("td",null,[e("strong",null,s(i.totalConIVA.toFixed(2))+"€",1)])])])]),e("table",ao,[e("tr",null,[e("td",null,s(t.$t("Payment method"))+":",1),e("td",null,s(n.selectedPaymentMethod.name),1)]),e("tr",null,[e("td",ro,[n.selectedPaymentMethod.id===2?(c(),u("span",co,s(""))):n.selectedPaymentMethod.id===3?(c(),u("span",uo,s(t.$t("Phone"))+":",1)):n.selectedPaymentMethod.id===4?(c(),u("span",mo,s(t.$t("Email"))+":",1)):(c(),u("span",ho,s(t.$t("Bank account"))+":",1))]),e("td",po,[n.selectedPaymentMethod.id===2?(c(),u("span",bo,s(""))):n.selectedPaymentMethod.id===3?(c(),u("span",yo,s(n.selectedPhone.phone),1)):n.selectedPaymentMethod.id===4?(c(),u("span",fo,s(n.selectedEmail.email),1)):(c(),u("span",go,s(n.selectedBankAccount.complete_bank_account),1))])])])])])])],64)}const Do=q(N,[["render",vo]]);export{Do as default};
