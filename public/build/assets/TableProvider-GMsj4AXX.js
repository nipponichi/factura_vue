import{s as C}from"./dialog.esm-zV3-Whfq.js";import{a as $,c as D,s as _}from"./column.esm-DAnS-coG.js";import{s as T}from"./toolbar.esm-Cg1yzdBh.js";import{i as U,j as g,o as p,e as y,a as t,b as i,w as m,c as h,f as c,t as s,k as a,v as n,m as N,g as P}from"./app-DWSMTOA9.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={data(){return{providers:null,providerDialog:!1,deleteProviderDialog:!1,deleteProvidersDialog:!1,myProvider:{id:"",name:"",tax_number:"",email:"",phone:"",address:"",post_code:"",town:"",province:"",country:""},originalProvider:[],selectedPRoviders:[],filters:{},submitted:!1}},created(){this.filters={global:{value:null,matchMode:U.CONTAINS}}},mounted(){this.fetchProviders()},methods:{fetchProviders(){let e=window.location.pathname.split("/").pop();g.get("/providers/"+e).then(r=>{this.providers=r.data.providers}).catch(r=>{this.$toast(this.$t("Error connecting to the server"),"error")})},openNew(){this.myProvider={companyID:window.location.pathname.split("/").pop()},this.submitted=!1,this.providerDialog=!0},hideDialog(){this.providerDialog=!1,this.submitted=!1},saveCompany(){this.myProvider.id?this.updateCompany():g.post("/provider",this.myProvider).then(e=>{this.$toast(this.$t(e.data.message),e.data.type),this.providerDialog=!1,this.fetchProviders()}).catch(e=>{this.$toast(this.$t("Error connecting to the server"),"error"),this.providerDialog=!1})},editCompany(e){this.originalProvider={tax_number:e.tax_number,name:e.name},this.myProvider.id=e.id,this.myProvider.name=e.name,this.myProvider.tax_number=e.tax_number,this.providerDialog=!0},updateCompany(){if(this.originalProvider.tax_number===this.myProvider.tax_number&&this.originalProvider.name===this.myProvider.name){this.$toast(this.$t("Successfully updated."),"success"),this.providerDialog=!1;return}g.put("/provider/"+this.myProvider.id,this.myProvider).then(e=>{this.$toast(this.$t(e.data.message),e.data.type),this.fetchProviders(),this.providerDialog=!1}).catch(e=>{this.$toast(this.$t("Error connecting to the server"),"error"),this.providerDialog=!1})},confirmDeleteCompany(e){this.myProvider=e,this.deleteProviderDialog=!0},deleteCompany(){g.delete("/provider/"+this.myProvider.id).then(e=>{e.data.type==="success"&&(this.providers=this.providers.filter(r=>r.id!==this.myProvider.id)),this.$toast(this.$t(e.data.message),e.data.type)}).catch(e=>{this.$toast(this.$t(e.response.message),e.response.type)}),this.deleteProviderDialog=!1},confirmDeleteSelected(){this.deleteProvidersDialog=!0},deleteSelectedCompanies(){this.selectedPRoviders.forEach(e=>{g.delete("/provider/"+e.id).then(r=>{r.data.type==="success"&&(this.providers=this.providers.filter(f=>f.id!==e.id)),this.$toast(this.$t(r.data.message),r.data.type)}).catch(r=>{(r.response||r.response.status===400)&&this.$toast(this.$t(r.response.message),r.response.type)})}),this.deleteProvidersDialog=!1},handleInfoButtonClick(e){let r=window.location.pathname.split("/").pop();this.$inertia.get(`/companies/${r}/provider/${e}`)}}},S={class:"card"},M={class:"flex justify-between items-center mt-2"},q={class:"relative rounded-md shadow-sm w-1/4"},B=["placeholder"],E=t("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),A={class:"grid gap-3 mb-6 md:grid-cols-2"},I={for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},L=["placeholder"],z={for:"tax_number",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},j=["placeholder"],F={key:0},O={class:"mb-6"},Y={for:"address",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},K=["placeholder"],G={class:"grid gap-3 mb-6 md:grid-cols-2"},H={for:"town",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},J=["placeholder"],Q={for:"province",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},W=["placeholder"],X={for:"post_code",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Z=["placeholder"],ee={for:"country",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},re=["placeholder"],te={for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},oe=["placeholder"],le={for:"phone",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},ie=["placeholder"],se={class:"grid gap-3 md:grid-cols-1 justify-items-end"},de={type:"submit",class:"text-white bg-blue-600 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},ae={class:"confirmation-content"},ne=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ue={key:0},pe={class:"confirmation-content"},me=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),ce={key:0};function be(e,r,f,ge,o,d){const u=D,w=T,b=_,x=$,v=C;return p(),y("div",null,[t("div",S,[i(w,{class:"mb-4 border border-slate-200 ..."},{start:m(()=>[e.$page.props.user.permissions.includes("create provider")?(p(),h(u,{key:0,label:e.$t("New"),icon:"pi pi-plus",severity:"success",class:"mr-2 success-button",onClick:d.openNew},null,8,["label","onClick"])):c("",!0),e.$page.props.user.permissions.includes("delete provider")?(p(),h(u,{key:1,label:e.$t("Delete"),icon:"pi pi-trash",severity:"danger",class:"danger-button",onClick:d.confirmDeleteSelected,disabled:!o.selectedPRoviders||!o.selectedPRoviders.length},null,8,["label","onClick","disabled"])):c("",!0)]),_:1}),i(x,{ref:"dt",value:o.providers,selection:o.selectedPRoviders,"onUpdate:selection":r[1]||(r[1]=l=>o.selectedPRoviders=l),dataKey:"id",paginator:!0,rows:10,filters:o.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:`${e.$t("Showing")} {first} ${e.$t("of")} {last} ${e.$t("of")} {totalRecords} ${e.$t("customers")}`},{header:m(()=>[t("div",M,[t("h4",null,s(e.$t("Manage customers")),1),t("div",q,[a(t("input",{type:"search",class:"block w-full h-11 rounded-md border-0 py-1.5 pl-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm","onUpdate:modelValue":r[0]||(r[0]=l=>o.filters.global.value=l),placeholder:e.$t("Search...")},null,8,B),[[n,o.filters.global.value]]),E])])]),default:m(()=>[i(b,{selectionMode:"multiple",exportable:!1,class:"datetable checkbox"}),i(b,{field:"name",header:e.$t("Name"),sortable:"",class:"dateTable"},null,8,["header"]),i(b,{field:"tax_number",header:e.$t("Tax Number"),sortable:"",class:"dateTable"},null,8,["header"]),i(b,{field:"phone",header:e.$t("Phone"),sortable:"",class:"dateTable"},null,8,["header"]),i(b,{field:"email",header:e.$t("Email"),sortable:"",class:"dateTable"},null,8,["header"]),i(b,{field:"town",header:e.$t("Town"),sortable:"",class:"dateTable"},null,8,["header"]),i(b,{exportable:!1,class:"dateTable"},{body:m(l=>[e.$page.props.user.permissions.includes("read provider")?(p(),h(u,{key:0,icon:"pi pi-eye",outlined:"",rounded:"",class:"mr-2 view-button",onClick:k=>d.handleInfoButtonClick(l.data.id)},null,8,["onClick"])):c("",!0),e.$page.props.user.permissions.includes("update provider")?(p(),h(u,{key:1,icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2 edit-button",onClick:k=>d.editCompany(l.data)},null,8,["onClick"])):c("",!0),e.$page.props.user.permissions.includes("delete provider")?(p(),h(u,{key:2,icon:"pi pi-trash",outlined:"",rounded:"",class:"simpleDelete-button",severity:"danger",onClick:k=>d.confirmDeleteCompany(l.data)},null,8,["onClick"])):c("",!0)]),_:1})]),_:1},8,["value","selection","filters","currentPageReportTemplate"])]),i(v,{visible:o.providerDialog,"onUpdate:visible":r[13]||(r[13]=l=>o.providerDialog=l),header:o.myProvider.id?e.$t("Modify myProvider"):e.$t("Create myProvider"),id:"titleCompany",modal:!0,class:"p-fluid"},{default:m(()=>[t("form",{style:{width:"800px"},onSubmit:r[12]||(r[12]=N((...l)=>d.saveCompany&&d.saveCompany(...l),["prevent"]))},[t("div",A,[t("div",null,[t("label",I,s(e.$t("Company name")),1),a(t("input",{type:"text",id:"name","onUpdate:modelValue":r[2]||(r[2]=l=>o.myProvider.name=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Company name"),required:""},null,8,L),[[n,o.myProvider.name]])]),t("div",null,[t("label",z,s(e.$t("Tax number")),1),a(t("input",{type:"text",id:"tax_number","onUpdate:modelValue":r[3]||(r[3]=l=>o.myProvider.tax_number=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Tax number"),required:""},null,8,j),[[n,o.myProvider.tax_number]])])]),this.myProvider.id?c("",!0):(p(),y("div",F,[t("div",O,[t("div",null,[t("label",Y,s(e.$t("Address")),1),a(t("input",{type:"text",id:"address1","onUpdate:modelValue":r[4]||(r[4]=l=>o.myProvider.address=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Address"),required:""},null,8,K),[[n,o.myProvider.address]])])]),t("div",G,[t("div",null,[t("label",H,s(e.$t("Town")),1),a(t("input",{type:"text",id:"town","onUpdate:modelValue":r[5]||(r[5]=l=>o.myProvider.town=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Town"),required:""},null,8,J),[[n,o.myProvider.town]])]),t("div",null,[t("label",Q,s(e.$t("Province")),1),a(t("input",{type:"text",id:"province","onUpdate:modelValue":r[6]||(r[6]=l=>o.myProvider.province=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Province"),required:""},null,8,W),[[n,o.myProvider.province]])]),t("div",null,[t("label",X,s(e.$t("Post code")),1),a(t("input",{type:"text",id:"post_code","onUpdate:modelValue":r[7]||(r[7]=l=>o.myProvider.post_code=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Post code"),pattern:"^\\d+$",required:""},null,8,Z),[[n,o.myProvider.post_code]])]),t("div",null,[t("label",ee,s(e.$t("Country")),1),a(t("input",{type:"text",id:"country","onUpdate:modelValue":r[8]||(r[8]=l=>o.myProvider.country=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Country"),required:""},null,8,re),[[n,o.myProvider.country]])]),t("div",null,[t("label",te,s(e.$t("Email")),1),a(t("input",{type:"email",id:"email","onUpdate:modelValue":r[9]||(r[9]=l=>o.myProvider.email=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("info@mycompany.com"),required:""},null,8,oe),[[n,o.myProvider.email]])]),t("div",null,[t("label",le,s(e.$t("Phone")),1),a(t("input",{type:"tel",id:"phone","onUpdate:modelValue":r[10]||(r[10]=l=>o.myProvider.phone=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Phone"),pattern:"^\\+\\d{1,3}\\s?\\d{1,14}$",required:""},null,8,ie),[[n,o.myProvider.phone]])])])])),t("div",se,[t("div",null,[t("button",{type:"button",class:"mr-3 text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:r[11]||(r[11]=(...l)=>d.hideDialog&&d.hideDialog(...l))},s(e.$t("Close")),1),t("button",de,s(o.myProvider.id?e.$t("Update"):e.$t("Save")),1)])])],32)]),_:1},8,["visible","header"]),i(v,{visible:o.deleteProviderDialog,"onUpdate:visible":r[15]||(r[15]=l=>o.deleteProviderDialog=l),style:{width:"450px"},header:e.$t("Confirm"),modal:!0},{footer:m(()=>[i(u,{label:e.$t("No"),icon:"pi pi-times",text:"",onClick:r[14]||(r[14]=l=>o.deleteProviderDialog=!1)},null,8,["label"]),i(u,{label:e.$t("Yes"),icon:"pi pi-check",text:"",onClick:d.deleteCompany},null,8,["label","onClick"])]),default:m(()=>[t("div",ae,[ne,o.myProvider?(p(),y("span",ue,[P(s(e.$t("Are you sure you want to delete")),1),t("b",null,s(o.myProvider.name),1),P("?")])):c("",!0)])]),_:1},8,["visible","header"]),i(v,{visible:o.deleteProvidersDialog,"onUpdate:visible":r[17]||(r[17]=l=>o.deleteProvidersDialog=l),style:{width:"450px"},header:e.$t("Confirm"),modal:!0},{footer:m(()=>[i(u,{label:e.$t("No"),icon:"pi pi-times",text:"",onClick:r[16]||(r[16]=l=>o.deleteProvidersDialog=!1)},null,8,["label"]),i(u,{label:e.$t("Yes"),icon:"pi pi-check",text:"",onClick:d.deleteSelectedCompanies},null,8,["label","onClick"])]),default:m(()=>[t("div",pe,[me,o.myProvider?(p(),y("span",ce,s(e.$t("Are you sure you want to delete the selected customers?")),1)):c("",!0)])]),_:1},8,["visible","header"])])}const Pe=V(R,[["render",be]]);export{Pe as default};
