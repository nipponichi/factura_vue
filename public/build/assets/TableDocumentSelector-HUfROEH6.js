import{a as f,c as p,s as g}from"./column.esm-B0kMEs2H.js";import{i as u,j as v,o as b,e as w,a as d,b as s,w as c,k as D,v as k}from"./app-CEnNdpTV.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const y={props:{companyId:{type:String,required:!0},isChecked:{type:Boolean,required:!0}},data(){return{documents:null,selectedDocuments:[],receivedDocuments:[],emitedDocuments:[],filters:{global:{value:null,matchMode:u.CONTAINS}}}},created(){this.filters={global:{value:null,matchMode:u.CONTAINS}}},mounted(){console.log("companyId recibido:",this.companyId),this.fetchDocuments()},computed:{valueToUse(){return this.isChecked?this.receivedDocuments:this.emitedDocuments}},methods:{fetchDocuments(){v.get(`/documents-serie/${this.companyId}`).then(e=>{let a,o;for(let t=0;t<e.data.documents.length;t++)a=e.data.documents[t].date,o=this.dateFormat(a),e.data.documents[t].dateFormatted=o;this.documents=e.data.documents,this.documents.forEach(t=>{t.isReceived===0?this.emitedDocuments.push(t):t.isReceived===1&&this.receivedDocuments.push(t)})}).catch(e=>{console.error("Error fetching documents data:",e)})},handleRowClick(e){const a=e.data.id;console.log("Documento seleccionado:",a),this.sendDocumentId(a)},sendDocumentId(e){this.$emit("document-selected",e)},dateFormat(e){let a=new Date(e),o=a.getDate(),t=a.getMonth()+1,l=a.getFullYear();return o<10&&(o="0"+o),t<10&&(t="0"+t),`${o}/${t}/${l}`}}},C={class:"card"},T={class:"flex justify-between items-center"},P={class:"relative rounded-md shadow-sm w-1/4"},_=["placeholder"],R=d("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1);function F(e,a,o,t,l,i){const m=p,r=g,h=f;return b(),w("div",null,[d("div",C,[s(h,{ref:"dt",value:i.valueToUse,selection:l.selectedDocuments,"onUpdate:selection":a[1]||(a[1]=n=>l.selectedDocuments=n),dataKey:"id",paginator:!0,rows:10,filters:l.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:`${e.$t("Showing")} {first} ${e.$t("of")} {last} ${e.$t("of")} {totalRecords} ${e.$t("documents")}`,selectionMode:"single",onRowClick:i.handleRowClick},{header:c(()=>[d("div",T,[d("div",P,[D(d("input",{type:"search",class:"block w-full h-11 rounded-md border-0 py-1.5 pl-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm","onUpdate:modelValue":a[0]||(a[0]=n=>l.filters.global.value=n),placeholder:e.$t("Search...")},null,8,_),[[k,l.filters.global.value]]),R])])]),default:c(()=>[s(r,{exportable:!1,header:e.$t("View"),class:"dateTable"},{body:c(n=>[s(m,{icon:"pi pi-eye",outlined:"",rounded:"",class:"mr-2 view-button",onClick:I=>i.handleRowClick(n)},null,8,["onClick"])]),_:1},8,["header"]),s(r,{field:"number",header:e.$t("Number"),sortable:"",class:"dateTable"},null,8,["header"]),s(r,{field:"document_type_name",header:e.$t("Type"),sortable:"",class:"dateTable"},null,8,["header"]),s(r,{field:"customer_name",header:o.isChecked?e.$t("Provider"):e.$t("Customer"),sortable:"",class:"dateTable"},null,8,["header"]),s(r,{field:"dateFormatted",header:e.$t("Date"),sortable:"",class:"dateTable"},null,8,["header"]),s(r,{field:"amount",header:e.$t("Amount"),sortable:"",class:"dateTable"},null,8,["header"])]),_:1},8,["value","selection","filters","currentPageReportTemplate","onRowClick"])])])}const L=$(y,[["render",F]]);export{L as default};
