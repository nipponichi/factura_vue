import{s as P,a as S}from"./toolbar.esm-HT0xLOxV.js";import{a as V,s as F,b as U,d as A,c as L}from"./column.esm-IEgrWFql.js";import{j,o as h,e as b,a as e,g as c,t as s,n as T,l as x,x as R,v as w,b as i,w as d,F as k,h as N,f as _,A as M,B as E}from"./app-Dz46uSI6.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={props:["documents","concepts","company","customer"],data(){return{fecha:"",fechaFormateada:"",showTable:!1,taxOptions:[{label:"0%",value:0},{label:"4%",value:4},{label:"5%",value:5},{label:"7%",value:7},{label:"8%",value:8},{label:"10%",value:10},{label:"16%",value:16},{label:"18%",value:18},{label:"21%",value:21}],imageUrl:"https://placehold.co/300x300/e2e8f0/e2e8f0",companies:null,customers:null,types:[],series:[],serie:"",productDialog:!1,documentDialog:!1,deleteProductDialog:!1,deleteProductsDialog:!1,products:[],selectedCompany:[],selectedCustomer:[],selectedType:[],selectedSerie:[],selectedProducts:[],filters:{},submitted:!1,myDocument:{number:"",company_id_company:"",company_id_customer:"",documents_type_id:"",documents_series_id:"",bank_account_id:"",bank_name:"",swift:"",complete_bank_account:"",date:"",amount:"",totalTax:"",subTotal:"",paid:!1,concept:[]}}},computed:{subtotal(){return this.products.reduce((t,l)=>t+l.quantity*l.price,0)},totalIVA(){return this.products.reduce((t,l)=>t+l.quantity*l.price*l.tax/100,0)},totalConIVA(){return this.subtotal+this.totalIVA}},created(){this.filters={global:{value:null,matchMode:j.CONTAINS}};const t=new Date,l=t.getFullYear(),m=(t.getMonth()+1).toString().padStart(2,"0"),u=t.getDate().toString().padStart(2,"0");this.fecha=`${l}-${m}-${u}`},mounted(){this.products=this.concepts;for(let t=0;t<this.products.length;t++)this.products[t].tax=parseFloat(this.concepts[t].tax);this.myDocument=this.documents,this.myDocument.concept=[],this.selectedCompany=this.company,this.selectedCompany.bank_account_id=this.myDocument.bank_account_id,this.selectedCompany.bank_name=this.myDocument.bank_name,this.selectedCompany.swift=this.myDocument.swift,this.selectedCompany.complete_bank_account=this.myDocument.complete_bank_account,this.selectedCustomer=this.customer,this.selectedType.name=this.documents.document_type_name,this.selectedType.id=this.documents.documents_type_id,this.selectedSerie.id=this.documents.documents_series_id,this.selectedSerie.serie=this.documents.document_series_serie,this.selectedSerie.number=this.documents.document_counter,this.fecha=this.documents.date,this.fetchCompanies(),this.fetchDocuments()},methods:{fetchCompanies(){axios.get("/companies-invoice").then(t=>{this.companies=t.data.companies}).catch(t=>{console.error("Error fetching phone data:",t)})},handleCompanySelection(){this.selectedCustomer=[],axios.get("/customers/"+this.selectedCompany.id).then(t=>{this.customers=t.data.customers}).catch(t=>{console.error("Error fetching phone data:",t)})},fetchDocuments(){axios.get("/documents-type").then(t=>{this.types=t.data.types}).catch(t=>{console.error("Error fetching phone data:",t)})},handleTypeSelection(){this.selectedSerie=[],axios.get("/documents-serie/"+this.selectedType.id+"/"+this.selectedCompany.id).then(t=>{this.series=t.data.series}).catch(t=>{console.error("Error fetching phone data:",t)})},selectCompany(){this.productDialog=!0},selectDocument(){this.documentDialog=!0},openFileInput(){this.$refs.fileInput.click()},handleFileChange(t){const l=t.target.files[0],m=new FileReader;m.onload=()=>{this.imageUrl=m.result},m.readAsDataURL(l)},addRow(){let t={reference:"",description:"",product:"",quantity:0,price:0,tax:21.5,priceTax:0,total:0,id:this.products.length+1};this.products.push(t)},updateDocument(){console.log("serie id update: "+this.selectedSerie.id),this.myDocument.number=this.selectedSerie.serie+this.selectedSerie.number,console.log("numero factura update: "+this.myDocument.number),this.myDocument.company_id_company=this.selectedCompany.id,this.myDocument.company_id_customer=this.selectedCustomer.id,this.myDocument.documents_type_id=this.selectedType.id,this.myDocument.documents_series_id=this.selectedSerie.id,this.myDocument.date=this.fecha,this.myDocument.subTotal=this.subtotal.toFixed(2),this.myDocument.totalTax=this.totalIVA.toFixed(2),this.myDocument.amount=this.totalConIVA.toFixed(2),console.log("concept: "+this.myDocument.concept),this.products.forEach(t=>{console.log("description update producto: "+t.description);let l={reference:t.reference,description:t.description,quantity:t.quantity,price:t.price,tax:t.tax,total:this.calculateTotal(t).toFixed(2)};this.myDocument.concept.push(l),console.log("description update con objeto: "+this.myDocument.concept[0].description)}),console.log("description update"),axios.put("/documents/"+this.myDocument.id,{documentData:this.myDocument}).then(t=>{console.log("ha pasao")}).catch(t=>{console.error("Error al guardar los datos del documento:",t.response),console.log("ha mal pasao"),this.myDocument.concept=[]})},resetData(){location.reload()},calculateTotal(t){return t.quantity*t.price},confirmDeleteProduct(t){this.product=t,this.deleteProductDialog=!0},deleteProduct(){this.products=this.products.filter(t=>t.id!==this.product.id),this.product=null,this.deleteProductDialog=!1},confirmDeleteSelected(){this.deleteProductsDialog=!0},deleteSelectedProducts(){this.selectedProducts.forEach(t=>{this.products=this.products.filter(l=>l.id!==t.id)}),this.selectedProducts=[],this.deleteProductsDialog=!1},exportToPDF(){this.showTable=!this.showTable,window.print()},exportToXML(){const t={company:this.company,customer:this.customer,document:this.myDocument},l=this.convertToFacturaeXML(t);console.log("documento generado"),this.downloadXML(l,"facturae.xml")},convertToFacturaeXML(t){const{company:l,customer:m,document:u}=t;return console.log(l),console.log(m),console.log(u),`<?xml version="1.0" encoding="UTF-8"?>
            <Facturae xmlns="http://www.facturae.es/Facturae/2014/v3.2.2/Facturae">
            <FileHeader>
                <SchemaVersion>3.2.2</SchemaVersion>
                <Modality>I</Modality>
                <InvoiceIssuerType>EM</InvoiceIssuerType>
            </FileHeader>
            <Parties>
                <SellerParty>
                    <TaxIdentification>
                        <PersonTypeCode>J</PersonTypeCode>
                        <ResidenceTypeCode>R</ResidenceTypeCode>
                        <TaxIdentificationNumber>${l.tax_number}</TaxIdentificationNumber>
                    </TaxIdentification>
                    <LegalEntity>
                        <CorporateName>${l.name}</CorporateName>
                        <AddressInSpain>
                            <Address>${l.address}</Address>
                            <PostCode>${l.post_code}</PostCode>
                            <Town>${l.town}</Town>
                            <Province>${l.province}</Province>
                            <CountryCode>${l.country}</CountryCode>
                        </AddressInSpain>
                    </LegalEntity>
                </SellerParty>
                <BuyerParty>
                    <TaxIdentification>
                        <PersonTypeCode>F</PersonTypeCode>
                        <ResidenceTypeCode>R</ResidenceTypeCode>
                        <TaxIdentificationNumber>${m.tax_number}</TaxIdentificationNumber>
                    </TaxIdentification>
                    <Individual>
                        <Name>${m.name}</Name>
                        <AddressInSpain>
                        <Address>${m.address}</Address>
                        <PostCode>${m.post_code}</PostCode>
                        <Town>${m.town}</Town>
                        <Province>${m.province}</Province>
                        <CountryCode>${m.country}</CountryCode>
                        </AddressInSpain>
                    </Individual>
                </BuyerParty>
            </Parties>
            <Invoices>
                <Invoice>
                    <InvoiceHeader>
                        <InvoiceNumber>${u.number}</InvoiceNumber>
                        <InvoiceSeriesCode>${this.selectedSerie.serie}</InvoiceSeriesCode>
                        <InvoiceDocumentType>FC</InvoiceDocumentType>
                        <InvoiceClass>OO</InvoiceClass>
                    </InvoiceHeader>
                    <InvoiceIssueData>
                        <IssueDate>${u.date}</IssueDate>
                        <InvoiceCurrencyCode>EUR?</InvoiceCurrencyCode>
                        <TaxCurrencyCode>EUR?</TaxCurrencyCode>
                        <LanguageName>es</LanguageName>
                    </InvoiceIssueData>
                    <InvoiceTotals>
                        <TotalGrossAmount>${u.amount}</TotalGrossAmount>
                        <TotalTaxOutputs>${u.tax}</TotalTaxOutputs>
                        <TotalTaxesWithheld>${u.tax}</TotalTaxesWithheld>
                        <InvoiceTotal>${u.amount}</InvoiceTotal>
                        <TotalOutstandingAmount>${u.amount}</TotalOutstandingAmount>
                        <TotalExecutableAmount>${u.amount}</TotalExecutableAmount>
                        <TotalPaid>${u.amount}</TotalPaid>
                    </InvoiceTotals>
                    
                </Invoice>
            </Invoices>
            </Facturae>`},downloadXML(t,l){const m=new Blob([t],{type:"application/xml"}),u=document.createElement("a");u.href=URL.createObjectURL(m),u.download=l,u.click(),URL.revokeObjectURL(u.href)}}},r=t=>(M("data-v-b7cbe822"),t=t(),E(),t),B={class:"no-imprimir"},q={class:"py-12"},z={class:"container mx-auto px-4 sm:px-6 lg:px-4"},X={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},H={class:"card"},Y={class:"select flex flex-col md:flex-row justify-between mb-4"},G={class:"flex justify-start md:justify-end mb-3 md:mb-0"},Q={class:"relative inline-block w-50"},W=r(()=>e("i",{class:"pi pi-plus mr-2"},null,-1)),J={class:"relative inline-block w-50 ml-2"},K=["disabled"],Z=r(()=>e("i",{class:"pi pi-plus mr-2"},null,-1)),ee={class:"flex items-center ml-2"},te={for:"link-checkbox",class:"ms-2 mr-2 text-sm font-medium text-gray-900 dark:text-gray-300"},se={class:"flex justify-end"},oe={class:"relative inline-block w-50 ml-2"},le=["disabled"],ne=r(()=>e("i",{class:"pi pi-file-export mr-2"},null,-1)),ie={class:"relative inline-block w-50 ml-2"},ae=r(()=>e("i",{class:"pi pi-file-pdf mr-2"},null,-1)),de={class:"relative inline-block w-50 ml-2"},ce=r(()=>e("i",{class:"pi pi-upload mr-2"},null,-1)),re=r(()=>e("hr",{class:"linea-grosor"},null,-1)),ue={class:"selector flex flex-col md:flex-row justify-between items-start mt-4 ml-12"},me={class:"w-64 h-32 mb-3 md:mb-0 border rounded-lg overflow-hidden relative bg-gray-100 mr-0 md:mr-4"},pe=["src"],he={class:"absolute top-0 left-0 right-0 bottom-0 w-full block cursor-pointer flex items-center justify-center"},be=r(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-camera",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"0",y:"0",width:"24",height:"24",stroke:"none"}),e("path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2"}),e("circle",{cx:"12",cy:"13",r:"3"})],-1)),ye={class:"grid md:grid-cols-1 text-sm gap-y-1 mr-28"},fe={class:"flex items-center"},_e={class:"font-semibold mr-3"},ge={class:"text-gray-700"},ve={class:"flex items-center"},Ce={class:"font-semibold mr-3"},xe={class:"selector flex flex-col md:flex-row justify-between mt-6 ml-12"},we={class:"showCompany"},Te=r(()=>e("div",{class:"flex justify-center"},null,-1)),ke={class:"grid md:grid-cols-1 text-m gap-y-1"},De={class:"flex items-center"},Ie={class:"font-semibold mr-3"},Pe={class:"text-gray-700"},Se={class:"flex items-center"},Ve={class:"font-semibold mr-3"},Fe={class:"text-gray-700"},Ue={class:"flex items-center"},Ae={class:"font-semibold mr-3"},Le={class:"text-gray-700"},je={class:"flex items-center"},Re={class:"font-semibold mr-3"},Ne={class:"text-gray-700"},Me={class:"flex items-center"},Ee=r(()=>e("br",null,null,-1)),$e=r(()=>e("br",null,null,-1)),Oe={class:"showCustomer",style:{width:"21rem"}},Be={class:"grid md:grid-cols-1 text-m gap-y-1"},qe={class:"flex items-center"},ze={class:"font-semibold mr-2"},Xe={class:"text-gray-700"},He={class:"flex items-center"},Ye={class:"font-semibold mr-2"},Ge={class:"text-gray-700"},Qe={class:"flex items-center"},We={class:"font-semibold mr-2"},Je={class:"text-gray-700"},Ke={class:"flex items-center"},Ze={class:"font-semibold mr-2"},et={class:"text-gray-700"},tt={class:"flex items-center"},st=r(()=>e("br",null,null,-1)),ot=r(()=>e("br",null,null,-1)),lt={class:"flex items-center justify-between"},nt={class:"flex items-center"},it=r(()=>e("div",{class:"flex-grow"},null,-1)),at={class:"relative rounded-md shadow-sm"},dt=["placeholder"],ct=r(()=>e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),rt={class:"flex justify-end mt-4 pr-4"},ut={class:"flex justify-between mt-4 pr-4 mb-4"},mt={class:"totals-container w-1/3"},pt={class:"ml-10 mt-12 totals bg-gray-100 p-4 rounded-md"},ht={class:"totals-item flex justify-between"},bt={class:"text-gray-600"},yt={class:"totals-container w-1/3"},ft={class:"totals bg-gray-100 p-4 rounded-md"},_t={class:"totals-item flex justify-between"},gt={class:"text-gray-600"},vt={class:"totals-item flex justify-between"},Ct={class:"text-gray-600"},xt={class:"totals-item flex justify-between"},wt={class:"text-gray-600"},Tt={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},kt={key:0,class:"flex align-items-center"},Dt={class:"flex align-items-center"},It={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},Pt={key:0,class:"flex align-items-center"},St={class:"flex align-items-center"},Vt={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},Ft={key:0,class:"flex align-items-center"},Ut={class:"flex align-items-center"},At={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},Lt={key:0,class:"flex align-items-center"},jt={class:"flex align-items-center"},Rt={class:"confirmation-content"},Nt=r(()=>e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Mt={key:0},Et={class:"confirmation-content"},$t=r(()=>e("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ot={key:0},Bt={class:"imprimir"},qt={class:"invoice"},zt={class:"invoice-header"},Xt=r(()=>e("div",{class:"logo"},[e("img",{src:"https://d1csarkz8obe9u.cloudfront.net/posterpreviews/company-logo-design-template-e089327a5c476ce5c70c74f7359c5898_screen.jpg?ts=1672291305",alt:"Logo de la empresa"})],-1)),Ht={class:"invoice_details"},Yt={class:"invoice-info"},Gt={class:"company-details"},Qt={class:"name"},Wt=r(()=>e("br",null,null,-1)),Jt={class:"customer-details"},Kt={class:"name"},Zt=r(()=>e("br",null,null,-1)),es={class:"invoice-table"},ts={class:"header"},ss={class:"table-break"},os={class:"table-container"},ls={class:"totals"},ns={class:"title"},is={class:"title"},as={class:"title"},ds={class:"bank"};function cs(t,l,m,u,n,a){const y=V,D=P,f=U,g=A,v=L,I=F,C=S;return h(),b(k,null,[e("div",B,[e("div",q,[e("div",z,[e("div",X,[e("div",H,[e("div",Y,[e("div",G,[e("div",Q,[e("button",{type:"button",class:"px-4 py-2 bg-blue-500 text-white rounded flex items-center justify-between",onClick:l[0]||(l[0]=o=>a.selectCompany())},[e("span",null,[W,c(" "+s(t.$t("Companies")),1)])])]),e("div",J,[e("button",{type:"button",class:T(["px-4 py-2 bg-blue-500 text-white rounded flex items-center justify-between",{"opacity-50":!this.selectedCompany.id}]),onClick:l[1]||(l[1]=o=>a.selectDocument()),disabled:!this.selectedCompany.id},[e("span",null,[Z,c(" "+s(t.$t("Document type")),1)])],10,K)]),e("div",ee,[e("label",te,s(t.$t("Mark as paid")),1),x(e("input",{id:"link-checkbox",type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=o=>this.myDocument.paid=o),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[R,this.myDocument.paid]])])]),e("div",se,[e("div",oe,[e("button",{type:"button",class:T(["px-4 py-2 bg-purple-500 text-white rounded flex items-center justify-between",{"opacity-50":t.isDisabled}]),onClick:l[3]||(l[3]=o=>a.exportToXML()),disabled:t.isDisabled},[e("span",null,[ne,c(" "+s(t.$t("Export")),1)])],10,le)]),e("div",ie,[e("button",{type:"button",class:"px-4 py-2 bg-red-500 text-white rounded flex items-center justify-between",onClick:l[4]||(l[4]=o=>a.exportToPDF())},[e("span",null,[ae,c(" "+s(t.$t("PDF")),1)])])]),e("div",de,[e("button",{type:"button",class:"px-4 py-2 bg-green-500 text-white rounded flex items-center justify-between",onClick:l[5]||(l[5]=o=>a.updateDocument())},[e("span",null,[ce,c(" "+s(t.$t("Save")),1)])])])])]),re,e("div",ue,[e("div",me,[e("img",{alt:"Company Logo",src:n.imageUrl,class:"object-cover w-full h-48 cursor-pointer",onClick:l[6]||(l[6]=(...o)=>a.openFileInput&&a.openFileInput(...o))},null,8,pe),e("div",he,[e("button",{type:"button",style:{"background-color":"rgba(255, 255, 255, 0.65)"},class:"hover:bg-gray-100 text-gray-700 font-semibold py-2 px-4 text-sm border border-gray-300 rounded-lg shadow-sm",onClick:l[8]||(l[8]=(...o)=>a.openFileInput&&a.openFileInput(...o))},[be,e("input",{type:"file",ref:"fileInput",onChange:l[7]||(l[7]=(...o)=>a.handleFileChange&&a.handleFileChange(...o)),style:{display:"none"}},null,544)])])]),e("div",ye,[e("div",fe,[e("div",_e,"Nº "+s(this.selectedType.name)+":",1),e("div",ge,s(this.selectedSerie.serie),1),x(e("input",{type:"text",class:"border border-gray-300 rounded-md ml-3 px-3 py-2 focus:outline-none focus:border-blue-400","onUpdate:modelValue":l[9]||(l[9]=o=>this.selectedSerie.number=o)},null,512),[[w,this.selectedSerie.number]])]),e("div",ve,[e("div",Ce,s(t.$t("Date"))+":",1),e("div",null,[x(e("input",{type:"date","onUpdate:modelValue":l[10]||(l[10]=o=>n.fecha=o),onChange:l[11]||(l[11]=(...o)=>t.cambiarFormatoFecha&&t.cambiarFormatoFecha(...o)),class:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:border-blue-400"},null,544),[[w,n.fecha]])])])])]),e("div",xe,[e("div",we,[Te,e("div",ke,[e("div",De,[e("div",Ie,s(t.$t("Company name"))+":",1),e("div",Pe,s(this.selectedCompany.name),1)]),e("div",Se,[e("div",Ve,s(t.$t("Tax Number"))+":",1),e("div",Fe,s(this.selectedCompany.tax_number),1)]),e("div",Ue,[e("div",Ae,s(t.$t("Phone"))+":",1),e("div",Le,s(this.selectedCompany.phone),1)]),e("div",je,[e("div",Re,s(t.$t("Email"))+":",1),e("div",Ne,s(this.selectedCompany.email),1)]),e("div",Me,[e("p",null,[e("strong",null,s(t.$t("Address"))+":",1),c(" "+s(n.selectedCompany.address),1),Ee,c(" "+s(n.selectedCompany.post_code)+", "+s(n.selectedCompany.town),1),$e,c(" "+s(n.selectedCompany.province)+", "+s("(")+" "+s(n.selectedCompany.country)+" "+s(")"),1)])])])]),e("div",Oe,[e("div",Be,[e("div",qe,[e("div",ze,s(t.$t("Customer name"))+":",1),e("div",Xe,s(this.selectedCustomer.name),1)]),e("div",He,[e("div",Ye,s(t.$t("Tax number"))+":",1),e("div",Ge,s(this.selectedCustomer.tax_number),1)]),e("div",Qe,[e("div",We,s(t.$t("Phone"))+":",1),e("div",Je,s(this.selectedCustomer.phone),1)]),e("div",Ke,[e("div",Ze,s(t.$t("Email"))+":",1),e("div",et,s(this.selectedCustomer.email),1)]),e("div",tt,[e("p",null,[e("strong",null,s(t.$t("Address"))+":",1),c(" "+s(n.selectedCustomer.address),1),st,c(" "+s(n.selectedCustomer.post_code)+", "+s(n.selectedCustomer.town),1),ot,c(" "+s(n.selectedCustomer.province)+", "+s("(")+" "+s(n.selectedCustomer.country)+" "+s(")"),1)])])])])]),i(D,{class:"mb-4 mt-8 border border-slate-200 ..."},{start:d(()=>[e("div",lt,[e("div",nt,[i(y,{label:t.$t("Concept"),icon:"pi pi-plus",severity:"success",class:"mr-2 success-button",onClick:a.addRow},null,8,["label","onClick"]),i(y,{label:t.$t("Delete"),icon:"pi pi-trash",severity:"danger",class:"danger-button",onClick:a.confirmDeleteSelected,disabled:!n.selectedProducts||!n.selectedProducts.length},null,8,["label","onClick","disabled"])]),it])]),end:d(()=>[e("div",at,[x(e("input",{type:"search",class:"block w-full h-11 rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm","onUpdate:modelValue":l[12]||(l[12]=o=>n.filters.global.value=o),placeholder:t.$t("Search...")},null,8,dt),[[w,n.filters.global.value]]),ct])]),_:1}),i(I,{ref:"dt",value:n.products,selection:n.selectedProducts,"onUpdate:selection":l[13]||(l[13]=o=>n.selectedProducts=o),dataKey:"id",class:"",paginator:!0,rows:10,filters:n.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:`${t.$t("Showing")} {first} ${t.$t("of")} {last} ${t.$t("of")} {totalRecords} ${t.$t("products")}`},{default:d(()=>[i(f,{selectionMode:"multiple",exportable:!1,class:"datetable checkbox"}),i(f,{field:"reference",header:t.$t("Reference"),sortable:"",class:"dateTable"},{body:d(o=>[i(g,{class:"input",placeholder:t.$t("Reference"),modelValue:o.data.reference,"onUpdate:modelValue":p=>o.data.reference=p},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),i(f,{field:"product",header:t.$t("Description"),sortable:"",class:"dateTable"},{body:d(o=>[i(g,{class:"input",placeholder:t.$t("Description"),modelValue:o.data.description,"onUpdate:modelValue":p=>o.data.description=p},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),i(f,{field:"quantity",header:t.$t("Quantity"),sortable:"",class:"dateTable"},{body:d(o=>[i(g,{class:"input input-short",modelValue:o.data.quantity,"onUpdate:modelValue":p=>o.data.quantity=p},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),i(f,{field:"price",header:t.$t("Price"),sortable:"",class:"dateTable"},{body:d(o=>[i(g,{class:"input input-short",modelValue:o.data.price,"onUpdate:modelValue":p=>o.data.price=p},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),i(f,{field:"tax",header:t.$t("Tax (%)"),sortable:"",class:"dateTable"},{body:d(o=>[i(v,{class:"input-short",modelValue:o.data.tax,"onUpdate:modelValue":p=>o.data.tax=p,options:n.taxOptions,optionLabel:"label",optionValue:"value"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1},8,["header"]),i(f,{field:"total",header:t.$t("Total"),sortable:"",class:"dateTable"},{body:d(o=>[i(g,{class:"input input-short",value:a.calculateTotal(o.data),readonly:""},null,8,["value"])]),_:1},8,["header"]),i(f,{exportable:!1,class:"dateTable"},{body:d(o=>[i(y,{icon:"pi pi-trash",outlined:"",rounded:"",class:"simpleDelete-button",severity:"danger",onClick:p=>a.confirmDeleteProduct(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters","currentPageReportTemplate"]),e("div",rt,[i(y,{label:t.$t("Concept"),icon:"pi pi-plus",severity:"success",class:"success-button",onClick:l[14]||(l[14]=o=>a.addRow())},null,8,["label"])])]),e("div",ut,[e("div",mt,[e("div",pt,[e("div",ht,[e("span",bt,s(t.$t("Bank account"))+":",1),e("span",null,s(this.myDocument.complete_bank_account),1)])])]),e("div",yt,[e("div",ft,[e("div",_t,[e("span",gt,s(t.$t("Subtotal (excluding Tax)"))+":",1),e("span",null,s(a.subtotal.toFixed(2))+"€",1)]),e("div",vt,[e("span",Ct,s(t.$t("Total Tax"))+":",1),e("span",null,s(a.totalIVA.toFixed(2))+"€",1)]),e("div",xt,[e("span",wt,s(t.$t("Total (with IVA)"))+":",1),e("span",null,s(a.totalConIVA.toFixed(2))+"€",1)])])])]),i(C,{visible:n.productDialog,"onUpdate:visible":l[17]||(l[17]=o=>n.productDialog=o),style:{width:"450px"},header:t.$t("Select companies"),modal:!0,onChange:a.handleCompanySelection},{default:d(()=>[e("label",Tt,s(t.$t("Select your company"))+":",1),i(v,{modelValue:n.selectedCompany,"onUpdate:modelValue":l[15]||(l[15]=o=>n.selectedCompany=o),options:n.companies,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500",onChange:a.handleCompanySelection},{value:d(o=>[o.value?(h(),b("div",kt,[e("div",null,s(o.value.name),1)])):_("",!0)]),option:d(o=>[e("div",Dt,[e("div",null,s(o.option.name),1)])]),_:1},8,["modelValue","options","onChange"]),e("label",It,s(t.$t("Select a customer"))+":",1),i(v,{modelValue:n.selectedCustomer,"onUpdate:modelValue":l[16]||(l[16]=o=>n.selectedCustomer=o),options:this.customers,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:d(o=>[o.value?(h(),b("div",Pt,[e("div",null,s(o.value.name),1)])):_("",!0)]),option:d(o=>[e("div",St,[e("div",null,s(o.option.name),1)])]),_:1},8,["modelValue","options"])]),_:1},8,["visible","header","onChange"]),i(C,{visible:n.documentDialog,"onUpdate:visible":l[20]||(l[20]=o=>n.documentDialog=o),style:{width:"450px"},header:t.$t("Select document"),modal:!0,onChange:a.handleTypeSelection},{default:d(()=>[e("label",Vt,s(t.$t("Select document type")),1),i(v,{modelValue:n.selectedType,"onUpdate:modelValue":l[18]||(l[18]=o=>n.selectedType=o),options:n.types,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500",onChange:a.handleTypeSelection},{value:d(o=>[o.value?(h(),b("div",Ft,[e("div",null,s(o.value.name),1)])):_("",!0)]),option:d(o=>[e("div",Ut,[e("div",null,s(o.option.name),1)])]),_:1},8,["modelValue","options","onChange"]),e("label",At,s(t.$t("Select document serie")),1),i(v,{modelValue:n.selectedSerie,"onUpdate:modelValue":l[19]||(l[19]=o=>n.selectedSerie=o),options:this.series,filter:"",optionLabel:"serie",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:d(o=>[o.value?(h(),b("div",Lt,[e("div",null,s(o.value.serie),1)])):_("",!0)]),option:d(o=>[e("div",jt,[e("div",null,s(o.option.serie),1)])]),_:1},8,["modelValue","options"])]),_:1},8,["visible","header","onChange"]),i(C,{visible:n.deleteProductDialog,"onUpdate:visible":l[22]||(l[22]=o=>n.deleteProductDialog=o),style:{width:"450px"},header:t.$t("Confirm"),modal:!0},{footer:d(()=>[i(y,{label:"No",icon:"pi pi-times",text:"",onClick:l[21]||(l[21]=o=>n.deleteProductDialog=!1)}),i(y,{label:"Yes",icon:"pi pi-check",text:"",onClick:a.deleteProduct},null,8,["onClick"])]),default:d(()=>[e("div",Rt,[Nt,n.companies?(h(),b("span",Mt,[c(s(t.$t("Are you sure you want to delete")),1),e("b",null,s(n.companies.name),1),c("?")])):_("",!0)])]),_:1},8,["visible","header"]),i(C,{visible:n.deleteProductsDialog,"onUpdate:visible":l[24]||(l[24]=o=>n.deleteProductsDialog=o),style:{width:"450px"},header:t.$t("Confirm"),modal:!0},{footer:d(()=>[i(y,{label:"No",icon:"pi pi-times",text:"",onClick:l[23]||(l[23]=o=>n.deleteProductsDialog=!1)}),i(y,{label:"Yes",icon:"pi pi-check",text:"",onClick:a.deleteSelectedProducts},null,8,["onClick"])]),default:d(()=>[e("div",Et,[$t,n.companies?(h(),b("span",Ot,s(t.$t("Are you sure you want to delete the selected concepts?")),1)):_("",!0)])]),_:1},8,["visible","header"])])])])]),e("div",Bt,[e("div",qt,[e("div",zt,[Xt,e("div",Ht,[e("h3",null,s(n.selectedType.name),1),e("p",null,[e("strong",null,s(t.$t("Date"))+": ",1),c(s(n.fecha),1)]),e("p",null,[e("strong",null,s(t.$t("Number of"))+" "+s(n.selectedType.name)+":",1),c(" "+s(n.selectedSerie.serie)+" "+s(n.selectedSerie.number),1)])])]),e("div",Yt,[e("div",Gt,[e("h3",null,[e("strong",null,s(t.$t("Company")),1)]),e("p",Qt,s(n.selectedCompany.name),1),e("p",null,s(n.selectedCompany.tax_number),1),e("p",null,[c(s(n.selectedCompany.address),1),Wt,c(" "+s(n.selectedCompany.post_code)+", "+s(n.selectedCompany.town)+", "+s(n.selectedCompany.province)+", "+s("(")+" "+s(n.selectedCompany.country)+" "+s(")"),1)]),e("p",null,s(n.selectedCompany.email),1),e("p",null,s(n.selectedCompany.phone),1)]),e("div",Jt,[e("h3",null,[e("strong",null,s(t.$t("Customer")),1)]),e("p",Kt,s(n.selectedCustomer.name),1),e("p",null,s(n.selectedCustomer.tax_number),1),e("p",null,[c(s(n.selectedCustomer.address),1),Zt,c(" "+s(n.selectedCustomer.post_code)+", "+s(n.selectedCustomer.town)+", "+s(n.selectedCustomer.province)+", "+s("(")+" "+s(n.selectedCustomer.country)+" "+s(")"),1)]),e("p",null,s(n.selectedCustomer.email),1),e("p",null,s(n.selectedCustomer.phone),1)])]),e("table",es,[e("thead",null,[e("tr",ts,[e("th",null,s(t.$t("Reference")),1),e("th",null,s(t.$t("Description")),1),e("th",null,s(t.$t("Quantity")),1),e("th",null,s(t.$t("Price")),1),e("th",null,s(t.$t("Tax (%)")),1),e("th",null,s(t.$t("Total")),1)])]),e("tbody",null,[(h(!0),b(k,null,N(n.products,o=>(h(),b("tr",{key:o.id},[e("td",null,s(o.reference),1),e("td",null,s(o.description),1),e("td",null,s(o.quantity),1),e("td",null,s(o.price),1),e("td",null,s(o.tax)+"%",1),e("td",null,s(a.calculateTotal(o)),1)]))),128))])]),e("div",ss,[e("div",os,[e("table",ls,[e("tr",null,[e("td",ns,s(t.$t("Subtotal (excluding Tax)")),1),e("td",null,s(a.subtotal.toFixed(2))+"€",1)]),e("tr",null,[e("td",is,s(t.$t("Total Tax")),1),e("td",null,s(a.totalIVA.toFixed(2))+"€",1)]),e("tr",null,[e("td",as,[e("strong",null,s(t.$t("Total (with IVA)")),1)]),e("td",null,[e("strong",null,s(a.totalConIVA.toFixed(2))+"€",1)])])])]),e("table",ds,[e("tr",null,[e("td",null,s(this.myDocument.bank_name),1)]),e("tr",null,[e("td",null,s(this.myDocument.swift),1)]),e("tr",null,[e("td",null,s(this.myDocument.complete_bank_account),1)])])])])])],64)}const hs=$(O,[["render",cs],["__scopeId","data-v-b7cbe822"]]);export{hs as default};
