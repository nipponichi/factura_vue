import{s as Vn,a as Un}from"./toolbar.esm-Bub9y0Hp.js";import{B as Wt,e as $t,f as jn,R as Kn,O as qn,g as $n,a as Xt,h as Bn,b as Hn,d as Gn,c as zn,s as Jn}from"./column.esm-Cd8T-z-4.js";import{O as Me,D as Ee,C as pe,i as yt,E as Wn,o as $,c as Qe,w as Z,e as Q,F as gt,h as qt,a as o,l as Oe,G as Ft,n as xt,f as he,t as d,H as Xn,I as Yt,U as Zt,J as Kt,K as Yn,b as J,r as ft,L as zt,g as ke,j as Zn,x as Qn,M as eo,v as Ne,m as Jt,z as to,A as no}from"./app-HkpKnArr.js";import{_ as oo}from"./AppLayout-Cuo3Y1lH.js";import{_ as ro}from"./_plugin-vue_export-helper-DlAUqK2U.js";var so={submenu:function(e){var n=e.instance,u=e.processedItem;return{display:n.isItemActive(u)?"block":"none"}}},io={root:function(e){var n=e.instance,u=e.props;return["p-tieredmenu p-component",{"p-tieredmenu-overlay":u.popup,"p-ripple-disabled":n.$primevue.config.ripple===!1}]},start:"p-tieredmenu-start",menu:"p-tieredmenu-root-list",menuitem:function(e){var n=e.instance,u=e.processedItem;return["p-menuitem",{"p-menuitem-active p-highlight":n.isItemActive(u),"p-focus":n.isItemFocused(u),"p-disabled":n.isItemDisabled(u)}]},content:"p-menuitem-content",action:"p-menuitem-link",icon:"p-menuitem-icon",text:"p-menuitem-text",submenuIcon:"p-submenu-icon",submenu:"p-submenu-list",separator:"p-menuitem-separator",end:"p-tieredmenu-end"},ao=Wt.extend({name:"tieredmenu",classes:io,inlineStyles:so}),lo={name:"BaseTieredMenu",extends:$t,props:{popup:{type:Boolean,default:!1},model:{type:Array,default:null},appendTo:{type:[String,Object],default:"body"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},disabled:{type:Boolean,default:!1},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:ao,provide:function(){return{$parentInstance:this}}},Qt={name:"TieredMenuSub",hostName:"TieredMenu",extends:$t,emits:["item-click","item-mouseenter","item-mousemove"],container:null,props:{menuId:{type:String,default:null},focusedItemId:{type:String,default:null},items:{type:Array,default:null},visible:{type:Boolean,default:!1},level:{type:Number,default:0},templates:{type:Object,default:null},activeItemPath:{type:Object,default:null},tabindex:{type:Number,default:0}},methods:{getItemId:function(e){return"".concat(this.menuId,"_").concat(e.key)},getItemKey:function(e){return this.getItemId(e)},getItemProp:function(e,n,u){return e&&e.item?Me.getItemValue(e.item[n],u):void 0},getItemLabel:function(e){return this.getItemProp(e,"label")},getItemLabelId:function(e){return"".concat(this.menuId,"_").concat(e.key,"_label")},getPTOptions:function(e,n,u){return this.ptm(u,{context:{item:e,index:n,active:this.isItemActive(e),focused:this.isItemFocused(e),disabled:this.isItemDisabled(e)}})},isItemActive:function(e){return this.activeItemPath.some(function(n){return n.key===e.key})},isItemVisible:function(e){return this.getItemProp(e,"visible")!==!1},isItemDisabled:function(e){return this.getItemProp(e,"disabled")},isItemFocused:function(e){return this.focusedItemId===this.getItemId(e)},isItemGroup:function(e){return Me.isNotEmpty(e.items)},onEnter:function(){Ee.nestedPosition(this.container,this.level)},onItemClick:function(e,n){this.getItemProp(n,"command",{originalEvent:e,item:n.item}),this.$emit("item-click",{originalEvent:e,processedItem:n,isFocus:!0})},onItemMouseEnter:function(e,n){this.$emit("item-mouseenter",{originalEvent:e,processedItem:n})},onItemMouseMove:function(e,n){this.$emit("item-mousemove",{originalEvent:e,processedItem:n})},getAriaSetSize:function(){var e=this;return this.items.filter(function(n){return e.isItemVisible(n)&&!e.getItemProp(n,"separator")}).length},getAriaPosInset:function(e){var n=this;return e-this.items.slice(0,e).filter(function(u){return n.isItemVisible(u)&&n.getItemProp(u,"separator")}).length+1},getMenuItemProps:function(e,n){return{action:pe({class:this.cx("action"),tabindex:-1,"aria-hidden":!0},this.getPTOptions(e,n,"action")),icon:pe({class:[this.cx("icon"),this.getItemProp(e,"icon")]},this.getPTOptions(e,n,"icon")),label:pe({class:this.cx("label")},this.getPTOptions(e,n,"label")),submenuicon:pe({class:this.cx("submenuIcon")},this.getPTOptions(e,n,"submenuIcon"))}},containerRef:function(e){this.container=e}},components:{AngleRightIcon:jn},directives:{ripple:Kn}},uo=["tabindex"],co=["id","aria-label","aria-disabled","aria-expanded","aria-haspopup","aria-level","aria-setsize","aria-posinset","data-p-highlight","data-p-focused","data-p-disabled"],fo=["onClick","onMouseenter","onMousemove"],mo=["href","target"],po=["id"],ho=["id"];function vo(t,e,n,u,S,v){var k=yt("AngleRightIcon"),H=yt("TieredMenuSub",!0),V=Wn("ripple");return $(),Qe(Yt,pe({name:"p-tieredmenu",onEnter:v.onEnter},t.ptm("menu.transition")),{default:Z(function(){return[n.level===0||n.visible?($(),Q("ul",pe({key:0,ref:v.containerRef,class:n.level===0?t.cx("menu"):t.cx("submenu"),tabindex:n.tabindex},n.level===0?t.ptm("menu"):t.ptm("submenu")),[($(!0),Q(gt,null,qt(n.items,function(A,U){return $(),Q(gt,{key:v.getItemKey(A)},[v.isItemVisible(A)&&!v.getItemProp(A,"separator")?($(),Q("li",pe({key:0,id:v.getItemId(A),style:v.getItemProp(A,"style"),class:[t.cx("menuitem",{processedItem:A}),v.getItemProp(A,"class")],role:"menuitem","aria-label":v.getItemLabel(A),"aria-disabled":v.isItemDisabled(A)||void 0,"aria-expanded":v.isItemGroup(A)?v.isItemActive(A):void 0,"aria-haspopup":v.isItemGroup(A)&&!v.getItemProp(A,"to")?"menu":void 0,"aria-level":n.level+1,"aria-setsize":v.getAriaSetSize(),"aria-posinset":v.getAriaPosInset(U)},v.getPTOptions(A,U,"menuitem"),{"data-p-highlight":v.isItemActive(A),"data-p-focused":v.isItemFocused(A),"data-p-disabled":v.isItemDisabled(A)}),[o("div",pe({class:t.cx("content"),onClick:function(oe){return v.onItemClick(oe,A)},onMouseenter:function(oe){return v.onItemMouseEnter(oe,A)},onMousemove:function(oe){return v.onItemMouseMove(oe,A)}},v.getPTOptions(A,U,"content")),[n.templates.item?($(),Qe(Ft(n.templates.item),{key:1,item:A.item,hasSubmenu:v.getItemProp(A,"items"),label:v.getItemLabel(A),props:v.getMenuItemProps(A,U)},null,8,["item","hasSubmenu","label","props"])):Oe(($(),Q("a",pe({key:0,href:v.getItemProp(A,"url"),class:t.cx("action"),target:v.getItemProp(A,"target"),tabindex:"-1","aria-hidden":"true"},v.getPTOptions(A,U,"action")),[n.templates.itemicon?($(),Qe(Ft(n.templates.itemicon),{key:0,item:A.item,class:xt(t.cx("icon"))},null,8,["item","class"])):v.getItemProp(A,"icon")?($(),Q("span",pe({key:1,class:[t.cx("icon"),v.getItemProp(A,"icon")]},v.getPTOptions(A,U,"icon")),null,16)):he("",!0),o("span",pe({id:v.getItemLabelId(A),class:t.cx("label")},v.getPTOptions(A,U,"label")),d(v.getItemLabel(A)),17,po),v.getItemProp(A,"items")?($(),Q(gt,{key:2},[n.templates.submenuicon?($(),Qe(Ft(n.templates.submenuicon),pe({key:0,class:t.cx("submenuIcon"),active:v.isItemActive(A)},v.getPTOptions(A,U,"submenuIcon")),null,16,["class","active"])):($(),Qe(k,pe({key:1,class:t.cx("submenuIcon")},v.getPTOptions(A,U,"submenuIcon")),null,16,["class"]))],64)):he("",!0)],16,mo)),[[V]])],16,fo),v.isItemVisible(A)&&v.isItemGroup(A)?($(),Qe(H,{key:0,id:v.getItemId(A)+"_list",style:Xn(t.sx("submenu",!0,{processedItem:A})),"aria-labelledby":v.getItemLabelId(A),role:"menu",menuId:n.menuId,focusedItemId:n.focusedItemId,items:A.items,templates:n.templates,activeItemPath:n.activeItemPath,level:n.level+1,visible:v.isItemActive(A)&&v.isItemGroup(A),pt:t.pt,unstyled:t.unstyled,onItemClick:e[0]||(e[0]=function(s){return t.$emit("item-click",s)}),onItemMouseenter:e[1]||(e[1]=function(s){return t.$emit("item-mouseenter",s)}),onItemMousemove:e[2]||(e[2]=function(s){return t.$emit("item-mousemove",s)})},null,8,["id","style","aria-labelledby","menuId","focusedItemId","items","templates","activeItemPath","level","visible","pt","unstyled"])):he("",!0)],16,co)):he("",!0),v.isItemVisible(A)&&v.getItemProp(A,"separator")?($(),Q("li",pe({key:1,id:v.getItemId(A),style:v.getItemProp(A,"style"),class:[t.cx("separator"),v.getItemProp(A,"class")],role:"separator"},t.ptm("separator")),null,16,ho)):he("",!0)],64)}),128))],16,uo)):he("",!0)]}),_:1},16,["onEnter"])}Qt.render=vo;var en={name:"TieredMenu",extends:lo,inheritAttrs:!1,emits:["focus","blur","before-show","before-hide","hide","show"],outsideClickListener:null,scrollHandler:null,resizeListener:null,target:null,container:null,menubar:null,searchTimeout:null,searchValue:null,data:function(){return{id:this.$attrs.id,focused:!1,focusedItemInfo:{index:-1,level:0,parentKey:""},activeItemPath:[],visible:!this.popup,submenuVisible:!1,dirty:!1}},watch:{"$attrs.id":{immediate:!0,handler:function(e){this.id=e||Zt()}},activeItemPath:function(e){this.popup||(Me.isNotEmpty(e)?(this.bindOutsideClickListener(),this.bindResizeListener()):(this.unbindOutsideClickListener(),this.unbindResizeListener()))}},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&Kt.clear(this.container),this.target=null,this.container=null},methods:{getItemProp:function(e,n){return e?Me.getItemValue(e[n]):void 0},getItemLabel:function(e){return this.getItemProp(e,"label")},isItemDisabled:function(e){return this.getItemProp(e,"disabled")},isItemVisible:function(e){return this.getItemProp(e,"visible")!==!1},isItemGroup:function(e){return Me.isNotEmpty(this.getItemProp(e,"items"))},isItemSeparator:function(e){return this.getItemProp(e,"separator")},getProccessedItemLabel:function(e){return e?this.getItemLabel(e.item):void 0},isProccessedItemGroup:function(e){return e&&Me.isNotEmpty(e.items)},toggle:function(e){this.visible?this.hide(e,!0):this.show(e)},show:function(e,n){this.popup&&(this.$emit("before-show"),this.visible=!0,this.target=this.target||e.currentTarget,this.relatedTarget=e.relatedTarget||null),n&&Ee.focus(this.menubar)},hide:function(e,n){this.popup&&(this.$emit("before-hide"),this.visible=!1),this.activeItemPath=[],this.focusedItemInfo={index:-1,level:0,parentKey:""},n&&Ee.focus(this.relatedTarget||this.target||this.menubar),this.dirty=!1},onFocus:function(e){this.focused=!0,this.popup||(this.focusedItemInfo=this.focusedItemInfo.index!==-1?this.focusedItemInfo:{index:this.findFirstFocusedItemIndex(),level:0,parentKey:""}),this.$emit("focus",e)},onBlur:function(e){this.focused=!1,this.focusedItemInfo={index:-1,level:0,parentKey:""},this.searchValue="",this.dirty=!1,this.$emit("blur",e)},onKeyDown:function(e){if(this.disabled){e.preventDefault();return}var n=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"ArrowRight":this.onArrowRightKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"Space":this.onSpaceKey(e);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"PageDown":case"PageUp":case"Backspace":case"ShiftLeft":case"ShiftRight":break;default:!n&&Me.isPrintableCharacter(e.key)&&this.searchItems(e,e.key);break}},onItemChange:function(e){var n=e.processedItem,u=e.isFocus;if(!Me.isEmpty(n)){var S=n.index,v=n.key,k=n.level,H=n.parentKey,V=n.items,A=Me.isNotEmpty(V),U=this.activeItemPath.filter(function(s){return s.parentKey!==H&&s.parentKey!==v});A&&(U.push(n),this.submenuVisible=!0),this.focusedItemInfo={index:S,level:k,parentKey:H},this.activeItemPath=U,A&&(this.dirty=!0),u&&Ee.focus(this.menubar)}},onOverlayClick:function(e){qn.emit("overlay-click",{originalEvent:e,target:this.target})},onItemClick:function(e){var n=e.originalEvent,u=e.processedItem,S=this.isProccessedItemGroup(u),v=Me.isEmpty(u.parent),k=this.isSelected(u);if(k){var H=u.index,V=u.key,A=u.level,U=u.parentKey;this.activeItemPath=this.activeItemPath.filter(function(oe){return V!==oe.key&&V.startsWith(oe.key)}),this.focusedItemInfo={index:H,level:A,parentKey:U},this.dirty=!v,Ee.focus(this.menubar)}else if(S)this.onItemChange(e);else{var s=v?u:this.activeItemPath.find(function(oe){return oe.parentKey===""});this.hide(n),this.changeFocusedItemIndex(n,s?s.index:-1),Ee.focus(this.menubar)}},onItemMouseEnter:function(e){this.dirty&&this.onItemChange(e)},onItemMouseMove:function(e){this.focused&&this.changeFocusedItemIndex(e,e.processedItem.index)},onArrowDownKey:function(e){var n=this.focusedItemInfo.index!==-1?this.findNextItemIndex(this.focusedItemInfo.index):this.findFirstFocusedItemIndex();this.changeFocusedItemIndex(e,n),e.preventDefault()},onArrowUpKey:function(e){if(e.altKey){if(this.focusedItemInfo.index!==-1){var n=this.visibleItems[this.focusedItemInfo.index],u=this.isProccessedItemGroup(n);!u&&this.onItemChange({originalEvent:e,processedItem:n})}this.popup&&this.hide(e,!0),e.preventDefault()}else{var S=this.focusedItemInfo.index!==-1?this.findPrevItemIndex(this.focusedItemInfo.index):this.findLastFocusedItemIndex();this.changeFocusedItemIndex(e,S),e.preventDefault()}},onArrowLeftKey:function(e){var n=this,u=this.visibleItems[this.focusedItemInfo.index],S=this.activeItemPath.find(function(k){return k.key===u.parentKey}),v=Me.isEmpty(u.parent);v||(this.focusedItemInfo={index:-1,parentKey:S?S.parentKey:""},this.searchValue="",this.onArrowDownKey(e)),this.activeItemPath=this.activeItemPath.filter(function(k){return k.parentKey!==n.focusedItemInfo.parentKey}),e.preventDefault()},onArrowRightKey:function(e){var n=this.visibleItems[this.focusedItemInfo.index],u=this.isProccessedItemGroup(n);u&&(this.onItemChange({originalEvent:e,processedItem:n}),this.focusedItemInfo={index:-1,parentKey:n.key},this.searchValue="",this.onArrowDownKey(e)),e.preventDefault()},onHomeKey:function(e){this.changeFocusedItemIndex(e,this.findFirstItemIndex()),e.preventDefault()},onEndKey:function(e){this.changeFocusedItemIndex(e,this.findLastItemIndex()),e.preventDefault()},onEnterKey:function(e){if(this.focusedItemInfo.index!==-1){var n=Ee.findSingle(this.menubar,'li[id="'.concat("".concat(this.focusedItemId),'"]')),u=n&&Ee.findSingle(n,'[data-pc-section="action"]');if(u?u.click():n&&n.click(),!this.popup){var S=this.visibleItems[this.focusedItemInfo.index],v=this.isProccessedItemGroup(S);!v&&(this.focusedItemInfo.index=this.findFirstFocusedItemIndex())}}e.preventDefault()},onSpaceKey:function(e){this.onEnterKey(e)},onEscapeKey:function(e){if(this.focusedItemInfo.level!==0){var n=this.focusedItemInfo;this.hide(e,!1),!this.popup&&(this.focusedItemInfo={index:Number(n.parentKey.split("_")[0]),level:0,parentKey:""})}e.preventDefault()},onTabKey:function(e){if(this.focusedItemInfo.index!==-1){var n=this.visibleItems[this.focusedItemInfo.index],u=this.isProccessedItemGroup(n);!u&&this.onItemChange({originalEvent:e,processedItem:n})}this.hide()},onEnter:function(e){this.autoZIndex&&Kt.set("menu",e,this.baseZIndex+this.$primevue.config.zIndex.menu),Ee.addStyles(e,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),Ee.focus(this.menubar),this.scrollInView()},onAfterEnter:function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.$emit("hide"),this.container=null,this.dirty=!1},onAfterLeave:function(e){this.autoZIndex&&Kt.clear(e)},alignOverlay:function(){Ee.absolutePosition(this.container,this.target);var e=Ee.getOuterWidth(this.target);e>Ee.getOuterWidth(this.container)&&(this.container.style.minWidth=Ee.getOuterWidth(this.target)+"px")},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){var u=e.container&&!e.container.contains(n.target),S=e.popup?!(e.target&&(e.target===n.target||e.target.contains(n.target))):!0;u&&S&&e.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var e=this;this.scrollHandler||(this.scrollHandler=new Yn(this.target,function(n){e.hide(n,!0)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(n){Ee.isTouchDevice()||e.hide(n,!0)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isItemMatched:function(e){var n;return this.isValidItem(e)&&((n=this.getProccessedItemLabel(e))===null||n===void 0?void 0:n.toLocaleLowerCase().startsWith(this.searchValue.toLocaleLowerCase()))},isValidItem:function(e){return!!e&&!this.isItemDisabled(e.item)&&!this.isItemSeparator(e.item)&&this.isItemVisible(e.item)},isValidSelectedItem:function(e){return this.isValidItem(e)&&this.isSelected(e)},isSelected:function(e){return this.activeItemPath.some(function(n){return n.key===e.key})},findFirstItemIndex:function(){var e=this;return this.visibleItems.findIndex(function(n){return e.isValidItem(n)})},findLastItemIndex:function(){var e=this;return Me.findLastIndex(this.visibleItems,function(n){return e.isValidItem(n)})},findNextItemIndex:function(e){var n=this,u=e<this.visibleItems.length-1?this.visibleItems.slice(e+1).findIndex(function(S){return n.isValidItem(S)}):-1;return u>-1?u+e+1:e},findPrevItemIndex:function(e){var n=this,u=e>0?Me.findLastIndex(this.visibleItems.slice(0,e),function(S){return n.isValidItem(S)}):-1;return u>-1?u:e},findSelectedItemIndex:function(){var e=this;return this.visibleItems.findIndex(function(n){return e.isValidSelectedItem(n)})},findFirstFocusedItemIndex:function(){var e=this.findSelectedItemIndex();return e<0?this.findFirstItemIndex():e},findLastFocusedItemIndex:function(){var e=this.findSelectedItemIndex();return e<0?this.findLastItemIndex():e},searchItems:function(e,n){var u=this;this.searchValue=(this.searchValue||"")+n;var S=-1,v=!1;return this.focusedItemInfo.index!==-1?(S=this.visibleItems.slice(this.focusedItemInfo.index).findIndex(function(k){return u.isItemMatched(k)}),S=S===-1?this.visibleItems.slice(0,this.focusedItemInfo.index).findIndex(function(k){return u.isItemMatched(k)}):S+this.focusedItemInfo.index):S=this.visibleItems.findIndex(function(k){return u.isItemMatched(k)}),S!==-1&&(v=!0),S===-1&&this.focusedItemInfo.index===-1&&(S=this.findFirstFocusedItemIndex()),S!==-1&&this.changeFocusedItemIndex(e,S),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){u.searchValue="",u.searchTimeout=null},500),v},changeFocusedItemIndex:function(e,n){this.focusedItemInfo.index!==n&&(this.focusedItemInfo.index=n,this.scrollInView())},scrollInView:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,n=e!==-1?"".concat(this.id,"_").concat(e):this.focusedItemId,u=Ee.findSingle(this.menubar,'li[id="'.concat(n,'"]'));u&&u.scrollIntoView&&u.scrollIntoView({block:"nearest",inline:"start"})},createProcessedItems:function(e){var n=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",k=[];return e&&e.forEach(function(H,V){var A=(v!==""?v+"_":"")+V,U={item:H,index:V,level:u,key:A,parent:S,parentKey:v};U.items=n.createProcessedItems(H.items,u+1,U,A),k.push(U)}),k},containerRef:function(e){this.container=e},menubarRef:function(e){this.menubar=e?e.$el:void 0}},computed:{processedItems:function(){return this.createProcessedItems(this.model||[])},visibleItems:function(){var e=this,n=this.activeItemPath.find(function(u){return u.key===e.focusedItemInfo.parentKey});return n?n.items:this.processedItems},focusedItemId:function(){return this.focusedItemInfo.index!==-1?"".concat(this.id).concat(Me.isNotEmpty(this.focusedItemInfo.parentKey)?"_"+this.focusedItemInfo.parentKey:"","_").concat(this.focusedItemInfo.index):null}},components:{TieredMenuSub:Qt,Portal:$n}},go=["id"];function xo(t,e,n,u,S,v){var k=yt("TieredMenuSub"),H=yt("Portal");return $(),Qe(H,{appendTo:t.appendTo,disabled:!t.popup},{default:Z(function(){return[J(Yt,pe({name:"p-connected-overlay",onEnter:v.onEnter,onAfterEnter:v.onAfterEnter,onLeave:v.onLeave,onAfterLeave:v.onAfterLeave},t.ptm("transition")),{default:Z(function(){return[S.visible?($(),Q("div",pe({key:0,ref:v.containerRef,id:S.id,class:t.cx("root"),onClick:e[0]||(e[0]=function(){return v.onOverlayClick&&v.onOverlayClick.apply(v,arguments)})},t.ptmi("root")),[t.$slots.start?($(),Q("div",pe({key:0,class:t.cx("start")},t.ptm("start")),[ft(t.$slots,"start")],16)):he("",!0),J(k,{ref:v.menubarRef,id:S.id+"_list",tabindex:t.disabled?-1:t.tabindex,role:"menubar","aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,"aria-disabled":t.disabled||void 0,"aria-orientation":"vertical","aria-activedescendant":S.focused?v.focusedItemId:void 0,menuId:S.id,focusedItemId:S.focused?v.focusedItemId:void 0,items:v.processedItems,templates:t.$slots,activeItemPath:S.activeItemPath,level:0,visible:S.submenuVisible,pt:t.pt,unstyled:t.unstyled,onFocus:v.onFocus,onBlur:v.onBlur,onKeydown:v.onKeyDown,onItemClick:v.onItemClick,onItemMouseenter:v.onItemMouseEnter,onItemMousemove:v.onItemMouseMove},null,8,["id","tabindex","aria-label","aria-labelledby","aria-disabled","aria-activedescendant","menuId","focusedItemId","items","templates","activeItemPath","visible","pt","unstyled","onFocus","onBlur","onKeydown","onItemClick","onItemMouseenter","onItemMousemove"]),t.$slots.end?($(),Q("div",pe({key:1,class:t.cx("end")},t.ptm("end")),[ft(t.$slots,"end")],16)):he("",!0)],16,go)):he("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo","disabled"])}en.render=xo;var yo={root:function(e){var n=e.props;return["p-splitbutton p-component",{"p-button-raised":n.raised,"p-button-rounded":n.rounded,"p-button-text":n.text,"p-button-outlined":n.outlined,"p-button-sm":n.size==="small","p-button-lg":n.size==="large"}]},button:"p-splitbutton-defaultbutton",menuButton:"p-splitbutton-menubutton"},bo=Wt.extend({name:"splitbutton",classes:yo}),Io={name:"BaseSplitButton",extends:$t,props:{label:{type:String,default:null},icon:{type:String,default:null},model:{type:Array,default:null},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},appendTo:{type:[String,Object],default:"body"},disabled:{type:Boolean,default:!1},class:{type:null,default:null},style:{type:null,default:null},buttonProps:{type:null,default:null},menuButtonProps:{type:null,default:null},menuButtonIcon:{type:String,default:void 0},severity:{type:String,default:null},raised:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},size:{type:String,default:null},plain:{type:Boolean,default:!1}},style:bo,provide:function(){return{$parentInstance:this}}},tn={name:"SplitButton",extends:Io,inheritAttrs:!1,emits:["click"],data:function(){return{id:this.$attrs.id,isExpanded:!1}},watch:{"$attrs.id":{immediate:!0,handler:function(e){this.id=e||Zt()}}},mounted:function(){var e=this;this.$watch("$refs.menu.visible",function(n){e.isExpanded=n})},methods:{onDropdownButtonClick:function(e){e&&e.preventDefault(),this.$refs.menu.toggle({currentTarget:this.$el,relatedTarget:this.$refs.button.$el}),this.isExpanded=this.$refs.menu.visible},onDropdownKeydown:function(e){(e.code==="ArrowDown"||e.code==="ArrowUp")&&(this.onDropdownButtonClick(),e.preventDefault())},onDefaultButtonClick:function(e){this.isExpanded&&this.$refs.menu.hide(e),this.$emit("click",e)}},computed:{containerClass:function(){return[this.cx("root"),this.class]}},components:{PVSButton:Xt,PVSMenu:en,ChevronDownIcon:Bn}},So=["data-p-severity"];function Co(t,e,n,u,S,v){var k=yt("PVSButton"),H=yt("PVSMenu");return $(),Q("div",pe({class:v.containerClass,style:t.style},t.ptmi("root"),{"data-p-severity":t.severity}),[J(k,pe({type:"button",class:t.cx("button"),label:t.label,disabled:t.disabled,severity:t.severity,text:t.text,outlined:t.outlined,size:t.size,"aria-label":t.label,onClick:v.onDefaultButtonClick},t.buttonProps,{pt:t.ptm("button"),unstyled:t.unstyled}),zt({default:Z(function(){return[ft(t.$slots,"default")]}),_:2},[t.$slots.icon?{name:"icon",fn:Z(function(V){return[ft(t.$slots,"icon",{class:xt(V.class)},function(){return[o("span",pe({class:[t.icon,V.class]},t.ptm("button").icon,{"data-pc-section":"buttonicon"}),null,16)]})]}),key:"0"}:void 0]),1040,["class","label","disabled","severity","text","outlined","size","aria-label","onClick","pt","unstyled"]),J(k,pe({ref:"button",type:"button",class:t.cx("menuButton"),disabled:t.disabled,"aria-haspopup":"true","aria-expanded":S.isExpanded,"aria-controls":S.id+"_overlay",onClick:v.onDropdownButtonClick,onKeydown:v.onDropdownKeydown,severity:t.severity,text:t.text,outlined:t.outlined,size:t.size},t.menuButtonProps,{pt:t.ptm("menuButton"),unstyled:t.unstyled}),{icon:Z(function(V){return[ft(t.$slots,"menubuttonicon",{class:xt(V.class)},function(){return[($(),Qe(Ft(t.menuButtonIcon?"span":"ChevronDownIcon"),pe({class:[t.menuButtonIcon,V.class]},t.ptm("menuButton").icon,{"data-pc-section":"menubuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","disabled","aria-expanded","aria-controls","onClick","onKeydown","severity","text","outlined","size","pt","unstyled"]),J(H,{ref:"menu",id:S.id+"_overlay",model:t.model,popup:!0,autoZIndex:t.autoZIndex,baseZIndex:t.baseZIndex,appendTo:t.appendTo,unstyled:t.unstyled,pt:t.ptm("menu")},zt({_:2},[t.$slots.menuitemicon?{name:"itemicon",fn:Z(function(V){return[ft(t.$slots,"menuitemicon",{item:V.item,class:xt(V.class)})]}),key:"0"}:void 0,t.$slots.item?{name:"item",fn:Z(function(V){return[ft(t.$slots,"item",{item:V.item,hasSubmenu:V.hasSubmenu,label:V.label,props:V.props})]}),key:"1"}:void 0]),1032,["id","model","autoZIndex","baseZIndex","appendTo","unstyled","pt"])],16,So)}tn.render=Co;function ko(t,e){return t+e}function Ao(t,e){return t-e}function To(){return console.log(window.location.origin)}if(document.all&&!window.setTimeout.isPolyfill){var wo=window.setTimeout;window.setTimeout=function(t,e){var n=Array.prototype.slice.call(arguments,2);return wo(t instanceof Function?function(){t.apply(null,n)}:t,e)},window.setTimeout.isPolyfill=!0}var Eo=window.XMLHttpRequest,Ue=function(t,e){var n="1.8.2.1",u=2,S=null,v=null,k=null,H=null,V=null,A=!1,U=!1,s=!1,oe=new Array;oe.es_ES={checktime_warn:"Se ha detectado un desfase horario entre su sistema y el servidor. Se recomienda que se corrija antes de pulsar Aceptar para continuar.",checktime_err:"Se ha detectado un desfase horario entre su sistema y el servidor. Debe corregir la hora de su sistema y recargar esta página antes de continuar.",checktime_local_time:"Hora de su sistema",checktime_server_time:"Hora del servidor"},oe.gl_ES={checktime_warn:"Destectouse un desfase horario entre o seu sistema e o servidor. Recoméndase corrixilo antes de pulsar Aceptar para continuar.",checktime_err:"Destectouse un desfase horario entre o seu sistema e o servidor. Debe corrixir a hora do seu sistema antes de continuar.",checktime_local_time:"Hora do seu sistema",checktime_server_time:"Hora do servidor"};var Ye=oe.es_ES,Le=Ye,me=null,je="WINDOWS",Ke="APPLE",G="PKCS12",qe="PKCS11",ye="MOZ_UNI",Y="SHARED_NSS",O="JAVA",Je="JCEKS",re="JAVACE",ne="DNIEJAVA",Fe="CT_NO",bt="CT_RECOMMENDED",It="CT_OBLIGATORY",Dt=2e3,St=15,mt=!1,Ve,nt,Re,et=null,Mt=!1;function nn(){return"WebSocket"in t||"MozWebSocket"in t}function pt(b){return b!=null&&b.length>8&&(b.substr(0,5)=="http:"||b.substr(0,6)=="https:")}var Vt=null,Ut=null,ht=null;function on(b,_,x){Vt=_,Ut=x;var M=Ze();M.open("GET",b,!0),"responseType"in M&&Uint8Array?(M.responseType="arraybuffer",ht="arraybuffer"):"overrideMimeType"in M?(M.overrideMimeType("text/plain; charset=x-user-defined"),ht="string"):(M.setRequestHeader("Accept-Charset","x-user-defined"),ht="bytearray"),"onload"in M||(M.onreadystatechange=function(){this.readyState===4&&this.onload()}),M.onload=function(q){if(M.readyState==4&&M.status==200&&Vt){"response"in this||(this.response=new VBArray(this.responseBody).toArray());var K;ht=="arraybuffer"?K=D.encodeArrayBuffer(this.response):ht=="bytearray"?K=D.encodeByteArray(this.response):ht=="string"?K=D.encode(this.response):this.onerror(new Error("No se conoce el modo usado para la descarga de los datos")),Vt(K)}};try{M.onerror=function(q){Ut&&Ut(q)}}catch{}M.send()}function Ze(){var b=null;if(typeof XMLHttpRequest<"u")typeof Sarissa<"u"&&Sarissa.originalXMLHttpRequest?b=new Sarissa.originalXMLHttpRequest:b=new Eo;else if(typeof t.ActiveXObject<"u")try{b=new ActiveXObject("Msxml2.XMLHTTP.4.0")}catch{try{b=new ActiveXObject("MSXML2.XMLHTTP")}catch{try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch{b=null}}}return b}var rn=function(b){mt=b},sn=function(b){Re=b};function an(){return!0}function ln(){return!1}var un=function(b){},cn=function(b){},Bt=function(b,_,x){if(!(!b||b==Fe||_&&_<=0)){_||(_=3e5);try{var M;x?M=x:M=document.URL+"/"+Math.random();var q=Ze();q.open("GET",M,!1),q.send();var K=new Date,se=new Date(q.getResponseHeader("Date"));if(se==null||se.getTime()==0)return;console.log("Hora cliente: "+K),console.log("Hora servidor: "+se);var _e=Math.abs(K.getTime()-se.getTime());_e>_&&(b==bt?alert(Le.checktime_warn+`
`+Le.checktime_local_time+": "+K.toLocaleString()+`
`+Le.checktime_server_time+": "+se.toLocaleString()):b==It&&(A=!0,alert(Le.checktime_err+`
`+Le.checktime_local_time+": "+K.toLocaleString()+`
`+Le.checktime_server_time+": "+se.toLocaleString())))}catch(ve){console.log("Error en la obtencion de la hora del servidor: "+ve);return}}};function dn(){return ie.isFirefox()?ye:null}var fn=function(b){k.setKeyStore(b??me),s=!0},mn=function(b,_,x){k.selectCertificate(b,_,x),s=!1},pn=function(b,_,x,M,q,K){k.sign(b,_,x,M,q,K),s=!1},hn=function(b,_,x,M,q,K,se){k.coSign(b,x,M,q,K,se),s=!1},vn=function(b,_,x,M,q,K){k.coSign(b,_,x,M,q,K),s=!1},gn=function(b,_,x,M,q,K){k.counterSign(b,_,x,M,q,K),s=!1},xn=function(b,_,x,M,q,K,se,_e){k.signAndSaveToFile(b,_,x,M,q,K,se,_e),s=!1},yn=function(b,_,x,M,q,K){k.signBatchXML(b,_,x,M,q,K),s=!1},bn=function(b,_,x,M){var q=new Object;q.algorithm=b,q.format=_,q.suboperation=x,M&&(q.extraparams=D.encode(M)),q.singlesigns=new Array,et=q},In=function(b,_,x,M,q){if(!b||_==null)throw new Error("No se ha indicado el id o datareference de la firma");if(!et)throw new Error("No hay ningun lote creado. Es necesario crear uno antes de agregar firmas");be.checkExistingId(et.singlesigns,b);var K=new Object;K.id=b,K.datareference=_,x&&(K.format=x),M&&(K.suboperation=M),q&&(K.extraparams=D.encode(q)),et.singlesigns.push(K)},Sn=function(b){Mt=b},Cn=function(b,_,x,M,q,K){if(!et)throw new Error("No hay ningun lote creado. Es necesario crear uno antes de firmar.");et.stoponerror=b;var se=D.encode(JSON.stringify(et),!0);k.signBatchJSON(se,_,x,M,q,K),et=null,s=!1},kn=function(b){return b!=null?D.encode(b):null},An=function(b){return b!=null?D.decode(b):null},Tn=function(b,_,x,M,q,K,se){k.saveDataToFile(b,_,x,M,q,K,se)},wn=function(b,_,x,M,q,K){k.getFileNameContentBase64(b,_,x,M,q,K)},En=function(b,_,x,M,q,K){k.getMultiFileNameContentBase64(b,_,x,M,q,K)},On=function(b,_){k.getCurrentLog(b,_)},_n=function(){return k.echo()},Lt=function(b){U&&!b&&(s=!0),U=b},Nt=function(b){Le=b==null||oe[b]==null?Ye:oe[b]},Rn=function(){return k.getErrorMessage()},Pn=function(){return k.getErrorType()},Dn=function(b,_){H=b,V=_,k&&k.setServlets&&k.setServlets(b,_)},Mn=function(b,_){var x=1024,M=65535;Ve=b&&b>=x&&b<=M?b:x,nt=_?_<=M&&_>=Ve?_:M:b&&b==Ve?Ve:M,k&&k.setPortRange&&k.setPortRange(Ve,nt)};function jt(b){if(ie.isChrome()||ie.isIOS()||ie.isAndroid()&&ie.isFirefox())document.location=b;else{if(document.getElementById("iframeAfirma")!=null)try{var _=document.getElementById("iframeAfirma");_.outerHTML=""}catch{}navigator.msLaunchUri?navigator.msLaunchUri(b,null,function(){wrongInstallation=!0}):Ln(b)}}function Ln(b){var _=document.createElement("iframe"),x=document.createAttribute("id");x.value="iframeAfirma",_.setAttributeNode(x);var M=document.createAttribute("src");M.value=b,_.setAttributeNode(M);var q=document.createAttribute("height");q.value=1,_.setAttributeNode(q);var K=document.createAttribute("width");if(K.value=1,_.setAttributeNode(K),!ie.isInternetExplorer7orLower()){var se=document.createAttribute("style");se.value="display: none;",_.setAttributeNode(se)}document.body.appendChild(_)}function Ht(b,_,x){if(A){console&&console.log&&console.log("Se ha detectado un desfase grave entre la hora del sistema y la del servidor. Se cancela la carga del cliente de firma");return}mt||ie.isIOS()||ie.isAndroid()?(k=new Gt(b,t,e),(H||V)&&k.setServlets(H,V)):nn()&&!ie.isInternetExplorer()&&!ie.isFirefox60orLower()?(k=new Nn(t,e),Ve&&k.setPortRange(Ve,nt)):!ie.isInternetExplorer10orLower()&&!ie.isSafari10()?(k=new Fn(b,t,e),Ve&&k.setPortRange(Ve,nt)):(k=new Gt(b,t,e),(H||V)&&k.setServlets(H,V)),_||(_=dn()),k.setKeyStore(_)}var ie=function(b,_){function x(){return navigator.userAgent.toUpperCase().indexOf("ANDROID")!=-1||navigator.appVersion.toUpperCase().indexOf("ANDROID")!=-1||navigator.userAgent.toUpperCase().indexOf("SILK/")!=-1||navigator.userAgent.toUpperCase().indexOf("KFJWI")!=-1||navigator.userAgent.toUpperCase().indexOf("KFJWA")!=-1||navigator.userAgent.toUpperCase().indexOf("KFTT")!=-1||navigator.userAgent.toUpperCase().indexOf("KFOT")!=-1||navigator.userAgent.toUpperCase().indexOf("KINDLE FIRE")!=-1}function M(){return navigator.userAgent.toUpperCase().indexOf("IPAD")!=-1||navigator.userAgent.toUpperCase().indexOf("IPOD")!=-1||navigator.userAgent.toUpperCase().indexOf("IPHONE")!=-1||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}function q(){return!!navigator.userAgent.match(/MSIE/)||!!(navigator.userAgent.match(/Trident/)&&navigator.userAgent.match(/rv:11/))||!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)}function K(){return!!navigator.userAgent.match(/MSIE/)}function se(){var ce=navigator.userAgent.toLowerCase();return 7>=(ce.indexOf("msie")!=-1)?parseInt(ce.split("msie")[1]):!1}function _e(){return navigator.sayswho=function(){var ce=navigator.userAgent,ee,le=ce.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(le[1])?(ee=/\brv[ :]+(\d+)/g.exec(ce)||[],"IE "+(ee[1]||"")):le[1]==="Chrome"&&(ee=ce.match(/\b(OPR|Edge)\/(\d+)/),ee!=null)?ee.slice(1).join(" ").replace("OPR","Opera"):(le=le[2]?[le[1],le[2]]:[navigator.appName,navigator.appVersion,"-?"],(ee=ce.match(/version\/(\d+)/i))!=null&&le.splice(1,1,ee[1]),le.join(" "))}(),navigator.sayswho=="Safari 10"}function ve(){return navigator.userAgent.toUpperCase().indexOf("FIREFOX")!=-1}function Ae(){navigator.sayswho=function(){var ee=navigator.userAgent,le,ae=ee.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(ae[1])?(le=/\brv[ :]+(\d+)/g.exec(ee)||[],"IE "+(le[1]||"")):ae[1]==="Chrome"&&(le=ee.match(/\b(OPR|Edge)\/(\d+)/),le!=null)?le.slice(1).join(" ").replace("OPR","Opera"):(ae=ae[2]?[ae[1],ae[2]]:[navigator.appName,navigator.appVersion,"-?"],(le=ee.match(/version\/(\d+)/i))!=null&&ae.splice(1,1,le[1]),ae.join(" "))}();var ce=navigator.sayswho;return ce.indexOf("Firefox")!=-1?60>=parseInt(ce.split("Firefox")[1]):!1}function ge(){return navigator.userAgent.toUpperCase().indexOf("CHROME/")!=-1||navigator.userAgent.toUpperCase().indexOf("CHROMIUM")!=-1}return{isAndroid:x,isIOS:M,isInternetExplorer:q,isInternetExplorer10orLower:K,isInternetExplorer7orLower:se,isSafari10:_e,isFirefox:ve,isFirefox60orLower:Ae,isChrome:ge}}(),be=function(b,_){var x=2147483648,M="1234567890abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",q=1024,K=49152,se=65535;function _e(){var te=20,R="",W;if(typeof b.crypto<"u"&&typeof b.crypto.getRandomValues<"u")W=new Uint32Array(te),b.crypto.getRandomValues(W);else{W=new Array(te);for(var z=0;z<te;z++)W[z]=ve()}for(var z=0;z<te;z++)R+=M.charAt(Math.floor(W[z]%M.length));return R}function ve(){return ge()*x}var Ae;function ge(){return Ae==_&&(Ae=new Date().getMilliseconds()*1e3*Math.random()),Ae=(Ae*9301+49297)%233280,Ae/233280}function ce(te,R){var W=te?Math.max(te,q):K,z=R?Math.min(R,se):se,F=new Array;switch(z-W){case 0:F[0]=W;break;case 1:F[0]=ee(W,z,F),F[1]=ee(W,z,F);break;default:F[0]=ee(W,z,F),F[1]=ee(W,z,F),F[2]=ee(W,z,F)}return F}function ee(te,R,W){if(W.length>R-te)return 0;var z;do{var F=Math.floor(Math.random()*(R+1-te))+te;z=le(F,W)}while(z);return F}function le(te,R){for(var W=0;W<R.length;W++)if(R[W]===te)return!0;return!1}function ae(te){var R=D.decode(te);return JSON.parse(R)}function X(te,R){for(var W=0;W<te.length;W++)if(te[W].id==R)throw new Error('El id de la firma a agregar = "'+te[W].id+'" ya existe en el lote')}return{generateNewIdSession:_e,getRandomPorts:ce,parseJSONData:ae,checkExistingId:X,getRandom:ve}}(t,e),Nn=function(b,_){var x=4,M="127.0.0.1",q="wss://"+M+":",K="load",se="multiload",_e="save",ve="batch",Ae="log",ge="certificate",ce="sign",ee="",le="",ae="",X="",te="",R=!1,W=be.generateNewIdSession(),z=null,F=null,Pe=null,ot=null,rt=null,st=function(f,h){ot=f,rt=h},Ct=function(f){z=f},kt=function(f,h,r){ue(h,r),X=ge;var a=We(f);xe(Se(a))},At=function(f,h,r,a,m,c){it("sign",f,h,r,a,m,c)},Tt=function(f,h,r,a,m,c){it("cosign",f,h,r,a,m,c)},wt=function(f,h,r,a,m,c){it("countersign",f,h,r,a,m,c)};function it(f,h,r,a,m,c,I){ue(c,I),X=ce;var N=Be(f,r,a,m,Te(h));xe(Se(N))}var at=function(f,h,r,a,m,c,I,N){ue(I,N),X=ce;var B=He(f,Te(h),r,a,m,c);xe(Se(B))},Et=function(f,h,r,a,m,c){ue(m,c),X=ve;var I=lt(h,r,a,Te(f),!1);xe(Se(I))},Ot=function(f,h,r,a,m,c){ue(m,c),X=ve;var I=lt(h,r,a,f,!0);xe(Se(I))},_t=function(f,h,r,a,m,c){ue(m,c),X=K;var I=ut("load",f,h,r,a,!1);xe(Se(I))},Rt=function(f,h,r,a,m,c){ue(m,c),X=se;var I=ut("load",f,h,r,a,!0);xe(Se(I))},Ie=function(f,h){ue(f,h),X=Ae;var r=ut("getLog");xe(Se(r))},$e=function(f,h,r,a,m,c,I){ue(c,I),X=_e;var N=ct(Te(f),h,r,a,m);xe(Se(N))};function ue(f,h){F=f,Pe=h}function Te(f){return f?f.replace(/\+/g,"-").replace(/\//g,"_"):null}function We(f){var h=new Object;return h.op=y("op","selectcert"),h.idsession=y("idsession",W),h.properties=y("properties",f!=null?D.encode(f,!0):null,!0),h.ksb64=y("ksb64",z!=null?D.encode(z,!0):null,!0),h.sticky=y("sticky",U),s&&(h.resetSticky=y("resetsticky",s)),h}function Be(f,h,r,a,m){var c=new Object;return c.op=y("op",f),c.idsession=y("idsession",W),c.algorithm=y("algorithm",h),c.format=y("format",r),c.properties=y("properties",a!=null?D.encode(a,!0):null,!0),c.ksb64=y("ksb64",z!=null?D.encode(z,!0):null,!0),c.sticky=y("sticky",U),s&&(c.resetSticky=y("resetsticky",s)),c.dat=y("dat",m==""?null:m,!0),c}function He(f,h,r,a,m,c){var I=new Object;return I.op=y("op","signandsave"),I.idsession=y("idsession",W),I.cryptoOp=y("cop",f),I.algorithm=y("algorithm",r),I.format=y("format",a),I.properties=y("properties",m?D.encode(m,!0):null,!0),I.filename=y("filename",c),I.ksb64=y("ksb64",z?D.encode(z,!0):null,!0),I.sticky=y("sticky",U),s&&(I.resetSticky=y("resetsticky",s)),I.dat=y("dat",h==""?null:h,!0),I}function lt(f,h,r,a,m){var c=new Object;return c.op=y("op","batch"),c.idsession=y("idsession",W),c.batchpresignerurl=y("batchpresignerurl",f),c.batchpostsignerurl=y("batchpostsignerurl",h),c.properties=y("properties",r!=null?D.encode(r,!0):null,!0),c.ksb64=y("ksb64",z!=null?D.encode(z,!0):null,!0),c.sticky=y("sticky",U),s&&(c.resetSticky=y("resetsticky",s)),c.needcert=y("needcert",!0),c.dat=y("dat",a==""?null:a,!0),m&&(c.jsonbatch=y("jsonbatch",!0),Mt&&(c.localBatchProcess=y("localBatchProcess",!0))),c}function ut(f,h,r,a,m,c){var I=new Object;return I.op=y("op",f),I.idsession=y("idsession",W),I.title=y("title",h),I.extensions=y("exts",r),I.description=y("desc",a),I.filePath=y("filePath",m),I.multiload=y("multiload",c),I}function ct(f,h,r,a,m){var c=new Object;return c.op=y("op","save"),c.idsession=y("idsession",W),c.title=y("title",h),c.filename=y("filename",r),c.extension=y("exts",a),c.description=y("desc",m),c.dat=y("dat",f==""?null:f,!0),c}function Se(f){var h=[];Re&&h.push(y("mcv",Re));for(var r in f)h.push(f[r]);for(var a="afirma://"+encodeURIComponent(f.op.value)+"?",m=0;m<h.length;m++)h[m].value!=null&&h[m].value!="null"&&(a+=(m!=0?"&":"")+h[m].key+"="+(h[m].avoidEncoding===!0?h[m].value:encodeURIComponent(h[m].value)));return a}function xe(f){if(te=f,dt())console.log("Enviamos el mensaje al socket abierto"),Ge(Ue.AUTOFIRMA_CONNECTION_RETRIES);else{var h=be.getRandomPorts(ot,rt);vt(h),console.log("Tratamos de conectar con el cliente a traves de WebSockets en los puertos "+h),setTimeout(De,3e3,h,Ue.AUTOFIRMA_CONNECTION_RETRIES)}}function dt(){return!!ae&&R}function vt(f){for(var h="",r=0;r<f.length;r++)h+=f[r],r<f.length-1&&(h+=",");var a="afirma://websocket?ports="+h+"&v="+x+"&jvc="+u+"&idsession="+W;jt(a)}function De(f,h){if(R)console.log("Enviamos el mensaje al socket"),Ge(Ue.AUTOFIRMA_CONNECTION_RETRIES);else if(h>0){for(var r=0;!R&&r<f.length;r++)Pt(f[r]);setTimeout(De,Ue.AUTOFIRMA_LAUNCHING_TIME,f,h-1)}else l("es.gob.afirma.standalone.ApplicationNotFoundException","No se ha podido conectar con AutoFirma.")}function Pt(f){var h;try{h=new WebSocket(q+f)}catch(r){console.log("Error estableciendo el WebSocket: "+r)}return h.onopen=function(r,a){R=!0,ae=this,console.log("Se abre el socket")},h.onclose=function(r){ae!=null&&ae===this&&(R=!1,ae=null,console.log("Se cierra el socket. Codigo WebSocket de cierre: "+(r?r.code:null)),l("java.lang.InterruptedException","AutoFirma se ha cerrado o ha cerrado el websocket de comunicacion"))},h.onmessage=function(r){console.log("Procesado por defecto del mensaje")},h.onerror=function(r){console.log("Procesado por defecto del error")},h}function Ge(f){ae.onmessage=de,ae.onerror=function(h){console.log("Error en la comunicacion por websocket: "+h),tt(ae,W,f-1)},tt(ae,W,f)}var de=function(f){console.log("Respuesta de la peticion de eco"),ae.onmessage=function(h){console.log("Respuesta obtenida de la operacion enviada"),we(h.data)},ae.send(te)};function tt(f,h,r){if(r<=0){l("java.util.concurrent.TimeoutException","AutoFirma no respondio al saludo.");return}if(f.readyState===1)try{f.send("echo=-idsession="+h+"@EOF")}catch(a){console.log("Error en echo: "+a),setTimeout(tt,Ue.AUTOFIRMA_LAUNCHING_TIME,f,h,r-1)}else console.log("El socket aun no esta preparado"),setTimeout(tt,Ue.AUTOFIRMA_LAUNCHING_TIME,f,h,r-1)}function we(f){if(f==_||f==null||f=="CANCEL"){l("es.gob.afirma.core.AOCancelledOperationException","Operacion cancelada por el usuario");return}if(f=="MEMORY_ERROR"){l("es.gob.afirma.core.OutOfMemoryError","El fichero que se pretende firmar o guardar excede de la memoria disponible para aplicacion");return}if(f.length>4&&f.substr(0,4)=="SAF_"){l("java.lang.Exception",f);return}if(f=="NULL"){l("java.lang.Exception","Error desconocido");return}if(X==_e)p(f);else if(X==K)g(f,!1);else if(X==se)g(f,!0);else if(X==ge)C(f);else if(X==ve)w(f);else if(X==Ae)L(f);else if(X==ce)P(f);else if(console.log("Operacion desconocida. Se devuelve directamente su resultado."),F){var h=F;ue(null,null),h(f)}else console.log("No se ha proporcionado funcion callback para procesar el resultado de la operacion")}function l(f,h){if(le=f,ee=h,Pe){var r=Pe;ue(null,null),r(f,h)}}function g(f,h){if(f.indexOf(":")<=0){l("java.lang.Exception","Respuesta no valida");return}if(!F){console.log("No se ha proporcionado funcion callback para procesar el resultado del lote de firma");return}var r,a,m=f.split("|");if(h)for(r=new Array,a=new Array,i=0;i<m.length;i++){var c=m[i].indexOf(":");r.push(m[i].substring(0,c)),a.push(m[i].substring(c+1).replace(/\-/g,"+").replace(/\_/g,"/"))}else{var c=m[0].indexOf(":");r=m[0].substring(0,c),a=m[0].substring(c+1).replace(/\-/g,"+").replace(/\_/g,"/")}if(F){var I=F;ue(null,null),I(r,a)}else console.log("No se ha proporcionado funcion callback a la que notificar el resultado de la carga de datos")}function p(f){if(f=="OK"||f=="SAVE_OK")if(F){var h=F;ue(null,null),h(f)}else console.log("No se ha proporcionado funcion callback a la notificar el resultado");else l("java.lang.Exception","Error desconocido al procesar los datos")}function C(f){if(F){var h=F;ue(null,null),h(f.replace(/\-/g,"+").replace(/\_/g,"/"))}else console.log("No se ha proporcionado funcion callback para devolver el certificado seleccionado")}function w(f){if(F){var h,r=null,a=f.indexOf("|");a==-1?h=f:(h=f.substring(0,a).replace(/\-/g,"+").replace(/\_/g,"/"),r=f.substring(a+1).replace(/\-/g,"+").replace(/\_/g,"/"));try{h=be.parseJSONData(h)}catch{}if(F){var m=F;ue(null,null),m(h,r)}else console.log("No se ha proporcionado funcion callback a la que devolver el resultado del lote")}else console.log("No se ha proporcionado funcion callback para procesar el resultado del lote de firma")}function L(f){if(!F){console.log("No se ha proporcionado funcion callback para procesar el log");return}var h=` === JAVASCRIPT INFORMATION === 
navigator.appCodeName: `+navigator.appCodeName+`
navigator.appName: `+navigator.appName+`
navigator.appVersion: `+navigator.appVersion+`
navigator.platform: `+navigator.platform+`
navigator.userAgent: `+navigator.userAgent+`
navigator.javaEnabled(): `+navigator.javaEnabled()+`
screen.width: `+(b.screen?screen.width:0)+`
screen.height: `+(b.screen?screen.height:0)+`

   === CLIENTE LOG === 
`+f;if(F){var r=F;ue(null,null),r(h)}else console.log("No se ha proporcionado funcion callback a la que devolver el log")}function P(f){if(!F){console.log("No se ha proporcionado funcion callback para procesar el resultado de la firma");return}var h,r=null,a=null,m=f.indexOf("|");if(m==-1)h=D.decode(f,!0).replace(/\-/g,"+").replace(/\_/g,"/");else{r=f.substring(0,m).replace(/\-/g,"+").replace(/\_/g,"/");var c=f.indexOf("|",m+1);c==-1?h=f.substring(m+1).replace(/\-/g,"+").replace(/\_/g,"/"):(h=f.substring(m+1,c).replace(/\-/g,"+").replace(/\_/g,"/"),a=D.decode(f.substring(c),!0))}if(F){var I=F;ue(null,null),I(h,r,a)}else console.log("No se ha proporcionado funcion callback a la que devolver la firma generada")}function y(f,h,r){var a=new Object;return a.key=f,a.value=h,a.avoidEncoding=!!r,a}function j(){return"Cliente JavaScript"}function T(){return ee}function E(){return le}return{echo:j,setKeyStore:Ct,setPortRange:st,sign:At,coSign:Tt,counterSign:wt,signBatchJSON:Ot,signBatchXML:Et,selectCertificate:kt,saveDataToFile:$e,signAndSaveToFile:at,getFileNameContentBase64:_t,getMultiFileNameContentBase64:Rt,setStickySignatory:Lt,setLocale:Nt,getErrorMessage:T,getErrorType:E,getCurrentLog:Ie}},Fn=function(b,_,x){var M="",q="",K="",se,_e=1,ve=500,Ae="https://127.0.0.1:",ge="",ce=0,ee=!1,le=!1,ae=!1,X="",te=ie.isInternetExplorer()?12e3:ie.isFirefox()?458752:1048576,R=!1,W=null,z=null,F=null,Pe=null,ot=null,rt=null,st=function(r,a){ot=r,rt=a};function Ct(r){W=r}function kt(r,a,m){z=a,F=m,At(r)}function At(r){var a=new Object;a.op=p("op","selectcert"),a.properties=p("properties",r!=null?D.encode(r):null),a.keystore=p("keystore",W??null),a.ksb64=p("ksb64",W!=null?D.encode(W):null),a.sticky=p("sticky",U),s&&(a.resetSticky=p("resetsticky",s)),Te(ue(a))}function Tt(r,a,m,c,I,N){z=I,F=N,at("sign",r,a,m,c)}function wt(r,a,m,c,I,N){z=I,F=N,at("cosign",r,a,m,c)}function it(r,a,m,c,I,N){z=I,F=N,at("countersign",r,a,m,c)}function at(r,a,m,c,I){(a==x||a=="")&&(a=null),a!=null&&!pt(a)&&(a=a.replace(/\+/g,"-").replace(/\//g,"_"));var N=Be(r,m,c,I,a,W);Te(ue(N))}function Et(r,a,m,c,I,N,B,Ce){z=B,F=Ce,Ot(r,a,m,c,I,N)}function Ot(r,a,m,c,I,N){(a==x||a=="")&&(a=null),a!=null&&!pt(a)&&(a=a.replace(/\+/g,"-").replace(/\//g,"_"));var B=He(r,m,c,I,N,a,W);Te(ue(B))}function _t(r,a,m,c,I,N){z=I,F=N,Ie(r,a,m,c,!1)}function Rt(r,a,m,c,I,N){z=I,F=N,Ie(r,a,m,c,!0)}function Ie(r,a,m,c,I){(r==x||r=="")&&(r=null),r!=null&&(r=r.replace(/\+/g,"-").replace(/\//g,"_"));var N=$e(W,a,m,c,r,I);Te(ue(N))}function $e(r,a,m,c,I,N){var B=new Object;return B.op=p("op","batch"),B.keystore=p("keystore",r??null),B.ksb64=p("ksb64",r!=null?D.encode(r):null),B.batchpresignerurl=p("batchpresignerurl",a),B.batchpostsignerurl=p("batchpostsignerurl",m),B.properties=p("properties",c!=null?D.encode(c):null),B.dat=p("dat",I==""?null:I),B.needcert=p("needcert",!0),B.sticky=p("sticky",U),s&&(B.resetSticky=p("resetsticky",s)),N&&(B.jsonbatch=p("jsonbatch",!0)),Mt&&(B.localBatchProcess=p("localBatchProcess",!0)),B}function ue(r){var a=[];Re&&a.push(p("mcv",Re));for(var m in r)a.push(r[m]);for(var c="afirma://"+encodeURIComponent(r.op.value)+"?",I=0;I<a.length;I++)a[I].value!=null&&a[I].value!="null"&&(c+=(I!=0?"&":"")+a[I].key+"="+encodeURIComponent(a[I].value));return c}function Te(r){if(K==""){var a=be.getRandomPorts(ot,rt);We(a),setTimeout(ut,Ue.AUTOFIRMA_LAUNCHING_TIME,a,r)}else R=!1,ct(K,r,Ue.AUTOFIRMA_CONNECTION_RETRIES)}function We(r){for(var a="",m=0;m<r.length;m++)a+=r[m],m<r.length-1&&(a+=",");se=be.generateNewIdSession();var c="afirma://service?ports="+a+"&v="+_e+"&jvc="+u+"&idsession="+se;jt(c)}function Be(r,a,m,c,I,N){var B=new Object;return B.op=p("op",r),B.keystore=p("keystore",N??null),B.ksb64=p("ksb64",N!=null?D.encode(N):null),B.algorithm=p("algorithm",a),B.format=p("format",m),B.properties=p("properties",c!=null?D.encode(c):null),B.dat=p("dat",I==""?null:I),B.sticky=p("sticky",U),s&&(B.resetSticky=p("resetsticky",s)),B}function He(r,a,m,c,I,N,B){var Ce=new Object;return Ce.op=p("op","signandsave"),Ce.cryptoOp=p("cop",r),Ce.keystore=p("keystore",B??null),Ce.ksb64=p("ksb64",B!=null?D.encode(B):null),Ce.algorithm=p("algorithm",a),Ce.format=p("format",m),Ce.properties=p("properties",c!=null?D.encode(c):null),Ce.filename=p("filename",I),Ce.dat=p("dat",N==""?null:N),Ce.sticky=p("sticky",U),s&&(Ce.resetSticky=p("resetsticky",s)),Ce}function lt(r,a,m,c,I,N){var B=new Object;return B.op=p("op",r),B.title=p("title",a),B.extensions=p("exts",m),B.description=p("desc",c),B.filePath=p("filePath",I),B.multiload=p("multiload",N),B}function ut(r,a){R=!1;var m=new Object;m.locked=!1;for(var c=0;!R&&c<r.length;c++)ct(r[c],a,Ue.AUTOFIRMA_CONNECTION_RETRIES,m)}function ct(r,a,m,c){Pe=a;var I=Ze();I.open("POST",Ae+r+"/afirma",!0),I.setRequestHeader("Content-type","application/x-www-form-urlencoded"),I.onreadystatechange=function(){if(I.readyState==4&&I.status==200&&D.decode(I.responseText,!0)=="OK"&&!R)K=r,X=Ae+K+"/afirma",R=!0,c&&(c.locked=!0),ee=Pe.indexOf("afirma://selectcert")>-1,le=Pe.indexOf("afirma://save")>-1,ae=Pe.indexOf("afirma://batch")>-1,Pe.indexOf("afirma://signandsave")>-1,xe();else if((!c||!c.locked)&&!R&&I.readyState!=2&&I.readyState!=3)if(m--,K!=""&&m<Ue.AUTOFIRMA_CONNECTION_RETRIES/2)K="",c&&(c.locked=!0),m=Ue.AUTOFIRMA_CONNECTION_RETRIES,Te(Pe);else if(m==0){(!c||!c.locked)&&(c&&(c.locked=!0),F("es.gob.afirma.standalone.ApplicationNotFoundException","No se ha podido conectar con AutoFirma."));return}else setTimeout(Se,Ue.AUTOFIRMA_LAUNCHING_TIME,r,m,c)},R||I.send("echo=-idsession="+se+"@EOF")}function Se(r,a,m){ct(r,Pe,a,m)}function xe(){var r=Pe;if(r.length>te){dt(r,1,Math.ceil(r.length/te));return}var a=Ze();a.open("POST",X,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(a.status==404&&de("java.lang.IOException",a.responseText),le){a.readyState==4&&D.decode(a.responseText)!=""&&Ge(D.decode(a.responseText));return}else if(a.readyState==4&&a.status==200&&a.responseText!=""){if(D.decode(a.responseText)=="MEMORY_ERROR"){de("java.lang.OutOfMemoryError","Problema de memoria en servidor");return}ge="",De(1,D.decode(a.responseText,!0))}else a.responseText==""&&a.status==0&&a.readyState==0&&setTimeout(xe,ve)};try{a.onerror=function(m){m.target.status==0?de("java.lang.IOException","Se ha perdido la conexion con la aplicacion @firma "+m.target.statusText):de("java.lang.IOException","Ocurrio un error de red en la llamada al servicio de firma "+m.target.statusText)}}catch{}a.send("cmd="+D.encode(r,!0)+"idsession="+se+"@EOF")}function dt(r,a,m){var c=Ze();c.open("POST",X,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded");var I=r.substring((a-1)*te,Math.min(te*a,r.length));c.onreadystatechange=function(N){if(c.status==404){de("java.lang.Exception",c.responseText);return}c.readyState==4&&c.status==200&&c.responseText!=""?(ce++,D.decode(c.responseText,!0)=="MORE_DATA_NEED"?ce<m&&dt(r,a+1,m):D.decode(c.responseText,!0)=="OK"?ce==m&&(ce=0,vt()):D.decode(c.responseText)=="MEMORY_ERROR"&&Ge(D.decode(c.responseText))):c.responseText==""&&c.status==0&&c.readyState==0&&setTimeout(dt,ve,r,a,m)};try{c.onerror=function(N){N.target.status==0?de("java.lang.IOException","Se ha perdido la conexion con la aplicacion @firma "+N.target.statusText):de("java.lang.IOException","Ocurrio un error de red en la llamada al servicio de firma "+N.target.statusText)}}catch{}c.send("fragment=@"+a+"@"+m+"@"+D.encode(I,!0)+"idsession="+se+"@EOF")}function vt(){httpRequest=Ze(),httpRequest.open("POST",X,!0),httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded"),httpRequest.onreadystatechange=function(){if(httpRequest.status==404&&de("java.lang.Exception",httpRequest.responseText),le){httpRequest.readyState==4&&D.decode(httpRequest.responseText)!=""&&Ge(D.decode(httpRequest.responseText));return}else httpRequest.readyState==4&&httpRequest.status==200&&httpRequest.responseText!=""?(D.decode(httpRequest.responseText)=="MEMORY_ERROR"&&Ge(D.decode(httpRequest.responseText)),ge="",De(1,D.decode(httpRequest.responseText,!0))):httpRequest.status==0&&httpRequest.readyState==0&&setTimeout(vt,ve)};try{httpRequest.onerror=function(r){r.target.status==0?de("java.lang.IOException","Se ha perdido la conexion con la aplicacion @firma "+r.target.statusText):de("java.lang.IOException","Ocurrio un error de red en la llamada al servicio de firma "+r.target.statusText)}}catch{}httpRequest.send("firm=idsession="+se+"@EOF")}function De(r,a){httpRequest=Ze(),httpRequest.open("POST",X,!0),httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded"),httpRequest.onreadystatechange=function(){if(httpRequest.readyState==4&&httpRequest.status==200&&httpRequest.responseText!=""){if(D.decode(httpRequest.responseText)=="MEMORY_ERROR"){de("java.lang.OutOfMemoryError","Problema de memoria en servidor");return}ge+=D.decode(httpRequest.responseText,!0),r==a?(ae?(tt(ge),ae=!1):ee?(Pt(ge),ee=!1):Ge(ge),ge=""):De(r+1,a)}else httpRequest.responseText==""&&httpRequest.status==0&&httpRequest.readyState==0&&setTimeout(De,ve,r,a)};try{httpRequest.onerror=function(m){m.target.status==0?de("java.lang.IOException","Se ha perdido la conexion con la aplicacion @firma "+m.target.statusText):de("java.lang.IOException","Ocurrio un error de red en la llamada al servicio de firma "+m.target.statusText)}}catch{}r<=a&&httpRequest.send("send=@"+r+"@"+a+"idsession="+se+"@EOF")}function Pt(r){if(r==x||r==null||r=="CANCEL"){F("es.gob.afirma.core.AOCancelledOperationException","Operacion cancelada por el usuario");return}if(r.length>4&&r.substr(0,4)=="SAF_"){F("java.lang.Exception",r);return}if(r=="NULL"){F("java.lang.Exception","Error desconocido");return}z(r.replace(/\-/g,"+").replace(/\_/g,"/"))}function Ge(r){if(r==x||r==null||r=="CANCEL"){F("es.gob.afirma.core.AOCancelledOperationException","Operacion cancelada por el usuario");return}if(r=="OK"){try{r=be.parseJSONData(r)}catch{}z(r,null);return}if(r=="MEMORY_ERROR"){F("es.gob.afirma.core.OutOfMemoryError","El fichero que se pretende firmar o guardar excede de la memoria disponible para aplicacion");return}if(r.length>4&&r.substr(0,4)=="SAF_"){F("java.lang.Exception",r);return}if(r=="NULL"){F("java.lang.Exception","Error desconocido");return}if(r=="SAVE_OK"){z&&z(r);return}if(r.length>150&&r.substr(0,150).indexOf("<log>")!=-1){var a=` === JAVASCRIPT INFORMATION === 
navigator.appCodeName: `+navigator.appCodeName+`
navigator.appName: `+navigator.appName+`
navigator.appVersion: `+navigator.appVersion+`
navigator.platform: `+navigator.platform+`
navigator.userAgent: `+navigator.userAgent+`
navigator.javaEnabled(): `+navigator.javaEnabled()+`
screen.width: `+(_.screen?screen.width:0)+`
screen.height: `+(_.screen?screen.height:0)+`

   === CLIENTE LOG === 
`+r;z(a);return}if(r.indexOf(":")>0){var m=r.split("|");if(m.length==1){var ze=m[0].indexOf(":"),c=m[0];ze==-1?fileName=D.decode(c,!0):(fileName=c.substring(0,ze),dataB64=c.substring(ze+1).replace(/\-/g,"+").replace(/\_/g,"/")),z(fileName,dataB64);return}else if(m.length>1){var I=new Array,N=new Array;for(i=0;i<m.length;i++){var ze=m[i].indexOf(":");ze==-1?(I.push(m[i]),N.push("")):(I.push(m[i].substring(0,ze)),N.push(m[i].substring(ze+1).replace(/\-/g,"+").replace(/\_/g,"/")))}}z(I,N);return}var B,Ce=null,ze=r.indexOf("|");ze==-1?B=D.decode(r,!0).replace(/\-/g,"+").replace(/\_/g,"/"):(Ce=r.substring(0,ze).replace(/\-/g,"+").replace(/\_/g,"/"),B=r.substring(ze+1).replace(/\-/g,"+").replace(/\_/g,"/")),z(B,Ce)}function de(r,a){F&&F(r,a)}function tt(r){if(r==x||r==null||r=="CANCEL"){F("es.gob.afirma.core.AOCancelledOperationException","Operacion cancelada por el usuario");return}if(r.length>4&&r.substr(0,4)=="SAF_"){F("java.lang.Exception",r);return}if(r=="NULL"){F("java.lang.Exception","Error desconocido");return}var a,m=null,c=r.indexOf("|");c==-1?a=r:(a=r.substring(0,c).replace(/\-/g,"+").replace(/\_/g,"/"),m=r.substring(c+1).replace(/\-/g,"+").replace(/\_/g,"/"));try{a=be.parseJSONData(a)}catch{}z(a,m)}function we(r,a,m,c,I,N,B){z=N,F=B,l(r,a,m,c,I)}function l(r,a,m,c,I){(r==x||r=="")&&(r=null),r!=null&&!pt(r)&&(r=r.replace(/\+/g,"-").replace(/\//g,"_"));var N=g(r,a,m,c,I);Te(ue(N))}function g(r,a,m,c,I){var N=new Object;return N.op=p("op","save"),N.title=p("title",a),N.filename=p("filename",m),N.extension=p("exts",c),N.description=p("desc",I),N.dat=p("dat",r==""?null:r),N}function p(r,a){var m=new Object;return m.key=r,m.value=a,m}function C(r,a){return r!=null?D.encode(r):null}function w(r,a){return r!=null?D.decode(r):null}function L(r,a,m,c,I,N){z=I,F=N,j("load",r,a,m,c,!1)}function P(r,a,m,c,I,N){z=I,F=N,j("load",r,a,m,c,!0)}function y(r,a){z=r,F=a,T()}function j(r,a,m,c,I,N){var B=lt(r,a,m,c,I,N);Te(ue(B))}function T(){var r=lt("getLog");Te(ue(r))}function E(){return"Cliente JavaScript"}function f(){return M}function h(){return q}return{echo:E,checkTime:Bt,setKeyStore:Ct,setPortRange:st,sign:Tt,coSign:wt,counterSign:it,signBatchJSON:Rt,signBatchXML:_t,selectCertificate:kt,saveDataToFile:we,signAndSaveToFile:Et,getFileNameContentBase64:L,getMultiFileNameContentBase64:P,getBase64FromText:C,getTextFromBase64:w,setStickySignatory:Lt,setLocale:Nt,getErrorMessage:f,getErrorType:h,getCurrentLog:y}},Gt=function(b,_,x){var M=2e3,q=3,K=ie.isAndroid()||ie.isIOS()?4e3:3e3,se=ie.isAndroid()||ie.isIOS()?15:10,_e=!0,ve="batch",Ae="certificate",ge="sign",ce=ge,ee,le="",ae="",X=null,te=null,R=null;if(b!=x&&b!=null)if(b.indexOf("://")!=-1&&b.indexOf("/",b.indexOf("://")+3)!=-1){var W=b.substring(0,b.indexOf("/",b.indexOf("://")+3));te=W+"/afirma-signature-retriever/RetrieveService",R=W+"/afirma-signature-storage/StorageService"}else te=b+"/afirma-signature-retriever/RetrieveService",R=b+"/afirma-signature-storage/StorageService";function z(l){X=l}function F(l,g,p){ce=Ae;var C=be.generateNewIdSession(),w=ue(),L="selectcert";U&&!s&&ee&&(l=xe(ee,l));var P=0,y=new Array;y[P++]={key:"ver",value:q},y[P++]={key:"op",value:L},C!=null&&C!=x&&(y[P++]={key:"id",value:C}),w!=null&&w!=x&&(y[P++]={key:"key",value:w}),X!=null&&X!=x&&(y[P++]={key:"keystore",value:X},y[P++]={key:"ksb64",value:D.encode(X)}),R!=null&&R!=x&&(y[P++]={key:"stservlet",value:R}),l!=null&&l!=x&&(y[P++]={key:"properties",value:D.encode(l)}),!ie.isAndroid()&&!ie.isIOS()&&(y[P++]={key:"aw",value:"true"});var j=He(L,y);if($e(j)){if(R==null||R==x){Ie("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}else if(te==null||te==x){Ie("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para la recuperacion de datos");return}We(C,w,R,te,L,y,g,p)}else Be(j,C,w,g,p)}function Pe(l,g,p,C,w,L){st("sign",l,g,p,C,w,L)}function ot(l,g,p,C,w,L){st("cosign",l,g,p,C,w,L)}function rt(l,g,p,C,w,L){st("countersign",l,g,p,C,w,L)}function st(l,g,p,C,w,L,P){ce=ge,(g==x||g=="")&&(g=null),g!=null&&!pt(g)&&(g=g.replace(/\+/g,"-").replace(/\//g,"_"),g=g.replace(/\n/g,"").replace(/\r/g,"")),U&&!s&&ee&&(w=xe(ee,w));var y=be.generateNewIdSession(),j=ue(),T=0,E=new Array;E[T++]={key:"ver",value:q},l!=null&&l!=x&&(E[T++]={key:"op",value:l}),y!=null&&y!=x&&(E[T++]={key:"id",value:y}),j!=null&&j!=x&&(E[T++]={key:"key",value:j}),X!=null&&X!=x&&(E[T++]={key:"keystore",value:X},E[T++]={key:"ksb64",value:D.encode(X)}),R!=null&&R!=x&&(E[T++]={key:"stservlet",value:R}),C!=null&&C!=x&&(E[T++]={key:"format",value:C}),p!=null&&p!=x&&(E[T++]={key:"algorithm",value:p}),w!=null&&w!=x&&(E[T++]={key:"properties",value:D.encode(w)}),!ie.isAndroid()&&!ie.isIOS()&&(E[T++]={key:"aw",value:"true"}),g!=null&&(E[T++]={key:"dat",value:g});var f=He(l,E);if($e(f)){if(R==null||R==x){Ie("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}We(y,j,R,te,l,E,L,P)}else Be(f,y,j,L,P)}function Ct(l,g,p,C,w,L,P,y){ce=ge,(g==x||g=="")&&(g=null),g!=null&&!pt(g)&&(g=g.replace(/\+/g,"-").replace(/\//g,"_"),g=g.replace(/\n/g,"").replace(/\r/g,"")),U&&!s&&ee&&(w=xe(ee,w));var j=be.generateNewIdSession(),T=ue(),E=0,f="signandsave",h=new Array;h[E++]={key:"ver",value:q},h[E++]={key:"op",value:f},l!=null&&l!=x&&(h[E++]={key:"cop",value:l}),j!=null&&j!=x&&(h[E++]={key:"id",value:j}),T!=null&&T!=x&&(h[E++]={key:"key",value:T}),X!=null&&X!=x&&(h[E++]={key:"keystore",value:X},h[E++]={key:"ksb64",value:D.encode(X)}),R!=null&&R!=x&&(h[E++]={key:"stservlet",value:R}),C!=null&&C!=x&&(h[E++]={key:"format",value:C}),p!=null&&p!=x&&(h[E++]={key:"algorithm",value:p}),w!=null&&w!=x&&(h[E++]={key:"properties",value:D.encode(w)}),L!=null&&L!=x&&(h[E++]={key:"filename",value:L}),!ie.isAndroid()&&!ie.isIOS()&&(h[E++]={key:"aw",value:"true"}),g!=null&&(h[E++]={key:"dat",value:g});var r=He(f,h);if($e(r)){if(R==null||R==x){Ie("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}We(j,T,R,te,f,h,P,y)}else Be(r,j,T,P,y)}function kt(l,g,p,C,w,L){ce=ve,(l==x||l=="")&&(l=null),l!=null&&!pt(l)&&(l=l.replace(/\+/g,"-").replace(/\//g,"_"),l=l.replace(/\n/g,"").replace(/\r/g,"")),U&&!s&&ee&&(C=xe(ee,C));var P=be.generateNewIdSession(),y=ue(),j="batch",T=0,E=new Array;E[T++]={key:"ver",value:q},E[T++]={key:"op",value:j},P!=null&&P!=x&&(E[T++]={key:"id",value:P}),y!=null&&y!=x&&(E[T++]={key:"key",value:y}),X!=null&&X!=x&&(E[T++]={key:"keystore",value:X},E[T++]={key:"ksb64",value:D.encode(X)}),R!=null&&R!=x&&(E[T++]={key:"stservlet",value:R}),g!=null&&g!=x&&(E[T++]={key:"batchpresignerurl",value:g}),p!=null&&p!=x&&(E[T++]={key:"batchpostsignerurl",value:p}),C!=null&&C!=x&&(E[T++]={key:"properties",value:D.encode(C)}),!ie.isAndroid()&&!ie.isIOS()&&(E[T++]={key:"aw",value:"true"}),E[T++]={key:"needcert",value:"true"},l!=null&&(E[T++]={key:"dat",value:l});var f=He(j,E);if($e(f)){if(R==null||R==x){Ie("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}We(P,y,R,te,j,E,w,L)}else Be(f,P,y,w,L)}function At(l,g,p,C,w,L){ce=ve,U&&!s&&ee&&(C=xe(ee,C));var P=be.generateNewIdSession(),y=ue(),j="batch",T=0,E=new Array;E[T++]={key:"ver",value:q},E[T++]={key:"op",value:j},P!=null&&P!=x&&(E[T++]={key:"id",value:P}),y!=null&&y!=x&&(E[T++]={key:"key",value:y}),X!=null&&X!=x&&(E[T++]={key:"keystore",value:X},E[T++]={key:"ksb64",value:D.encode(X)}),R!=null&&R!=x&&(E[T++]={key:"stservlet",value:R}),g!=null&&g!=x&&(E[T++]={key:"batchpresignerurl",value:g}),p!=null&&p!=x&&(E[T++]={key:"batchpostsignerurl",value:p}),C!=null&&C!=x&&(E[T++]={key:"properties",value:D.encode(C)}),!ie.isAndroid()&&!ie.isIOS()&&(E[T++]={key:"aw",value:!0}),Mt&&(E[T++]={key:"localBatchProcess",value:!0}),E[T++]={key:"needcert",value:!0},E[T++]={key:"jsonbatch",value:!0},E[T++]={key:"dat",value:l};var f=He(j,E);if($e(f)){if(R==null||R==x){Ie("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}We(P,y,R,te,j,E,w,L)}else Be(f,P,y,w,L)}function Tt(l,g,p,C,w,L,P){l!=x&&l!=null&&l!=""&&(l=l.replace(/\+/g,"-").replace(/\//g,"_"));var y=be.generateNewIdSession(),j=ue(),T=0,E="save",f=new Array;f[T++]={key:"ver",value:q},f[T++]={key:"op",value:E},y!=null&&y!=x&&(f[T++]={key:"id",value:y}),j!=null&&j!=x&&(f[T++]={key:"key",value:j}),R!=null&&R!=x&&(f[T++]={key:"stservlet",value:R}),g!=null&&g!=x&&(f[T++]={key:"title",value:g}),p!=null&&p!=x&&(f[T++]={key:"filename",value:p}),C!=null&&C!=x&&(f[T++]={key:"extension",value:C}),w!=null&&w!=x&&(f[T++]={key:"description",value:w}),!ie.isAndroid()&&!ie.isIOS()&&(f[T++]={key:"aw",value:"true"}),l!=null&&l!=x&&l!=""&&(f[T++]={key:"dat",value:l});var h=He(E,f);if($e(h)){if(R==null||R==x){Ie("java.lang.IllegalArgumentException","No se ha indicado la direccion del servlet para el guardado de datos");return}We(y,j,R,te,E,f,L,P)}else Be(h,y,j,L,P)}function wt(l,g,p,C,w,L){var P="java.lang.UnsupportedOperationException",y="La operacion de carga de fichero no esta disponible por servidor intermedio";L?L(P,y):Ie(P,y)}function it(l,g,p,C,w,L){var P="java.lang.UnsupportedOperationException",y="La operacion de carga de multiples ficheros no esta disponible por servidor intermedio";L?L(P,y):Ie(P,y)}function at(){return"Cliente JavaScript"}function Et(){return le}function Ot(){return ae}function _t(l,g){var p="java.lang.UnsupportedOperationException",C="La operacion de obtencion del log no esta disponible por servidor intermedio";g?g(p,C):Ie(p,C)}function Rt(l,g){R=l,te=g}function Ie(l,g){throw ae=l,le=g,new Error}function $e(l){return l.length>M}function ue(){var l;if(typeof _.crypto<"u"&&typeof _.crypto.getRandomValues<"u"){var g=new Uint32Array(1);_.crypto.getRandomValues(g),l=Te(g[0]%1e8,8)}else l=Te(Math.floor((be.getRandom()+1)%1e8),8);return l}function Te(l,g){return g-=l.toString().length,g>0?new Array(g+(/\./.test(l)?2:1)).join("0")+l:l+""}function We(l,g,p,C,w,L,P,y){var j=be.generateNewIdSession(),T=Ze();T||Ie("java.lang.Exception","Su navegador no permite preprocesar los datos que desea tratar"),T.open("POST",p,!0),T.setRequestHeader("Content-type","application/x-www-form-urlencoded"),T.onreadystatechange=function(){if(T.readyState==4)if(T.status==200){if(url=ut(w,j,C,g),$e(url)){y("java.lang.IllegalArgumentException","La URL de invocacion al servicio de firma es demasiado larga.");return}Be(url,l,g,P,y)}else console.log("Error al enviar los datos al servidor intermedio. HTTP Status: "+T.status),y("java.lang.IOException","Ocurrio un error al enviar los datos a la aplicacion nativa")};try{T.onerror=function(f){console.log("Error al enviar los datos al servidor intermedio (HTTP Status: "+T.status+"): "+f.message),y("java.lang.IOException","Ocurrio un error al enviar los datos al servicio intermedio para la comunicacion con la aplicacion nativa")}}catch{}Re&&(L[L.length]={key:"mcv",value:Re});var E="op=put&v=1_0&id="+j+"&dat="+tt(lt(w,L),g);try{T.send(E)}catch{y("java.lang.IOException","No se pudo conectar con el servidor remoto")}}function Be(l,g,p,C,w){_e=!1,jt(l),g&&(C||w)&&Pt(g,te,p,l,C,w)}function He(l,g){var p="jvc="+u;if(Re&&(p+="&mcv="+encodeURIComponent(Re)),g!=null&&g!=x)for(var C=0;C<g.length;C++)g[C].value!=null&&g[C].value!="null"&&(p+="&"+g[C].key+"="+encodeURIComponent(g[C].value));var w;return ie.isChrome()&&ie.isAndroid()?w="intent://"+l+"?"+p+"#Intent;scheme=afirma;package=es.gob.afirma;end":w="afirma://"+l+"?"+p,w}function lt(l,g){l=l??"op";var p="<"+l+">";if(g!=null)for(var C=0;C<g.length;C++)p+='<e k="'+g[C].key+'" v="'+g[C].value+'"/>';return D.encode(p+"</"+l+">")}function ut(l,g,p,C){var w=0,L=new Array;return L[w++]={key:"fileid",value:g},(p!=null||p!=x)&&(L[w++]={key:"rtservlet",value:p}),(C!=null||C!=x)&&(L[w++]={key:"key",value:C}),He(l,L)}function ct(l,g,p,C){if(l.substr(0,6).toLowerCase()=="err-06")return!0;if(l.substr(0,5).toLowerCase()=="#wait")return"reset";if(l.substr(0,4).toLowerCase()=="err-"&&l.indexOf(":=")!=-1)return le=l.substring(l.indexOf(":=")+2),l.substr(0,7).toLowerCase()=="err-11:"?ae="es.gob.afirma.core.AOCancelledOperationException":ae="java.lang.Exception",C(ae,le),!1;if(l=="CANCEL"||l==`CANCEL\r
`)return C("es.gob.afirma.core.AOCancelledOperationException","Operacion cancelada por el usuario"),!1;if(l=="OK"||l==`OK\r
`)return p(),!1;if(l.length>4&&l.substr(0,4)=="SAF_")return C("java.lang.Exception",l),!1;if(ce==ve){var w,P=null,j=l.indexOf("|");j==-1?g!=x&&g!=null?w=de(l,g):w=we(l):(g!=x&&g!=null?(w=de(l.substring(0,j),g,!0),P=de(l.substring(j+1),g)):(w=we(l.substring(0,j)),P=we(l.substring(j+1))),U?P&&(ee=P):ee=null);try{w=be.parseJSONData(w)}catch{}return p(w,P),!1}else if(ce==Ae){var P;return g!=x&&g!=null?P=de(l,g):P=we(l),ee=U?P:null,p(P),!1}var L,P=null,y=null,j=l.indexOf("|");if(j==-1)g!=x&&g!=null?L=de(l,g):L=we(l);else{var T=l.indexOf("|",j+1);T==-1?g!=x&&g!=null?(P=de(l.substring(0,j),g,!0),L=de(l.substring(j+1),g)):(P=we(l.substring(0,j)),L=we(l.substring(j+1))):g!=x&&g!=null?(P=de(l.substring(0,j),g,!0),L=de(l.substring(j+1,T),g,!0),y=D.decode(de(l.substring(T+1),g))):(P=we(l.substring(0,j)),L=we(l.substring(j+1)),y=D.decode(we(l.substring(T+1))))}return U?P&&(ee=P):ee=null,p(L,P,y),!1}function Se(l,g,p){ae=l!=null&&l.length>0?l:"java.lang.Exception",le=g!=null&&g.length>0?g:"No se ha podido extablecer la comunicación entre la aplicación de firma y la página web",p!=x&&p!=null&&p(ae,le)}function xe(l,g){for(var p=vt(g,`
`),C=[],w=0;w<p.length;w++)p[w]&&!dt(p[w])&&C.push(p[w]);C.push("filters=encodedcert:"+l),C.push("headless=true");var L="";if(C.length>0){L=C[0];for(var w=1;w<C.length;w++)L+=`
`+C[w]}return L}function dt(l){return l.indexOf("filters=")==0||l.indexOf("filter=")==0||l.indexOf("filters.")==0||l.indexOf("headless=")==0}function vt(l,g){var p=[];if(l){for(var C=0,w;(w=l.indexOf(g,C))!=-1;)p.push(l.substring(C,w)),C=w+1;p.push(l.substring(C))}return p}var De=0;function Pt(l,g,p,C,w,L){var P=Ze();P||Ie("java.lang.Exception","Su navegador no permite obtener el resulado de la operación"),De=0,setTimeout(Ge,K,P,g,"op=get&v=1_0&id="+l+"&it=0",p,C,l,w,L)}function Ge(l,g,p,C,w,L,P,y){if(_e){Se("es.gob.afirma.standalone.ApplicationNotFoundException","AutoFirma no se encuentra instalado en el sistema.",y);return}if(De>se){Se("java.util.concurrent.TimeoutException","El tiempo para la recepcion de la firma por la pagina web ha expirado",y);return}De++,l.onreadystatechange=function(){if(l.readyState==4)if(l.status==200){var j=ct(l.responseText,C,P,y);if(j){var T=De-1;j=="reset"&&(De=0),setTimeout(Ge,K,l,g,p.replace("&it="+T,"&it="+De),C,w,L,P,y)}}else Se("java.lang.Exception","No se pudo conectar con el servidor intermedio para la recuperacion del resultado de la operacion (Status: "+l.status+")",y)};try{l.onerror=function(){Se("java.lang.Exception","No se pudo conectar con el servidor intermedio para la recuperacion del resultado de la operacion (Status: "+l.status+")",y)}}catch{}l.open("POST",g,!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded");try{l.send(p)}catch{Se("java.lang.IOException","Ocurrio un error de red en la llamada al servicio de firma",y);return}}function de(l,g,p){var C=l.indexOf("."),w=l.substr(0,C),L=Xe.des(g,Xe.base64ToString(we(l.substr(C+1))),0,0,null);return Xe.stringToBase64(L.substr(0,L.length-parseInt(w)-(p?0:8)))}function tt(l,g){var p=Xe.base64ToString(we(l)),C=(8-p.length%8)%8;return C+"."+Xe.stringToBase64(Xe.des(g,p,1,0,null)).replace(/\+/g,"-").replace(/\//g,"_")}function we(l){return l&&l.replace(/\-/g,"+").replace(/\_/g,"/")}return{echo:at,setKeyStore:z,sign:Pe,coSign:ot,counterSign:rt,signBatchJSON:At,signBatchXML:kt,selectCertificate:F,saveDataToFile:Tt,signAndSaveToFile:Ct,getFileNameContentBase64:wt,getMultiFileNameContentBase64:it,setServlets:Rt,setStickySignatory:Lt,setLocale:Nt,getErrorMessage:Et,getErrorType:Ot,getCurrentLog:_t}};return{VERSION:n,CHECKTIME_NO:Fe,CHECKTIME_RECOMMENDED:bt,CHECKTIME_OBLIGATORY:It,JAVA_ARGUMENTS:S,SYSTEM_PROPERTIES:v,setForceAFirma:un,cargarMiniApplet:Ht,echo:_n,setJnlpService:cn,isJNLP:ln,needNativeAppInstalled:an,KEYSTORE_WINDOWS:je,KEYSTORE_APPLE:Ke,KEYSTORE_PKCS12:G,KEYSTORE_PKCS11:qe,KEYSTORE_MOZILLA:ye,KEYSTORE_SHARED_NSS:Y,KEYSTORE_JAVA:O,KEYSTORE_JCEKS:Je,KEYSTORE_JAVACE:re,KEYSTORE_DNIE:ne,AUTOFIRMA_LAUNCHING_TIME:Dt,AUTOFIRMA_CONNECTION_RETRIES:St,cargarAppAfirma:Ht,sign:pn,coSign:hn,cosign:vn,counterSign:gn,createBatch:bn,addDocumentToBatch:In,setLocalBatchProcess:Sn,signBatchProcess:Cn,signBatch:yn,selectCertificate:mn,signAndSaveToFile:xn,getCurrentLog:On,saveDataToFile:Tn,getFileNameContentBase64:wn,getMultiFileNameContentBase64:En,checkTime:Bt,setKeyStore:fn,setForceWSMode:rn,setServlets:Dn,setPortRange:Mn,setStickySignatory:Lt,setLocale:Nt,setMinimumClientVersion:sn,getErrorMessage:Rn,getErrorType:Pn,getBase64FromText:kn,getTextFromBase64:An,downloadRemoteData:on,isAndroid:ie.isAndroid,isIOS:ie.isIOS}}(window,void 0),D={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_keyStr_URL_SAFE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",encode:function(t,e){var n=e==!0?this._keyStr_URL_SAFE:this._keyStr,u="",S,v,k,H,V,A,U,s=0;for(t=D._utf8_encode(t);s<t.length;)S=t.charCodeAt(s++),v=t.charCodeAt(s++),k=t.charCodeAt(s++),H=S>>2,V=(S&3)<<4|v>>4,A=(v&15)<<2|k>>6,U=k&63,isNaN(v)?A=U=64:isNaN(k)&&(U=64),u=u+n.charAt(H)+n.charAt(V)+n.charAt(A)+n.charAt(U);return u},encodeArrayBuffer:function(t,e){for(var n=new Uint8Array(t),u=n.length,S=new Array(u);u--;)S[u]=String.fromCharCode(n[u]);return e?window.btoa(S.join("")).replace("+","-").replace("/","_"):window.btoa(S.join(""))},encodeByteArray:function(t,e){for(var n=e==!0?this._keyStr_URL_SAFE:this._keyStr,u=[],S=0;S<t.length;S+=3){var v=t[S],k=S+1<t.length,H=k?t[S+1]:0,V=S+2<t.length,A=V?t[S+2]:0,U=v>>2,s=(v&3)<<4|H>>4,oe=(H&15)<<2|A>>6,Ye=A&63;V||(Ye=64,k||(oe=64)),u.push(n.charAt(U),n.charAt(s),n.charAt(oe),n.charAt(Ye))}return u.join("")},decode:function(t,e){var n=e==!0?this._keyStr_URL_SAFE:this._keyStr,u="",S,v,k,H,V,A,U,s=0;for(t=e==!0?t.replace(/[^A-Za-z0-9\-\_\=]/g,""):t.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<t.length;)H=n.indexOf(t.charAt(s++)),V=n.indexOf(t.charAt(s++)),A=n.indexOf(t.charAt(s++)),U=n.indexOf(t.charAt(s++)),S=H<<2|V>>4,v=(V&15)<<4|A>>2,k=(A&3)<<6|U,u=u+String.fromCharCode(S),A!=64&&(u=u+String.fromCharCode(v)),U!=64&&(u=u+String.fromCharCode(k));return u=D._utf8_decode(u),u},_utf8_encode:function(t){t=t.replace(/\r\n/g,`
`);for(var e="",n=0;n<t.length;n++){var u=t.charCodeAt(n);u<128?e+=String.fromCharCode(u):u>127&&u<2048?(e+=String.fromCharCode(u>>6|192),e+=String.fromCharCode(u&63|128)):(e+=String.fromCharCode(u>>12|224),e+=String.fromCharCode(u>>6&63|128),e+=String.fromCharCode(u&63|128))}return e},_utf8_decode:function(t){for(var e="",n=0,u=0,S=0;n<t.length;)if(u=t.charCodeAt(n),u<128)e+=String.fromCharCode(u),n++;else if(u>191&&u<224)S=t.charCodeAt(n+1),e+=String.fromCharCode((u&31)<<6|S&63),n+=2;else{S=t.charCodeAt(n+1);var v=t.charCodeAt(n+2);e+=String.fromCharCode((u&15)<<12|(S&63)<<6|v&63),n+=3}return e}},Xe={tableStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tableStr_URL_SAFE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",des:function(t,e,n,u,S,v){var k=new Array(16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756),H=new Array(-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344),V=new Array(520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584),A=new Array(8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928),U=new Array(256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080),s=new Array(536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312),oe=new Array(2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154),Ye=new Array(268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696),Le=Xe.des_createKeys(t),me=0,je,Ke,G,qe,ye,Y,O,Je,re,ne,Fe,bt,It,Dt,St=e.length,mt=0,Ve=Le.length==32?3:9;Ve==3?Je=n?new Array(0,32,2):new Array(30,-2,-2):Je=n?new Array(0,32,2,62,30,-2,64,96,2):new Array(94,62,-2,32,64,2,30,-2,-2),v==2?e+="        ":v==1?(G=8-St%8,e+=String.fromCharCode(G,G,G,G,G,G,G,G),G==8&&(St+=8)):v||(e+="\0\0\0\0\0\0\0\0");var nt="",Re="";for(u==1&&(re=S.charCodeAt(me++)<<24|S.charCodeAt(me++)<<16|S.charCodeAt(me++)<<8|S.charCodeAt(me++),Fe=S.charCodeAt(me++)<<24|S.charCodeAt(me++)<<16|S.charCodeAt(me++)<<8|S.charCodeAt(me++),me=0);me<St;){for(Y=e.charCodeAt(me++)<<24|e.charCodeAt(me++)<<16|e.charCodeAt(me++)<<8|e.charCodeAt(me++),O=e.charCodeAt(me++)<<24|e.charCodeAt(me++)<<16|e.charCodeAt(me++)<<8|e.charCodeAt(me++),u==1&&(n?(Y^=re,O^=Fe):(ne=re,bt=Fe,re=Y,Fe=O)),G=(Y>>>4^O)&252645135,O^=G,Y^=G<<4,G=(Y>>>16^O)&65535,O^=G,Y^=G<<16,G=(O>>>2^Y)&858993459,Y^=G,O^=G<<2,G=(O>>>8^Y)&16711935,Y^=G,O^=G<<8,G=(Y>>>1^O)&1431655765,O^=G,Y^=G<<1,Y=Y<<1|Y>>>31,O=O<<1|O>>>31,Ke=0;Ke<Ve;Ke+=3){for(It=Je[Ke+1],Dt=Je[Ke+2],je=Je[Ke];je!=It;je+=Dt)qe=O^Le[je],ye=(O>>>4|O<<28)^Le[je+1],G=Y,Y=O,O=G^(H[qe>>>24&63]|A[qe>>>16&63]|s[qe>>>8&63]|Ye[qe&63]|k[ye>>>24&63]|V[ye>>>16&63]|U[ye>>>8&63]|oe[ye&63]);G=Y,Y=O,O=G}Y=Y>>>1|Y<<31,O=O>>>1|O<<31,G=(Y>>>1^O)&1431655765,O^=G,Y^=G<<1,G=(O>>>8^Y)&16711935,Y^=G,O^=G<<8,G=(O>>>2^Y)&858993459,Y^=G,O^=G<<2,G=(Y>>>16^O)&65535,O^=G,Y^=G<<16,G=(Y>>>4^O)&252645135,O^=G,Y^=G<<4,u==1&&(n?(re=Y,Fe=O):(Y^=ne,O^=bt)),Re+=String.fromCharCode(Y>>>24,Y>>>16&255,Y>>>8&255,Y&255,O>>>24,O>>>16&255,O>>>8&255,O&255),mt+=8,mt==512&&(nt+=Re,Re="",mt=0)}return nt+Re},des_createKeys:function(t){for(var e=new Array(0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964),n=new Array(0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697),u=new Array(0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272),S=new Array(0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144),v=new Array(0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256),k=new Array(0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488),H=new Array(0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746),V=new Array(0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568),A=new Array(0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578),U=new Array(0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488),s=new Array(0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800),oe=new Array(0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744),Ye=new Array(0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128),Le=new Array(0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261),me=t.length>8?3:1,je=new Array(32*me),Ke=new Array(0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0),G,qe,ye=0,Y=0,O,Je=0;Je<me;Je++){var re=t.charCodeAt(ye++)<<24|t.charCodeAt(ye++)<<16|t.charCodeAt(ye++)<<8|t.charCodeAt(ye++),ne=t.charCodeAt(ye++)<<24|t.charCodeAt(ye++)<<16|t.charCodeAt(ye++)<<8|t.charCodeAt(ye++);O=(re>>>4^ne)&252645135,ne^=O,re^=O<<4,O=(ne>>>-16^re)&65535,re^=O,ne^=O<<-16,O=(re>>>2^ne)&858993459,ne^=O,re^=O<<2,O=(ne>>>-16^re)&65535,re^=O,ne^=O<<-16,O=(re>>>1^ne)&1431655765,ne^=O,re^=O<<1,O=(ne>>>8^re)&16711935,re^=O,ne^=O<<8,O=(re>>>1^ne)&1431655765,ne^=O,re^=O<<1,O=re<<8|ne>>>20&240,re=ne<<24|ne<<8&16711680|ne>>>8&65280|ne>>>24&240,ne=O;for(var Fe=0;Fe<Ke.length;Fe++)Ke[Fe]?(re=re<<2|re>>>26,ne=ne<<2|ne>>>26):(re=re<<1|re>>>27,ne=ne<<1|ne>>>27),re&=-15,ne&=-15,G=e[re>>>28]|n[re>>>24&15]|u[re>>>20&15]|S[re>>>16&15]|v[re>>>12&15]|k[re>>>8&15]|H[re>>>4&15],qe=V[ne>>>28]|A[ne>>>24&15]|U[ne>>>20&15]|s[ne>>>16&15]|oe[ne>>>12&15]|Ye[ne>>>8&15]|Le[ne>>>4&15],O=(qe>>>16^G)&65535,je[Y++]=G^O,je[Y++]=qe^O<<16}return je},stringToBase64:function(t){for(var e="",n=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),u=0;u<t.length;u++)e+=n[t.charCodeAt(u)>>4]+n[t.charCodeAt(u)&15];var S,v=e.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ");e="";try{S=String.fromCharCode.apply(null,v)}catch{for(var S="",u=0,k=v.length;u<k;u++)S+=String.fromCharCode(v[u])}return Xe.btoa(S,null)},base64ToString:function(t){for(var e=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"),n=new Object,u=0;u<e.length;u++)n[e[u]]=u;n["="]=0;var S="",v,k,H,V,A=t.length;t+="====";for(var u=0;u<A;u+=4)v=t.charAt(u),k=t.charAt(u+1),H=t.charAt(u+2),V=t.charAt(u+3),S+=String.fromCharCode(n[v]<<2&255|n[k]>>4),H!="="&&(S+=String.fromCharCode(n[k]<<4&255|n[H]>>2)),V!="="&&(S+=String.fromCharCode(n[H]<<6&255|n[V]));return S},btoa:function(t,e){for(var n=(e==!0?Xe.tableStr_URL_SAFE:Xe.tableStr).split(""),u=0,S=0,v=t.length/3,k=[];u<v;++u){var H=t.charCodeAt(S++),V=t.charCodeAt(S++),A=t.charCodeAt(S++);if((H|V|A)>255)throw new Error("String contains an invalid character");k[k.length]=n[H>>2]+n[H<<4&63|V>>4]+(isNaN(V)?"=":n[V<<2&63|A>>6])+(isNaN(V+A)?"=":n[A&63])}return k.join("")}};const fe=t=>(to("data-v-a481b7ca"),t=t(),no(),t),Oo={class:"no-imprimir"},_o={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},Ro={class:"py-12"},Po={class:"container mx-auto px-4 sm:px-6 lg:px-4"},Do={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},Mo={class:"card"},Lo={class:"relative inline-block flex mb-5"},No={class:"font-bold text-lg"},Fo=fe(()=>o("i",{class:"pi pi-plus mr-2"},null,-1)),Vo={class:"select flex flex-col md:flex-row justify-between mb-4 items-center"},Uo={class:"flex flex-wrap justify-start md:justify-end items-center mb-3 md:mb-0"},jo={class:"relative inline-block w-50"},Ko=fe(()=>o("div",{class:"relative inline-block w-50 ml-2"},null,-1)),qo={class:"flex items-center ml-2"},$o={for:"link-checkbox",class:"ms-2 mr-2 text-sm font-medium text-gray-900 dark:text-gray-300"},Bo={class:"hidden md:flex justify-end"},Ho={id:"app",class:"relative inline-block w-50 ml-2"},Go={class:"flex"},zo=["disabled"],Jo=fe(()=>o("i",{class:"pi pi-plus mr-2"},null,-1)),Wo=fe(()=>o("i",{class:"pi pi-upload mr-2"},null,-1)),Xo={class:"absolute right-0 mt-2 w-48 bg-white border border-gray-300 rounded shadow-lg"},Yo=["disabled"],Zo=fe(()=>o("i",{class:"pi pi-file-pdf mr-2"},null,-1)),Qo=fe(()=>o("i",{class:"pi pi-file-export mr-2"},null,-1)),er={class:"split-button-container ml-2"},tr=fe(()=>o("i",{class:"pi pi-save mr-2"},null,-1)),nr=fe(()=>o("hr",{class:"linea-grosor"},null,-1)),or={class:"selector flex flex-col md:flex-row justify-between mt-6 ml-12"},rr={class:"showCustomer"},sr={class:"grid md:grid-cols-1 text-m gap-y-1"},ir={class:"flex items-center justify-between w-full"},ar={class:"font-semibold mr-3 flex-shrink-0 w-32"},lr={class:"text-gray-700 w-full font-bold text-lg"},ur={class:"flex items-center justify-between w-full"},cr={class:"font-semibold mr-3 flex-shrink-0 w-32"},dr={class:"text-gray-700 w-full uppercase"},fr={class:"flex items-center justify-between w-full"},mr={class:"font-semibold mr-3 flex-shrink-0 w-32"},pr={class:"text-gray-700 w-full"},hr={class:"flex items-center justify-between w-full"},vr={class:"font-semibold mr-3 flex-shrink-0 w-32"},gr={class:"text-gray-700 w-full"},xr={class:"flex items-center justify-between w-full"},yr={class:"font-semibold mr-3 flex-shrink-0 w-32"},br={class:"text-gray-700 w-full"},Ir={class:"grid md:grid-cols-1 text-sm gap-y-1 mr-28"},Sr={class:"flex items-center justify-between w-full"},Cr={class:"font-semibold mr-3 min-w-20 flex-shrink-0"},kr={class:"text-gray-700 ml-3 flex-shrink-0 font-bold text-lg"},Ar={class:"flex items-center justify-between w-full"},Tr={class:"font-semibold mr-3 flex-shrink-0"},wr={class:"flex items-center justify-between w-full"},Er={class:"font-semibold mr-3 flex-shrink-0"},Or={class:"flex items-center justify-between"},_r={class:"flex items-center"},Rr=fe(()=>o("div",{class:"flex-grow"},null,-1)),Pr={class:"relative rounded-md shadow-sm"},Dr=["placeholder"],Mr=fe(()=>o("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[o("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),Lr={key:0,class:"flex justify-end mt-4 pr-4"},Nr={class:"hidden md:flex justify-between mt-4 pr-4 mb-4"},Fr={class:"totals-container w-1/3"},Vr=fe(()=>o("i",{class:"pi pi-plus"},null,-1)),Ur={class:"ml-4 totals p-4 rounded-md"},jr={class:"w-full"},Kr={class:"text-gray-600 pr-4"},qr={class:"pl-4"},$r=fe(()=>o("tr",null,[o("td",{colspan:"2"},[o("hr",{class:"my-2 border-gray-300"})])],-1)),Br={class:"text-gray-600 pr-4"},Hr={key:0},Gr={key:1},zr={key:2},Jr={key:3},Wr={class:"pl-4"},Xr={key:0},Yr={key:1},Zr={key:2},Qr={key:3},es=fe(()=>o("div",{class:"w-1/12"},null,-1)),ts={class:"totals-container w-1/3"},ns={class:"totals p-4 rounded-md"},os={class:"w-full"},rs={class:"text-gray-600 pr-4"},ss={class:"pl-4"},is=fe(()=>o("hr",{class:"my-2 border-gray-300"},null,-1)),as={class:"text-gray-600 pr-4"},ls={class:"pl-4"},us=fe(()=>o("hr",{class:"my-2 border-gray-300"},null,-1)),cs={class:"text-gray-600 pr-4"},ds={class:"pl-4"},fs={class:"flex flex-wrap justify-between mt-4 pr-4 mb-4 md:hidden"},ms={class:"totals-container w-full md:w-1/3 flex flex-col mb-4 md:mb-0"},ps=fe(()=>o("i",{class:"pi pi-plus"},null,-1)),hs={class:"ml-4 totals p-4 rounded-md flex-grow"},vs={class:"w-full"},gs={class:"text-gray-600 pr-4"},xs={class:"pl-4"},ys=fe(()=>o("tr",null,[o("td",{colspan:"2"},[o("hr",{class:"my-2 border-gray-300"})])],-1)),bs={class:"text-gray-600 pr-4"},Is={class:"pl-4"},Ss=fe(()=>o("div",{class:"hidden md:block w-1/12"},null,-1)),Cs={class:"totals-container w-full md:w-1/3 flex flex-col"},ks={class:"ml-4 totals bg-gray-100 p-4 rounded-md flex-grow"},As={class:"w-full"},Ts={class:"text-gray-600 pr-4"},ws={class:"pl-4"},Es={class:"text-gray-600 pr-4"},Os={class:"pl-4"},_s={class:"text-gray-600 pr-4"},Rs={class:"pl-4"},Ps={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},Ds={key:0,class:"flex align-items-center"},Ms={class:"flex align-items-center"},Ls={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},Ns={key:0,class:"flex align-items-center"},Fs={class:"flex align-items-center"},Vs={for:"name",class:"block text-sm font-medium text-gray-900 dark:text-white"},Us={key:0,class:"flex align-items-center"},js={class:"flex align-items-center"},Ks={class:"confirmation-content"},qs=fe(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),$s={key:0},Bs={class:"confirmation-content"},Hs=fe(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Gs={key:0},zs={key:0,class:"flex align-items-center"},Js={class:"flex align-items-center"},Ws={class:"grid gap-3 md:grid-cols-1 justify-items"},Xs={class:"flex justify-between"},Ys=fe(()=>o("i",{class:"pi pi-plus"},null,-1)),Zs={for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Qs={key:0,class:"flex items-center"},ei={class:"flex items-center"},ti={key:0,for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},ni={key:0,class:"flex items-center"},oi={class:"flex items-center"},ri={class:"flex justify-end"},si={class:"grid gap-3 mb-6 md:grid-cols-2"},ii={for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},ai=["placeholder","required"],li={for:"tax_number",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},ui=["placeholder","required"],ci={class:"mb-6"},di={for:"address",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},fi=["placeholder","required"],mi={class:"grid gap-3 mb-6 md:grid-cols-2"},pi={for:"town",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},hi=["placeholder","required"],vi={for:"province",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},gi=["placeholder","required"],xi={for:"post_code",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},yi=["placeholder","required"],bi={for:"country",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Ii=["placeholder","required"],Si={for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Ci=["placeholder","required"],ki={for:"phone",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},Ai=["placeholder","required"],Ti={class:"grid gap-3 md:grid-cols-1 justify-items-end"},wi={type:"submit",class:"text-white bg-blue-600 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},Ei={class:"imprimir"},Oi={class:"invoice"},_i={class:"invoice-header"},Ri=fe(()=>o("div",{class:"logo"},[o("img",{src:"https://d1csarkz8obe9u.cloudfront.net/posterpreviews/company-logo-design-template-e089327a5c476ce5c70c74f7359c5898_screen.jpg?ts=1672291305",alt:"Logo de la empresa"})],-1)),Pi={class:"invoice_details"},Di={class:"invoice-info"},Mi={class:"company-details"},Li={class:"name"},Ni=fe(()=>o("br",null,null,-1)),Fi={class:"customer-details"},Vi={class:"name"},Ui=fe(()=>o("br",null,null,-1)),ji={class:"invoice-table"},Ki={class:"header"},qi={class:"table-break"},$i={class:"table-container"},Bi={class:"totals"},Hi={class:"title"},Gi={class:"title"},zi={class:"title"},Ji={class:"bank"},Wi={class:"text-gray-600 pr-4"},Xi={key:0},Yi={key:1},Zi={key:2},Qi={key:3},ea={class:"pl-4"},ta={key:0},na={key:1},oa={key:2},ra={key:3},sa={data(){return{resultadoSuma:0,resultadoResta:0,items:[{label:this.$t("Guardar y crear nueva"),icon:"pi pi-refresh",command:()=>this.saveAndReset()},{label:this.$t("Cancelar"),command:()=>this.cancelInvoice()}],taxMap:new Map,fecha:"",expiration:"",fechaFormateada:"",loading:!0,isMobileMenuOpen:!1,showTable:!1,isDropdownOpen:!1,isDropdownOpenExport:!1,saveRestart:!1,taxTypes:[],taxValues:[],taxOptions:[{label:"0",value:0},{label:"4",value:4},{label:"5",value:5},{label:"7",value:7},{label:"8",value:8},{label:"10",value:10},{label:"16",value:16},{label:"18",value:18},{label:"21",value:21}],paymentMethods:[{id:1},{id:2},{id:3},{id:4}],imageUrl:"https://placehold.co/300x300/e2e8f0/e2e8f0",companies:null,customers:null,types:[],series:[],serie:"",counter:"",showButton:!1,productDialog:!1,documentDialog:!1,customerDialog:!1,deleteProductDialog:!1,deleteProductsDialog:!1,selectACustomerDialog:!1,selectAPaymentMethodDialog:!1,selectedOption:[],options:[],selectedBankAccount:[],selectedEmail:[],selectedPhone:[],products:[],selectedCompany:[],selectedCustomer:[],selectedType:[],selectedSerie:[],emails:[],phones:[],selectedProducts:[],selectedPaymentMethod:[],filters:{},submitted:!1,myDocument:{document_counter:"",number:"",company_id_company:"",company_id_customer:"",documents_type_id:"",documents_series_id:"",bank_account_id:"",expiration:"",date:"",amount:"",payment_methods_id:"",totalTax:"",subTotal:"",paid:!1,invoiced:!1,concept:[]},customer:{id:"",name:"",tax_number:"",email:"",phone:"",address:"",post_code:"",town:"",province:"",country:""}}},computed:{dynamicOptionLabel(){switch(this.selectedPaymentMethod.id){case 1:return"complete_bank_account";case 3:return"phone";case 4:return"email";default:return""}},isDropdownHidden(){return this.dynamicOptionLabel===""},subtotal(){return this.products.reduce((t,e)=>t+e.subTotal,0)},totalIVA(){return this.products.reduce((t,e)=>t+e.priceTax,0)},totalConIVA(){return this.subtotal+this.totalIVA}},created(){this.filters={global:{value:null,matchMode:Zn.CONTAINS}};const t=new Date,e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),u=t.getDate().toString().padStart(2,"0");this.fecha=`${e}-${n}-${u}`,this.expiration=`${e}-${n}-${u}`},mounted(){this.fetchCompanies(),this.fetchDocuments(),this.fetchPayments(),this.resultadoSuma=ko(10,5),this.resultadoResta=Ao(10,5),console.log("Log windows"),To()},watch:{selectedPaymentMethod(t){this.handlePaymentMethodChange(t)}},methods:{logWindowInfo(){},handlePaymentMethodChange(t){switch(t.id){case 1:console.log("Transferencia"),this.fetchBanks();break;case 2:console.log("Efectivo");break;case 3:console.log("Bizum"),this.fetchPhones();break;case 4:console.log("PayPal"),this.fetchEmails();break;default:console.log("Error")}},fetchBanks(){console.log("id "+this.selectedCompany.id),axios.get("/banks/"+this.selectedCompany.id).then(t=>{this.banks=t.data.accounts,console.log("aqui"),console.log(this.banks[0]),this.selectedBankAccount=this.banks[0],this.options=this.banks}).catch(t=>{console.error("Error fetching bank data:",t)})},fetchEmails(){axios.get("/emails/"+this.selectedCompany.id).then(t=>{this.emails=t.data.emails,this.selectedEmail=this.emails[0],this.options=this.emails}).catch(t=>{this.$toast(this.$t("Error connecting to the server"),"error")})},fetchPhones(){axios.get("/phones/"+this.selectedCompany.id).then(t=>{this.phones=t.data.phones,this.selectedPhone=this.phones[0],this.options=this.phones}).catch(t=>{this.$toast(this.$t("Error connecting to the server"),"error")})},fetchPayments(){console.log("dentro payments"),axios.get("/payment").then(t=>{console.log("dentro payments2"),this.payment_methods=t.data.methods,this.selectedPaymentMethod=this.payment_methods[0]})},handleScroll(){let t=window.scrollY;console.log(t),t>200?this.showButton=!0:this.showButton=!1},toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen},toggleDropdownExport(){this.isDropdownOpenExport=!this.isDropdownOpenExport},toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen},fetchCompanies(){axios.get("/companies-invoice").then(t=>(this.companies=t.data.companies,console.log(this.companies),this.companies.length===1?(this.selectedCompany=this.companies[0],axios.get("/customers/"+this.selectedCompany.id)):(this.selectedCompany=this.companies[0],this.loading=!1,axios.get("/customers/"+this.selectedCompany.id)))).then(t=>{t&&(this.customers=t.data.customers,this.customers.length===1&&(this.selectedCustomer=this.customers[0])),this.loading=!1}).catch(t=>{console.error("Error fetching data:",t),this.loading=!1})},hideDialog(){this.selectACustomerDialog=!1,this.selectAPaymentMethodDialog=!1,this.customerDialog=!1,this.submitted=!1,console.log("hideDialog "+this.selectACustomerDialog)},openNew(){this.selectACustomerDialog=!1,this.customer={companyID:this.selectedCompany.id},console.log("Prueba cogiendo compañia "+this.customer.companyID),this.submitted=!1,this.customerDialog=!0},selectACustomer(){this.selectACustomerDialog=!0,console.log("selectACustomer "+this.selectACustomerDialog)},selectAPaymentMethod(){this.selectAPaymentMethodDialog=!0,console.log("selectAPaymentMethod")},saveCustomer(){axios.post("/customer",this.customer).then(t=>{this.customer.id=t.data.companyId,console.log("customer: "+this.customer.id),this.selectedCustomer=this.customer,this.customerDialog=!1}).catch(t=>{console.log(t.response),this.customerDialog=!1})},handleCompanySelection(){this.selectedCustomer=[],axios.get("/customers/"+this.selectedCompany.id).then(t=>{this.customers=t.data.customers,this.customers.length===1&&(this.selectedCustomer=this.customers[0])}).catch(t=>{console.error("Error fetching phone data:",t)})},fetchDocuments(){axios.get("/documents-type").then(t=>(this.types=t.data.types,this.selectedType=this.types[0],axios.get("/documents-serie/"+this.selectedType.id+"/"+this.selectedCompany.id))).catch(t=>{console.error("Error fetching phone data:",t)}).then(t=>{t&&(this.series=t.data.series,this.selectedSerie=this.series[0])}).catch(t=>{console.error("Error fetching data:",t),this.loading=!1})},handleTypeSelection(){this.selectedSerie=[],axios.get("/documents-serie/"+this.selectedType.id+"/"+this.selectedCompany.id).then(t=>{this.series=t.data.series}).catch(t=>{console.error("Error fetching phone data:",t)})},selectCompany(){this.productDialog=!0},selectDocument(){this.documentDialog=!0},openFileInput(){this.$refs.fileInput.click()},handleFileChange(t){const e=t.target.files[0],n=new FileReader;n.onload=()=>{this.imageUrl=n.result},n.readAsDataURL(e)},addRow(){let t={reference:"5.01.02.003",description:"Collar",price:8,quantity:1,discount:15,discount_reason:"Descuento profesional",subtotal:0,taxes:21,priceTax:0,total:0,id:this.products.length+1};this.products.push(t),console.log("aqui calculadora")},saveAndReset(){this.saveRestart=!0,this.checkDocument()},checkDocument(){axios.get("/documents-serie/"+this.selectedType.id+"/"+this.selectedCompany.id+"/"+this.selectedSerie.serie).then(t=>{if(this.date=t.data.date.date,console.log("date "+this.date),console.log("fecha "+this.fecha),this.serie=t.data.serie.number,console.log("Serie "+this.serie),console.log("selectedSerie "+this.selectedSerie.number),this.selectedSerie.number<=this.serie){let e=prompt(`El número de documento ya existe. ¿Qué deseas hacer?
1. Conservar el número ingresado
2. Asignar el siguiente valor disponible
3. Cancelar`);e==="1"?(this.$toast(this.$t("The number entered will be retained: ")+this.selectedSerie.number,"success"),this.serie="",this.saveDocument()):e==="2"?(this.selectedSerie.number=++this.serie,this.$toast(this.$t("The following available number has been assigned: ")+this.selectedSerie.number,"success"),this.serie="",this.saveDocument()):this.$toast(this.$t("Invoice cancelled."),"error")}else if(this.date>this.fecha){if(confirm("La fecha seleccionada es anterior a la de la última factura, ¿deseas asignarle la fecha actual?")){const n=new Date,u=n.getFullYear(),S=(n.getMonth()+1).toString().padStart(2,"0"),v=n.getDate().toString().padStart(2,"0");this.fecha=`${u}-${S}-${v}`,this.$toast(this.$t("The current date has been assigned."),"success"),this.saveDocument()}}else this.saveDocument()}).catch(t=>{this.$toast(this.$t("Error saving document data."),"error")})},myDocumentSave(){this.myDocument.number=this.selectedSerie.serie+this.selectedSerie.number,this.myDocument.document_counter=this.selectedSerie.number,this.myDocument.expiration=this.expiration,this.myDocument.payment_methods_id=this.selectedPaymentMethod.id,this.myDocument.company_id_company=this.selectedCompany.id,this.myDocument.company_id_customer=this.selectedCustomer.id,this.myDocument.documents_type_id=this.selectedType.id,this.myDocument.documents_series_id=this.selectedSerie.id,this.myDocument.date=this.fecha,this.myDocument.document_counter=1,this.myDocument.bank_account_id=this.selectedCompany.bank_account_id,this.myDocument.subTotal=this.subtotal.toFixed(2),this.myDocument.totalTax=this.totalIVA.toFixed(2),this.myDocument.amount=this.totalConIVA.toFixed(2)},saveDocument(){this.myDocumentSave(),this.selectedType.id==1&&(this.myDocument.invoiced=!0),this.products.forEach(t=>{try{let e={reference:t.reference,description:t.description,quantity:t.quantity,price:t.price,taxes:t.taxes,discount:t.discount,discount_reason:t.discount_reason,total:this.calculateTotal(t)};this.myDocument.concept.push(e),console.log(e)}catch(e){console.error("Error al crear el objeto newProduct:",e)}}),console.log("numero factura: "+this.myDocument.number),axios.post("/documents",{documentData:this.myDocument}).then(t=>{this.$toast(this.$t("Invoice saved correctly."),"success"),this.saveRestart&&this.resetData()}).catch(t=>{this.$toast(this.$t("Error saving invoice."),"error"),this.myDocument.concept=[]})},resetData(){setTimeout(function(){window.location.reload()},3e3)},calculateGross(t){return t.quantity*t.price},calculateTax(t){return console.log("calculateTax"),t.priceTax=parseFloat(t.taxes/100*t.subTotal),t.priceTax},calculateTotal(t){let e=this.calculateTax(t);return t.total=e+t.subTotal,t.total.toFixed(2)},calculateSubtotal(t){let e=parseFloat(t.quantity)*parseFloat(t.price);return t.subTotal=e-t.discount/100*e,t.subTotal},confirmDeleteProduct(t){this.product=t,this.deleteProductDialog=!0},deleteProduct(){this.products=this.products.filter(t=>t.id!==this.product.id),this.product=null,this.deleteProductDialog=!1},confirmDeleteSelected(){this.deleteProductsDialog=!0},deleteSelectedProducts(){this.selectedProducts.forEach(t=>{this.products=this.products.filter(e=>e.id!==t.id)}),this.selectedProducts=[],this.deleteProductsDialog=!1},exportToPDF(){this.myDocumentSave(),this.calculateTaxes().then(()=>{this.showTable=!this.showTable,window.print()}).catch(t=>{this.$toast(this.$t("Could not generate the PDF."),"error")})},exportToXML(){this.myDocumentSave(),this.calculateTaxes().then(()=>{this.myDocument.document_counter=1,console.log("contador: "+this.myDocument.document_counter);const t=this.convertToFacturaeXML();this.$toast(this.$t("XML document generated correctly."),"success"),this.addsign(t),this.downloadXML(t,"facturae.xml")}).catch(t=>{this.$toast(this.$t("Could not generate the XML."),"error")})},addsign(t){AutoScript.setForceWSMode(!0),AutoScript.cargarAppAfirma(),AutoScript.setServlets(window.location.origin+"/afirma-signature-storage/StorageService",window.location.origin+"/afirma-signature-retriever/RetrieveService");var e=AutoScript.getBase64FromText(t);AutoScript.signAndSaveToFile("sign",e!=null&&e!=null&&e!=""?e:null,"SHA512withRSA","AUTO","",null,showSignResultCallback,showErrorCallback)},convertToFacturaeXML(){let t=`<?xml version="1.0" encoding="UTF-8"?>
            <fe:Facturae xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:fe="http://www.facturae.es/Facturae/2014/v3.2.1/Facturae">
                <FileHeader>
                    <SchemaVersion>3.2.1</SchemaVersion>
                    <Modality>I</Modality>
                    <InvoiceIssuerType>EM</InvoiceIssuerType>
                    <Batch>
                        <BatchIdentifier>${this.selectedCompany.tax_number}${this.selectedSerie.number}${this.selectedSerie.serie}</BatchIdentifier>
                        <InvoicesCount>${this.myDocument.document_counter}</InvoicesCount>
                        <TotalInvoicesAmount>
                            <TotalAmount>${this.myDocument.amount}</TotalAmount>
                        </TotalInvoicesAmount>
                        <TotalOutstandingAmount>
                            <TotalAmount>${this.myDocument.amount}</TotalAmount>
                        </TotalOutstandingAmount>
                        <TotalExecutableAmount>
                            <TotalAmount>${this.myDocument.amount}</TotalAmount>
                        </TotalExecutableAmount>
                        <InvoiceCurrencyCode>EUR</InvoiceCurrencyCode>
                    </Batch>
                </FileHeader> 
                
                <Parties>
                    <SellerParty>
                        <TaxIdentification>
                            <PersonTypeCode>J</PersonTypeCode>
                            <ResidenceTypeCode>R</ResidenceTypeCode>
                            <TaxIdentificationNumber>${this.selectedCompany.tax_number}</TaxIdentificationNumber>
                        </TaxIdentification>
                        <LegalEntity>
                            <CorporateName>${this.selectedCompany.name}</CorporateName>
                            <AddressInSpain>
                                <Address>${this.selectedCompany.address}</Address>
                                <PostCode>${this.selectedCompany.post_code}</PostCode>
                                <Town>${this.selectedCompany.town}</Town>
                                <Province>${this.selectedCompany.province}</Province>
                                <CountryCode>ESP</CountryCode>
                            </AddressInSpain>
                            <ContactDetails>
                                <Telephone>${this.selectedCompany.phone}</Telephone>
                                <ElectronicMail>${this.selectedCompany.email}</ElectronicMail>
                            </ContactDetails>
                        </LegalEntity>
                    </SellerParty>
                    
                    <BuyerParty>
                        <TaxIdentification>
                            <PersonTypeCode>J</PersonTypeCode>
                            <ResidenceTypeCode>R</ResidenceTypeCode>
                            <TaxIdentificationNumber>${this.selectedCustomer.tax_number}</TaxIdentificationNumber>
                        </TaxIdentification>
                        <LegalEntity>
                            <CorporateName>${this.selectedCustomer.name}</CorporateName>
                            <AddressInSpain>
                                <Address>${this.selectedCustomer.address}</Address>
                                <PostCode>${this.selectedCustomer.post_code}</PostCode>
                                <Town>${this.selectedCustomer.town}</Town>
                                <Province>${this.selectedCustomer.province}</Province>
                                <CountryCode>ESP</CountryCode>
                            </AddressInSpain>
                            <ContactDetails>
                                <Telephone>${this.selectedCustomer.phone}</Telephone>
                                <ElectronicMail>${this.selectedCustomer.email}</ElectronicMail>
                            </ContactDetails>
                        </LegalEntity>
                    </BuyerParty>
                    
                </Parties>
                <Invoices>
                    <Invoice>
                        <InvoiceHeader>
                            <InvoiceNumber>${this.selectedSerie.number}</InvoiceNumber>
                            <InvoiceSeriesCode>${this.selectedSerie.serie}</InvoiceSeriesCode>
                            <InvoiceDocumentType>FC</InvoiceDocumentType>
                            <InvoiceClass>OO</InvoiceClass>
                        </InvoiceHeader>
                        <InvoiceIssueData>
                            <IssueDate>${this.myDocument.date}</IssueDate>
                            <InvoiceCurrencyCode>EUR</InvoiceCurrencyCode>
                            <TaxCurrencyCode>EUR</TaxCurrencyCode>
                            <LanguageName>es</LanguageName>
                        </InvoiceIssueData>
                        <TaxesOutputs>
`;return this.taxMap.forEach((e,n)=>{t+=`  <Tax>
`,t+=`    <TaxTypeCode>01</TaxTypeCode>
`,t+=`    <TaxRate>${parseFloat(n).toFixed(2)}</TaxRate>
`,t+=`    <TaxableBase>
`,t+=`      <TotalAmount>${this.calcularImporteBase(n,e).toFixed(2)}</TotalAmount>
`,t+=`    </TaxableBase>
`,t+=`    <TaxAmount>
`,t+=`      <TotalAmount>${e.toFixed(2)}</TotalAmount>
`,t+=`    </TaxAmount>
`,t+=`  </Tax>
`}),t+=`</TaxesOutputs>
                        <InvoiceTotals>
                            <TotalGrossAmount>${this.subtotal.toFixed(2)}</TotalGrossAmount>
                            <TotalGeneralDiscounts>0.0</TotalGeneralDiscounts>
                            <TotalGeneralSurcharges>0.0</TotalGeneralSurcharges>
                            <TotalGrossAmountBeforeTaxes>${this.subtotal.toFixed(2)}</TotalGrossAmountBeforeTaxes>
                            <TotalTaxOutputs>${this.totalIVA.toFixed(2)}</TotalTaxOutputs>
                            <TotalTaxesWithheld>0.0</TotalTaxesWithheld>
                            <InvoiceTotal>${this.myDocument.amount}</InvoiceTotal>
                            <TotalOutstandingAmount>${this.myDocument.amount}</TotalOutstandingAmount>
                            <TotalExecutableAmount>${this.myDocument.amount}</TotalExecutableAmount>
                        </InvoiceTotals>
                        <Items>`,this.products.forEach(e=>{console.log("Products:",this.products),t+=`
                    <InvoiceLine>
                        <ItemDescription>${e.description}</ItemDescription>
                        <Quantity>${e.quantity}</Quantity>
                        <UnitOfMeasure>01</UnitOfMeasure>
                        <UnitPriceWithoutTax>${e.price}</UnitPriceWithoutTax>
                        <TotalCost>${e.quantity*e.price}</TotalCost>
                        <DiscountsAndRebates>
                            <Discount>
                                <DiscountReason>${e.discount_reason}</DiscountReason>
                                <DiscountRate>${parseFloat(e.discount).toFixed(1)}</DiscountRate>
                                <DiscountAmount>${(e.quantity*e.price*(e.discount/100)).toFixed(1)}</DiscountAmount>
                            </Discount>
                        </DiscountsAndRebates>
                        <GrossAmount>${e.subTotal}</GrossAmount>
                        <TaxesOutputs>
                            <Tax>
                                <TaxTypeCode>01</TaxTypeCode>
                                <TaxRate>${e.taxes}</TaxRate>
                                <TaxableBase>
                                    <TotalAmount>${e.subTotal}</TotalAmount>
                                </TaxableBase>
                                <TaxAmount>
                                    <TotalAmount>${e.priceTax.toFixed(2)}</TotalAmount>
                                </TaxAmount>
                            </Tax>
                        </TaxesOutputs>
                    </InvoiceLine>`}),t+=`
                        </Items>
                    </Invoice>
                </Invoices>
            </fe:Facturae>`,console.log("XML Generated:",t),t},downloadXML(t,e){const n=new Blob([t],{type:"application/xml"}),u=document.createElement("a");u.href=URL.createObjectURL(n),u.download=e,u.click(),URL.revokeObjectURL(u.href)},cancelInvoice(){confirm("¿Está seguro? Los datos de esta factura serán descartados")&&this.resetData()},calculateTaxes(){return new Promise((t,e)=>{try{this.taxMap.clear(),this.products.forEach(n=>{let u=n.taxes,S=parseFloat(n.priceTax);if(this.taxMap.has(u)){let v=this.taxMap.get(u);this.taxMap.set(u,v+S)}else this.taxMap.set(u,S)}),console.log(this.taxMap),t()}catch(n){e(n)}})}}},ia=Object.assign(sa,{__name:"Document",setup(t){return(e,n)=>{const u=Xt,S=tn,v=Vn,k=Hn,H=Gn,V=zn,A=Jn,U=Un;return $(),Q(gt,null,[o("div",Oo,[J(oo,{title:"Document"},{header:Z(()=>[o("h2",_o,d(e.$t("New invoice")),1)]),default:Z(()=>[o("div",Ro,[o("div",Po,[o("div",Do,[o("div",Mo,[o("div",Lo,[!e.loading&&e.companies.length>0?($(),Q("button",{key:0,type:"button",class:"px-4 py-2 bg-black text-white border border-gray-200 rounded-md flex items-center justify-between",onClick:n[0]||(n[0]=(...s)=>e.selectCompany&&e.selectCompany(...s))},[o("span",No,[Fo,ke(" "+d(this.selectedCompany.name),1)])])):he("",!0)]),o("div",Vo,[o("div",Uo,[o("div",jo,[J(u,{label:e.$t("Customer"),icon:"pi pi-plus",class:"success-button text-white p-2",onClick:n[1]||(n[1]=s=>e.selectACustomer())},null,8,["label"])]),Ko,o("div",qo,[o("label",$o,d(e.$t("Mark as paid")),1),Oe(o("input",{id:"link-checkbox",type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=s=>this.myDocument.paid=s),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[Qn,this.myDocument.paid]])])]),o("div",Bo,[o("div",Ho,[o("div",Go,[o("button",{type:"button",class:xt(["px-4 py-2 mr-2 success-button text-white rounded flex items-center justify-between",{"opacity-50":!this.selectedCompany.id}]),onClick:n[3]||(n[3]=s=>e.selectDocument()),disabled:!this.selectedCompany.id},[o("span",null,[Jo,ke(" "+d(e.$t("Document type")),1)])],10,zo),o("button",{type:"button",class:"px-4 py-2 bg-purple-600 text-white rounded-md flex items-center justify-between",onClick:n[4]||(n[4]=(...s)=>e.toggleDropdownExport&&e.toggleDropdownExport(...s))},[Wo,ke(" "+d(e.$t("Export")),1)])]),Oe(o("div",Xo,[o("button",{type:"button",class:xt(["px-4 py-2 rounded-l flex items-center justify-between",{"opacity-50":e.totalConIVA<=0}]),onClick:n[5]||(n[5]=s=>e.exportToPDF()),disabled:e.totalConIVA<=0},[o("span",null,[Zo,ke(" "+d(e.$t("PDF")),1)])],10,Yo),o("button",{type:"button",class:"px-4 py-2 rounded-r flex items-center",onClick:n[6]||(n[6]=s=>e.exportToXML())},[o("span",null,[Qo,ke(" "+d(e.$t("XML")),1)])])],512),[[eo,e.isDropdownOpenExport]])]),o("div",er,[J(S,{class:"blue-button",label:e.$t("Save"),onClick:e.checkDocument,model:e.items},{icon:Z(()=>[tr]),_:1},8,["label","onClick","model"])])])]),nr,o("div",or,[o("div",rr,[o("div",sr,[o("div",ir,[o("div",ar,d(e.$t("Customer"))+":",1),o("div",lr,d(this.selectedCustomer.name),1)]),o("div",ur,[o("div",cr,d(e.$t("Tax number"))+":",1),o("div",dr,d(this.selectedCustomer.tax_number),1)]),o("div",fr,[o("div",mr,d(e.$t("Phone"))+":",1),o("div",pr,d(this.selectedCustomer.phone),1)]),o("div",hr,[o("div",vr,d(e.$t("Email"))+":",1),o("div",gr,d(this.selectedCustomer.email),1)]),o("div",xr,[o("div",yr,d(e.$t("Address"))+":",1),o("div",br,d(this.selectedCustomer.address)+", "+d(this.selectedCustomer.post_code)+", "+d(this.selectedCustomer.town)+", "+d(this.selectedCustomer.province)+" ( "+d(this.selectedCustomer.country)+" ) ",1)])])]),o("div",Ir,[o("div",Sr,[o("div",Cr,"Nº "+d(e.selectedType.name)+":",1),o("div",kr,d(e.selectedSerie.serie)+"  / ",1),Oe(o("input",{type:"text",class:"border border-gray-300 rounded-md w-48 px-3 py-2 focus:outline-none focus:border-blue-400","onUpdate:modelValue":n[7]||(n[7]=s=>e.selectedSerie.number=s)},null,512),[[Ne,e.selectedSerie.number]])]),o("div",Ar,[o("div",Tr,d(e.$t("Date"))+":",1),Oe(o("input",{type:"date","onUpdate:modelValue":n[8]||(n[8]=s=>e.fecha=s),onChange:n[9]||(n[9]=(...s)=>e.cambiarFormatoFecha&&e.cambiarFormatoFecha(...s)),class:"border border-gray-300 rounded-md w-48 px-3 py-2 focus:outline-none focus:border-blue-400"},null,544),[[Ne,e.fecha]])]),o("div",wr,[o("div",Er,d(e.$t("Expiration"))+":",1),Oe(o("input",{type:"date","onUpdate:modelValue":n[10]||(n[10]=s=>e.expiration=s),onChange:n[11]||(n[11]=(...s)=>e.cambiarFormatoFecha&&e.cambiarFormatoFecha(...s)),class:"border border-gray-300 rounded-md w-48 px-3 py-2 focus:outline-none focus:border-blue-400"},null,544),[[Ne,e.expiration]])])])]),J(v,{class:"mb-4 mt-8 border border-slate-200 ..."},{start:Z(()=>[o("div",Or,[o("div",_r,[J(u,{label:e.$t("Concept"),icon:"pi pi-plus",severity:"success",class:"mr-2 success-button",onClick:e.addRow},null,8,["label","onClick"]),J(u,{label:e.$t("Delete"),icon:"pi pi-trash",severity:"danger",class:"danger-button",onClick:e.confirmDeleteSelected,disabled:!e.selectedProducts||!e.selectedProducts.length},null,8,["label","onClick","disabled"])]),Rr])]),end:Z(()=>[o("div",Pr,[Oe(o("input",{type:"search",class:"block w-full h-11 rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm","onUpdate:modelValue":n[12]||(n[12]=s=>e.filters.global.value=s),placeholder:e.$t("Search...")},null,8,Dr),[[Ne,e.filters.global.value]]),Mr])]),_:1}),J(A,{ref:"dt",value:e.products,selection:e.selectedProducts,"onUpdate:selection":n[13]||(n[13]=s=>e.selectedProducts=s),dataKey:"id",class:"w-full lg:w-4/4 mx-auto"},{default:Z(()=>[J(k,{selectionMode:"multiple",exportable:!1,class:"datetable checkbox"}),J(k,{field:"reference",header:e.$t("Reference"),sortable:"",class:"dateTable w-1/4"},{body:Z(s=>[J(H,{class:"input w-full",placeholder:e.$t("Reference"),modelValue:s.data.reference,"onUpdate:modelValue":oe=>s.data.reference=oe},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),J(k,{field:"product",header:e.$t("Description"),sortable:"",class:"dateTable w-full"},{body:Z(s=>[J(H,{class:"input w-full",placeholder:e.$t("Description"),modelValue:s.data.description,"onUpdate:modelValue":oe=>s.data.description=oe},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),J(k,{field:"quantity",header:e.$t("Quantity"),sortable:"",class:"dateTable w-1/8"},{body:Z(s=>[J(H,{class:"input input-short w-full",modelValue:s.data.quantity,"onUpdate:modelValue":oe=>s.data.quantity=oe},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),J(k,{field:"price",header:e.$t("Price"),sortable:"",class:"dateTable w-1/4"},{body:Z(s=>[J(H,{class:"input input-short w-full",modelValue:s.data.price,"onUpdate:modelValue":oe=>s.data.price=oe},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),J(k,{field:"discount",header:e.$t("Discount (%)"),sortable:"",class:"dateTable w-1/4"},{body:Z(s=>[J(H,{class:"input input-short w-full",modelValue:s.data.discount,"onUpdate:modelValue":oe=>s.data.discount=oe},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["header"]),J(k,{field:"subTotal",header:e.$t("Subtotal"),sortable:"",class:"dateTable w-1/12"},{body:Z(s=>[J(H,{class:"input input-short w-1/12",value:e.calculateSubtotal(s.data),readonly:""},null,8,["value"])]),_:1},8,["header"]),J(k,{field:"taxes",header:e.$t("Tax (%)"),sortable:"",class:"dateTable w-1/4"},{body:Z(s=>[J(V,{class:"input-short w-full",modelValue:s.data.taxes,"onUpdate:modelValue":oe=>s.data.taxes=oe,options:e.taxOptions,optionLabel:"label",optionValue:"value"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1},8,["header"]),J(k,{field:"total",header:e.$t("Total"),sortable:"",class:"dateTable w-1/12"},{body:Z(s=>[J(H,{class:"input input-short w-1/12",value:e.calculateTotal(s.data),readonly:""},null,8,["value"])]),_:1},8,["header"]),J(k,{exportable:!1,header:e.$t("Utility"),class:"dateTable w-1/12"},{body:Z(s=>[J(u,{icon:"pi pi-trash",outlined:"",rounded:"",class:"simpleDelete-button",severity:"danger",onClick:oe=>e.confirmDeleteProduct(s.data)},null,8,["onClick"])]),_:1},8,["header"])]),_:1},8,["value","selection"]),e.showButton?($(),Q("div",Lr,[J(u,{label:e.$t("Concept"),icon:"pi pi-plus",severity:"success",class:"success-button",onClick:n[14]||(n[14]=s=>e.addRow())},null,8,["label"])])):he("",!0)]),o("div",Nr,[o("div",Fr,[o("button",{class:"ml-4 mb-2 success-button text-white rounded-md p-2",onClick:n[15]||(n[15]=s=>e.selectAPaymentMethod())},[Vr,ke(" "+d(e.$t("Payment method")),1)]),o("div",Ur,[o("table",jr,[o("tbody",null,[o("tr",null,[o("td",Kr,d(e.$t("Payment method"))+":",1),o("td",qr,d(this.selectedPaymentMethod.name),1)]),$r,o("tr",null,[o("td",Br,[e.selectedPaymentMethod.id===2?($(),Q("span",Hr,d(""))):e.selectedPaymentMethod.id===3?($(),Q("span",Gr,d(e.$t("Phone"))+":",1)):e.selectedPaymentMethod.id===4?($(),Q("span",zr,d(e.$t("Email"))+":",1)):($(),Q("span",Jr,d(e.$t("Bank account"))+":",1))]),o("td",Wr,[e.selectedPaymentMethod.id===2?($(),Q("span",Xr,d(""))):e.selectedPaymentMethod.id===3?($(),Q("span",Yr,d(this.selectedPhone.phone),1)):e.selectedPaymentMethod.id===4?($(),Q("span",Zr,d(this.selectedEmail.email),1)):($(),Q("span",Qr,d(this.selectedBankAccount.complete_bank_account),1))])])])])])]),es,o("div",ts,[o("button",{class:"ml-4 mb-5 rounded-md",onClick:n[16]||(n[16]=s=>e.selectAPaymentMethod())}),o("div",ns,[o("table",os,[o("tbody",null,[o("tr",null,[o("td",rs,d(e.$t("Subtotal (excluding Tax)"))+":",1),o("td",ss,d(e.subtotal.toFixed(2))+"€",1)]),is,o("tr",null,[o("td",as,d(e.$t("Total Tax"))+":",1),o("td",ls,d(e.totalIVA.toFixed(2))+"€",1)]),us,o("tr",null,[o("td",cs,d(e.$t("Total (with IVA)"))+":",1),o("td",ds,d(e.totalConIVA.toFixed(2))+"€",1)])])])])])]),o("div",fs,[o("div",ms,[o("button",{class:"ml-4 mb-2 success-button rounded-md",onClick:n[17]||(n[17]=s=>e.selectAPaymentMethod())},[ps,ke(" "+d(e.$t("Payment method")),1)]),o("div",hs,[o("table",vs,[o("tbody",null,[o("tr",null,[o("td",gs,d(e.$t("Payment method"))+":",1),o("td",xs,d(this.selectedPaymentMethod.name),1)]),ys,o("tr",null,[o("td",bs,d(e.$t("Bank account"))+":",1),o("td",Is,d(this.selectedBankAccount.complete_bank_account),1)])])])])]),Ss,o("div",Cs,[o("div",ks,[o("table",As,[o("tbody",null,[o("tr",null,[o("td",Ts,d(e.$t("Subtotal (excluding Tax)"))+":",1),o("td",ws,d(e.subtotal.toFixed(2))+"€",1)]),o("tr",null,[o("td",Es,d(e.$t("Total Tax"))+":",1),o("td",Os,d(e.totalIVA.toFixed(2))+"€",1)]),o("tr",null,[o("td",_s,d(e.$t("Total (with IVA)"))+":",1),o("td",Rs,d(e.totalConIVA.toFixed(2))+"€",1)])])])])])]),J(U,{visible:e.productDialog,"onUpdate:visible":n[19]||(n[19]=s=>e.productDialog=s),header:e.$t("Select companies"),modal:!0,onChange:e.handleCompanySelection,class:"p-fluid w-full sm:w-3/4 md:w-2/3 lg:w-1/2 max-w-4xl"},{default:Z(()=>[o("label",Ps,d(e.$t("Select your company"))+":",1),J(V,{modelValue:e.selectedCompany,"onUpdate:modelValue":n[18]||(n[18]=s=>e.selectedCompany=s),options:e.companies,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500",onChange:e.handleCompanySelection},{value:Z(s=>[s.value?($(),Q("div",Ds,[o("div",null,d(s.value.name),1)])):he("",!0)]),option:Z(s=>[o("div",Ms,[o("div",null,d(s.option.name),1)])]),_:1},8,["modelValue","options","onChange"])]),_:1},8,["visible","header","onChange"]),J(U,{visible:e.documentDialog,"onUpdate:visible":n[22]||(n[22]=s=>e.documentDialog=s),style:{width:"450px"},header:e.$t("Select document"),modal:!0,onChange:e.handleTypeSelection},{default:Z(()=>[o("label",Ls,d(e.$t("Select document type")),1),J(V,{modelValue:e.selectedType,"onUpdate:modelValue":n[20]||(n[20]=s=>e.selectedType=s),options:e.types,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500",onChange:e.handleTypeSelection},{value:Z(s=>[s.value?($(),Q("div",Ns,[o("div",null,d(s.value.name),1)])):he("",!0)]),option:Z(s=>[o("div",Fs,[o("div",null,d(s.option.name),1)])]),_:1},8,["modelValue","options","onChange"]),o("label",Vs,d(e.$t("Select document serie")),1),J(V,{modelValue:e.selectedSerie,"onUpdate:modelValue":n[21]||(n[21]=s=>e.selectedSerie=s),options:this.series,filter:"",optionLabel:"serie",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:Z(s=>[s.value?($(),Q("div",Us,[o("div",null,d(s.value.serie),1)])):he("",!0)]),option:Z(s=>[o("div",js,[o("div",null,d(s.option.serie),1)])]),_:1},8,["modelValue","options"])]),_:1},8,["visible","header","onChange"]),J(U,{visible:e.deleteProductDialog,"onUpdate:visible":n[24]||(n[24]=s=>e.deleteProductDialog=s),style:{width:"450px"},header:e.$t("Confirm"),modal:!0},{footer:Z(()=>[J(u,{label:e.$t("No"),icon:"pi pi-times",text:"",onClick:n[23]||(n[23]=s=>e.deleteProductDialog=!1)},null,8,["label"]),J(u,{label:e.$t("Yes"),icon:"pi pi-check",text:"",onClick:e.deleteProduct},null,8,["label","onClick"])]),default:Z(()=>[o("div",Ks,[qs,e.companies?($(),Q("span",$s,[ke(d(e.$t("Are you sure you want to delete")),1),o("b",null,d(e.companies.name),1),ke("?")])):he("",!0)])]),_:1},8,["visible","header"]),J(U,{visible:e.deleteProductsDialog,"onUpdate:visible":n[26]||(n[26]=s=>e.deleteProductsDialog=s),style:{width:"450px"},header:e.$t("Confirm"),modal:!0},{footer:Z(()=>[J(u,{label:e.$t("No"),icon:"pi pi-times",text:"",onClick:n[25]||(n[25]=s=>e.deleteProductsDialog=!1)},null,8,["label"]),J(u,{label:e.$t("Yes"),icon:"pi pi-check",text:"",onClick:e.deleteSelectedProducts},null,8,["label","onClick"])]),default:Z(()=>[o("div",Bs,[Hs,e.companies?($(),Q("span",Gs,d(e.$t("Are you sure you want to delete the selected concepts?")),1)):he("",!0)])]),_:1},8,["visible","header"])]),J(U,{visible:e.selectACustomerDialog,"onUpdate:visible":n[30]||(n[30]=s=>e.selectACustomerDialog=s),header:e.$t("Select a customer"),id:"titleCompany",modal:!0,class:"p-fluid w-full sm:w-3/4 md:w-2/3 lg:w-1/2 max-w-4xl"},{default:Z(()=>[J(V,{modelValue:e.selectedCustomer,"onUpdate:modelValue":n[27]||(n[27]=s=>e.selectedCustomer=s),options:this.customers,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:Z(s=>[s.value?($(),Q("div",zs,[o("div",null,d(s.value.name),1)])):he("",!0)]),option:Z(s=>[o("div",Js,[o("div",null,d(s.option.name),1)])]),_:1},8,["modelValue","options"]),o("div",Ws,[o("div",Xs,[o("button",{class:"success-button mr-1 mr-1 rounded-md",onClick:n[28]||(n[28]=(...s)=>e.openNew&&e.openNew(...s))},[Ys,ke(" "+d(e.$t("Create customer")),1)]),o("button",{class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:n[29]||(n[29]=s=>e.hideDialog())},d(e.$t("Close")),1)])])]),_:1},8,["visible","header"]),J(U,{visible:e.selectAPaymentMethodDialog,"onUpdate:visible":n[34]||(n[34]=s=>e.selectAPaymentMethodDialog=s),header:e.$t("Select a payment method"),id:"titleCompany",modal:!0,class:"p-fluid w-full sm:w-3/4 md:w-2/3 lg:w-1/2 max-w-4xl"},{default:Z(()=>[o("label",Zs,d(e.$t("Payment method")),1),J(V,{modelValue:e.selectedPaymentMethod,"onUpdate:modelValue":n[31]||(n[31]=s=>e.selectedPaymentMethod=s),options:this.payment_methods,filter:"",optionLabel:"name",class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:Z(s=>[s.value?($(),Q("div",Qs,[o("div",null,d(s.value.name),1)])):he("",!0)]),option:Z(s=>[o("div",ei,[o("div",null,d(s.option.name),1)])]),_:1},8,["modelValue","options"]),e.isDropdownHidden?he("",!0):($(),Q("label",ti,d(e.$t("Select an option")),1)),e.isDropdownHidden?he("",!0):($(),Qe(V,{key:1,modelValue:e.selectedOption,"onUpdate:modelValue":n[32]||(n[32]=s=>e.selectedOption=s),options:this.options,filter:"",optionLabel:e.dynamicOptionLabel,class:"w-full h-11 md:w-64rem mb-4 bg-gray-50 border border-gray-300 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500"},{value:Z(s=>[s.value?($(),Q("div",ni,[o("div",null,d(s.value[e.dynamicOptionLabel]),1)])):he("",!0)]),option:Z(s=>[o("div",oi,[o("div",null,d(s.option[e.dynamicOptionLabel]),1)])]),_:1},8,["modelValue","options","optionLabel"])),o("div",ri,[o("button",{class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:n[33]||(n[33]=s=>e.hideDialog())},d(e.$t("Close")),1)])]),_:1},8,["visible","header"]),J(U,{visible:e.customerDialog,"onUpdate:visible":n[46]||(n[46]=s=>e.customerDialog=s),header:e.$t("Create company"),id:"titleCompany",modal:!0,class:"p-fluid"},{default:Z(()=>[o("form",{style:{width:"800px"},onSubmit:n[45]||(n[45]=Jt((...s)=>e.saveCustomer&&e.saveCustomer(...s),["prevent"]))},[o("div",si,[o("div",null,[o("label",ii,d(e.$t("Company name")),1),Oe(o("input",{type:"text",id:"name","onUpdate:modelValue":n[35]||(n[35]=s=>e.customer.name=s),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Company name"),required:!e.selectedCustomer},null,8,ai),[[Ne,e.customer.name]])]),o("div",null,[o("label",li,d(e.$t("Tax number")),1),Oe(o("input",{type:"text",id:"tax_number","onUpdate:modelValue":n[36]||(n[36]=s=>e.customer.tax_number=s),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Tax number"),required:!e.selectedCustomer},null,8,ui),[[Ne,e.customer.tax_number]])])]),o("div",ci,[o("label",di,d(e.$t("Address")),1),Oe(o("input",{type:"text",id:"address1","onUpdate:modelValue":n[37]||(n[37]=s=>e.customer.address=s),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Address"),required:!e.selectedCustomer},null,8,fi),[[Ne,e.customer.address]])]),o("div",mi,[o("div",null,[o("label",pi,d(e.$t("Town")),1),Oe(o("input",{type:"text",id:"town","onUpdate:modelValue":n[38]||(n[38]=s=>e.customer.town=s),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Town"),required:!e.selectedCustomer},null,8,hi),[[Ne,e.customer.town]])]),o("div",null,[o("label",vi,d(e.$t("Province")),1),Oe(o("input",{type:"text",id:"province","onUpdate:modelValue":n[39]||(n[39]=s=>e.customer.province=s),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Province"),required:!e.selectedCustomer},null,8,gi),[[Ne,e.customer.province]])]),o("div",null,[o("label",xi,d(e.$t("Post code")),1),Oe(o("input",{type:"text",id:"post_code","onUpdate:modelValue":n[40]||(n[40]=s=>e.customer.post_code=s),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Post code"),pattern:"^\\d+$",required:!e.selectedCustomer},null,8,yi),[[Ne,e.customer.post_code]])]),o("div",null,[o("label",bi,d(e.$t("Country")),1),Oe(o("input",{type:"text",id:"country","onUpdate:modelValue":n[41]||(n[41]=s=>e.customer.country=s),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Country"),required:!e.selectedCustomer},null,8,Ii),[[Ne,e.customer.country]])]),o("div",null,[o("label",Si,d(e.$t("Email")),1),Oe(o("input",{type:"email",id:"email","onUpdate:modelValue":n[42]||(n[42]=s=>e.customer.email=s),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("info@mycompany.com"),required:!e.selectedCustomer},null,8,Ci),[[Ne,e.customer.email]])]),o("div",null,[o("label",ki,d(e.$t("Phone")),1),Oe(o("input",{type:"tel",id:"phone","onUpdate:modelValue":n[43]||(n[43]=s=>e.customer.phone=s),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:e.$t("Phone"),pattern:"^\\+\\d{1,3}\\s?\\d{1,14}$",required:!e.selectedCustomer},null,8,Ai),[[Ne,e.customer.phone]])])]),o("div",Ti,[o("div",null,[o("button",{class:"mr-3 text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:n[44]||(n[44]=Jt(s=>e.hideDialog(),["prevent"]))},d(e.$t("Close")),1),o("button",wi,d(e.$t("Save")),1)])])],32)]),_:1},8,["visible","header"])])])]),_:1})]),o("div",Ei,[o("div",Oi,[o("div",_i,[Ri,o("div",Pi,[o("h3",null,d(e.selectedType.name),1),o("p",null,[o("strong",null,d(e.$t("Date"))+": ",1),ke(d(e.fecha),1)]),o("p",null,[o("strong",null,d(e.$t("Expiration"))+": ",1),ke(d(e.expiration),1)]),o("p",null,[o("strong",null,d(e.$t("Number of"))+" "+d(e.selectedType.name)+":",1),ke(" "+d(e.selectedSerie.serie)+" "+d(e.selectedSerie.number),1)])])]),o("div",Di,[o("div",Mi,[o("h3",null,[o("strong",null,d(e.$t("Company")),1)]),o("p",Li,d(e.selectedCompany.name),1),o("p",null,d(e.selectedCompany.tax_number),1),o("p",null,[ke(d(e.selectedCompany.address),1),Ni,ke(" "+d(e.selectedCompany.post_code)+", "+d(e.selectedCompany.town)+", "+d(e.selectedCompany.province)+", "+d("(")+" "+d(e.selectedCompany.country)+" "+d(")"),1)]),o("p",null,d(e.selectedCompany.email),1),o("p",null,d(e.selectedCompany.phone),1)]),o("div",Fi,[o("h3",null,[o("strong",null,d(e.$t("Customer")),1)]),o("p",Vi,d(e.selectedCustomer.name),1),o("p",null,d(e.selectedCustomer.tax_number),1),o("p",null,[ke(d(e.selectedCustomer.address),1),Ui,ke(" "+d(e.selectedCustomer.post_code)+", "+d(e.selectedCustomer.town)+", "+d(e.selectedCustomer.province)+", "+d("(")+" "+d(e.selectedCustomer.country)+" "+d(")"),1)]),o("p",null,d(e.selectedCustomer.email),1),o("p",null,d(e.selectedCustomer.phone),1)])]),o("table",ji,[o("thead",null,[o("tr",Ki,[o("th",null,d(e.$t("Reference")),1),o("th",null,d(e.$t("Description")),1),o("th",null,d(e.$t("Quantity")),1),o("th",null,d(e.$t("Price")),1),o("th",null,d(e.$t("Discount (%)")),1),o("th",null,d(e.$t("Subtotal")),1),o("th",null,d(e.$t("Tax (%)")),1),o("th",null,d(e.$t("Total")),1)])]),o("tbody",null,[($(!0),Q(gt,null,qt(e.products,s=>($(),Q("tr",{key:s.id},[o("td",null,d(s.reference),1),o("td",null,d(s.description),1),o("td",null,d(s.quantity),1),o("td",null,d(s.price),1),o("td",null,d(s.discount),1),o("td",null,d(s.subTotal),1),o("td",null,d(s.taxes),1),o("td",null,d(e.calculateTotal(s)),1)]))),128))])]),o("div",qi,[o("div",$i,[o("table",Bi,[o("tr",null,[o("td",Hi,d(e.$t("Subtotal (excluding Tax)")),1),o("td",null,d(e.subtotal.toFixed(2))+"€",1)]),($(!0),Q(gt,null,qt(this.taxMap,(s,oe)=>($(),Q("tr",{key:oe},[o("td",Gi,d(e.$t("Total IVA"))+" "+d(Object.values(s)[0])+" %",1),o("td",null,d(Object.values(s)[1].toFixed(2))+"€",1)]))),128)),o("tr",null,[o("td",zi,[o("strong",null,d(e.$t("Total (with IVA)")),1)]),o("td",null,[o("strong",null,d(e.totalConIVA.toFixed(2))+"€",1)])])])]),o("table",Ji,[o("tr",null,[o("td",null,d(e.$t("Payment method"))+":",1),o("td",null,d(this.selectedPaymentMethod.name),1)]),o("tr",null,[o("td",Wi,[e.selectedPaymentMethod.id===2?($(),Q("span",Xi,d(""))):e.selectedPaymentMethod.id===3?($(),Q("span",Yi,d(e.$t("Phone"))+":",1)):e.selectedPaymentMethod.id===4?($(),Q("span",Zi,d(e.$t("Email"))+":",1)):($(),Q("span",Qi,d(e.$t("Bank account"))+":",1))]),o("td",ea,[e.selectedPaymentMethod.id===2?($(),Q("span",ta,d(""))):e.selectedPaymentMethod.id===3?($(),Q("span",na,d(this.selectedPhone.phone),1)):e.selectedPaymentMethod.id===4?($(),Q("span",oa,d(this.selectedEmail.email),1)):($(),Q("span",ra,d(this.selectedBankAccount.complete_bank_account),1))])])])])])]),o("div",null,[o("p",null,"Resultado de la suma: "+d(e.resultadoSuma),1),o("p",null,"Resultado de la resta: "+d(e.resultadoResta),1)]),o("button",{onClick:n[47]||(n[47]=(...s)=>e.logWindowInfo&&e.logWindowInfo(...s))},"Log Info de Window")],64)}}}),ma=ro(ia,[["__scopeId","data-v-a481b7ca"]]);export{ma as default};
